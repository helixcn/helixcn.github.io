<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Jinlong Zhang&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Jinlong Zhang&#39;s blog">
<meta property="og:url" content="https://helixcn.github.io/page/13/index.html">
<meta property="og:site_name" content="Jinlong Zhang&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jinlong Zhang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Jinlong Zhang's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jinlong Zhang&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://helixcn.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-2016-2-1-advicer" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2016/01/31/2016-2-1-advicer/" class="article-date">
  <time class="dt-published" datetime="2016-01-31T08:49:54.000Z" itemprop="datePublished">2016-01-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2016/01/31/2016-2-1-advicer/">R编程的一些规则与建议</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>使用R软件进行统计分析, 必须要接触R脚本. R脚本是保存了R代码的文本文件, 一般以.R为扩展名. </p>
<p>要高效得进行代码的编写和调试, 需要一个好的编辑器或者好的编程环境. 当然, 每个人都可以使用最简单的文本编辑, 如Windows Notepad 或者Rgui所提供的文本编辑工具, 但是要避免使用MS word等文档编辑器编辑R脚本. </p>
<p>编辑器最好能符合以下要求: </p>
<ol>
<li><p>等宽字体, 如Consolas, Courier New 等, Consolas配合微软雅黑字体是不错的选择.</p>
</li>
<li><p>代码高亮显示, 意思是对字符串, 数字, 以及语言的关键词, 以及注释部分 分别用不同颜色显示出来.</p>
</li>
<li><p>括号配对, 小括号, 中括号以及花括号成对匹配时同时高亮显示. </p>
</li>
<li><p>提供良好的 正则表达式匹配, 以及特殊字符匹配, 如针对 n, t, r等特殊字符的匹配, 以及替换. </p>
</li>
<li><p>列模式, 即同时对多个列进行输入, 或者编辑. </p>
</li>
<li><p>编码转换工具, 如UTF-8编码转ASCII, GBK18030, BIG5等等. </p>
</li>
<li><p>大小写转换工具</p>
</li>
<li><p>快速运行功能, 如一键运行代码. </p>
</li>
<li><p>显示行号</p>
</li>
<li><p>具有导出为html功能或者Latex, 或RTF等功能</p>
</li>
<li><p>字体大小能够灵活控制, 一般通过按住Contrl并转动鼠标滚轮, 即可调整显示字体的大小. </p>
</li>
</ol>
<p>在众多的编辑器中, 符合这种要求的恐怕不是很多. 目前比较理想的, Windows下是Notepad++, Linux下则是Geany, MacOS下的编辑器则不太了解. 试用过gedit, Kate, 它们都提供了R的高亮, 但是似乎还是不够灵活. 甚至Rstudio这样专门为R设计的IDE, 还是有很多功能没有实现, 所以并不能让人十分满意. </p>
<p>说到编程习惯, 难免老生常谈. 例如, 什么要缩进, 要提供详细的注释等等. 这和其他编程语言并无区别. 然而R毕竟还是有自己的特点, 所以这里还是列出来一些经验:  </p>
<p>在开始分析前, 一定要先简要查看数据的分布, 以确定所选择的统计方法. 在开始编写函数前, 应该对要数据的数据格式, 以及输出的数据有清楚的理解. </p>
<ol>
<li><p>所有的R脚本, 以应R作为扩展名, 这样编辑器打开时能够默认是R语言的高亮, 从而节省选择语言高亮的时间. </p>
</li>
<li><p>R脚本建议以 #### 开头, 然后写清楚 该脚本的标题, 作者, 日期, 联系方式等, 这样, 日后查看脚本这部分注释代码, 有很好的参考作用. </p>
</li>
<li><p>第一句写 setwd(), 指定工作目录. 任何一个任务, 都应该单独创建一个文件夹, 其中放数据, R脚本, 以及运行的结果等</p>
</li>
<li><p>随后是加载该脚本需要用到的程序包 如 <code>library(vegan)</code>, 每一行只加载一个程序包, 直到所有用到的程序包全部加载. </p>
</li>
<li><p>脚本中定义的函数要在加载程序包之后立即定义. </p>
</li>
<li><p>如果数据是保存在xls文件中的, 每个xls文件只保存一个data_sheet. xls文件尽量保存为csv文件, 再读取, 不要保存为txt文件, 因为read.csv()比read.table()要稳定很多. 如果数据是保存在xlsx文件中的, 尽量用 openxlsx程序包所提供的函数read.xlsx()读取数据. </p>
</li>
<li><p>变量的名称要具体,并且只用ASCII码字母, 要避免A,B,C,D,X等类似的变量名. 变量命名时, 尽量不要大小写混搭, 不同部分用下划线_分隔. 理想状态是, 即使不看注释, 只看变量的名称, 也可以知道变量的意义. </p>
</li>
<li><p>算法的关键部分, 要注释, 特别容易出错的地方也要注释. 但是注释不能滥用. 数据处理的名称, 还应该通过变量名体现出来. </p>
</li>
<li><p>缩写的函数要尽量简单明确, 以方便维护. </p>
</li>
<li><p>写函数时要善用 warning, stop等处理异常的函数, 以便规范数据输入. </p>
</li>
<li><p>要尽量学会 git, 以记录所有关键的更改. </p>
</li>
<li><p>一个R脚本, 拷贝到R console运行时, 应该能够全部自动运行, 中间不能再要求手动输入参数. </p>
</li>
<li><p>保存R生成的图像, 应该尽量用 tiff函数和dev.off()配合. 不要再用手动保存的方法. </p>
</li>
<li><p>生成R程序包骨架时, 用 <code>package.skeletons()</code>, 然后分别编写Rd的函数帮助文件. 很多投机取巧的办法编写R程序包只能让问题更加复杂. </p>
</li>
<li><p>为了简化绘图编程, 应该尽快掌握ggplot2程序包. </p>
</li>
<li><p>为了克服计算瓶颈, 应该学会C或者FORTRAN语言, 也可以运用Rcpp结合C++, 并用R调用</p>
</li>
<li><p>及时注意R的更新, 参考如 <a target="_blank" rel="noopener" href="https://github.com/qinwf/awesome-R">https://github.com/qinwf/awesome-R</a> 以及CRAN Task Views的动态. </p>
</li>
</ol>
<p>张金龙</p>
<p>2016年2月1日</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2016/01/31/2016-2-1-advicer/" data-id="ckrsvkzam007h90w04itcdvqb" data-title="R编程的一些规则与建议" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/R%E7%BC%96%E7%A8%8B/" rel="tag">R编程</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-11-24-herbairum_diversity" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2015/11/24/2015-11-24-herbairum_diversity/" class="article-date">
  <time class="dt-published" datetime="2015-11-23T18:45:54.000Z" itemprop="datePublished">2015-11-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2015/11/24/2015-11-24-herbairum_diversity/">《标本馆与生物多样性研究》在浸会大学国际学院的讲座</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>2015年11月23日， 很荣幸应浸会大学Sisi老师的邀请，为她的学生们介绍植物标本馆在生物多样性中的作用。 </p>
<p>幻灯片 <a target="_blank" rel="noopener" href="http://blog.sciencenet.cn/home.php?mod=attachment&id=76660">The role of a herbarium in Biodiversity Studies.ppt</a></p>
<p>这里主要介绍了标本馆的工作流程， 标本的制作， 排列， 以及标本馆数据的应用。</p>
<p><a target="_blank" rel="noopener" href="http://image.sciencenet.cn/home/201511/24/104524c0vz9690c4icnix4.jpg"><img src="http://image.sciencenet.cn/home/201511/24/104524c0vz9690c4icnix4.jpg" alt="img"></a></p>
<p>浸会大学国际学院</p>
<p><a target="_blank" rel="noopener" href="http://www.cie.hkbu.edu.hk/main/index.php">http://www.cie.hkbu.edu.hk/main/index.php</a></p>
<p>(<a target="_blank" rel="noopener" href="https://upload.wikimedia.org/wikipedia/commons/d/d0/HK_Baptist_University_Shek_Mun_Campus.jpg">https://upload.wikimedia.org/wikipedia/commons/d/d0/HK_Baptist_University_Shek_Mun_Campus.jpg</a>)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2015/11/24/2015-11-24-herbairum_diversity/" data-id="ckrsvkza9006j90w09umi1k27" data-title="《标本馆与生物多样性研究》在浸会大学国际学院的讲座" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%87%E6%9C%AC%E9%A6%86/" rel="tag">标本馆</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-11-6-sqlit3" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2015/11/05/2015-11-6-sqlit3/" class="article-date">
  <time class="dt-published" datetime="2015-11-05T08:04:54.000Z" itemprop="datePublished">2015-11-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2015/11/05/2015-11-6-sqlit3/">sqlite3 简明指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>sqlite3 是运行SQL语言的小型数据库软件,有着广泛的应用。本文是学习笔记，原文请参考 <a target="_blank" rel="noopener" href="http://zetcode.com/db/sqlite/">http://zetcode.com/db/sqlite/</a></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--下载: https://www.sqlite.org/download.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--开启数据库, 在terminal输入:</span></span><br><span class="line"></span><br><span class="line">sqlite3 test.db</span><br><span class="line"></span><br><span class="line"><span class="comment">--开启帮助</span></span><br><span class="line">.help</span><br><span class="line"></span><br><span class="line"><span class="comment">--读取 sql脚本</span></span><br><span class="line">.read friends.sql</span><br><span class="line"></span><br><span class="line"><span class="comment">--查询有什么表格</span></span><br><span class="line">.<span class="keyword">TABLE</span> s</span><br><span class="line"></span><br><span class="line"><span class="comment">--显示一个表格的全部内容</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Friends;</span><br><span class="line"></span><br><span class="line"><span class="comment">--设定各列之间的间隔</span></span><br><span class="line">.separator</span><br><span class="line"></span><br><span class="line"><span class="comment">--不同的显示模式</span></span><br><span class="line">.mode <span class="keyword">column</span></span><br><span class="line">.headers <span class="keyword">on</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--选出部分列</span></span><br><span class="line"><span class="keyword">SELECT</span> Name, Title <span class="keyword">FROM</span> Authors <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> Books;</span><br><span class="line"></span><br><span class="line"><span class="comment">--显示不同列时的宽度</span></span><br><span class="line">.width <span class="number">1518</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--显示打印的属性</span></span><br><span class="line">.<span class="keyword">show</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--显示表格的属性</span></span><br><span class="line">.schema Cars</span><br><span class="line"></span><br><span class="line"><span class="comment">--更改 调用命令的前缀</span></span><br><span class="line">.prompt &quot;&gt; &quot;&quot;. &quot;</span><br><span class="line"></span><br><span class="line"><span class="comment">--从 Terminal 运行 sqlite</span></span><br><span class="line">sqlite3 test.db &quot;SELECT * FROM Cars;&quot;</span><br><span class="line"></span><br><span class="line"><span class="comment">--导出数据</span></span><br><span class="line"><span class="comment">--1. 指名文件</span></span><br><span class="line">.output cars2.sql</span><br><span class="line"><span class="comment">--2. 导出sql脚本</span></span><br><span class="line">.dump Cars</span><br><span class="line"></span><br><span class="line"><span class="comment">--.sqlite_history 文件</span></span><br><span class="line">位置 <span class="operator">/</span>home<span class="operator">/</span>jinlong</span><br><span class="line">tail <span class="number">-5</span><span class="operator">~</span><span class="operator">/</span>.sqlite_history</span><br><span class="line"></span><br><span class="line"><span class="comment">--.sqliterc 文件, 内容为纯文本,可以保存sqlite的配置命令, 位置</span></span><br><span class="line"><span class="operator">/</span>home<span class="operator">/</span>jinlong</span><br><span class="line"></span><br><span class="line">每次sqlite3启动时,会自动加载其中的sqlite命令</span><br><span class="line"></span><br><span class="line"><span class="comment">--显示帮助</span></span><br><span class="line">sqlite3 <span class="comment">--help</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--进入sqlite3时，设定相应的参数</span></span><br><span class="line">sqlite3 <span class="operator">-</span>echo <span class="operator">-</span>line <span class="operator">-</span>noheader test.db</span><br><span class="line"></span><br><span class="line"><span class="comment">--显示版本</span></span><br><span class="line">sqlite3 <span class="operator">-</span>version</span><br><span class="line"></span><br><span class="line"><span class="comment">--以html的格式显示</span></span><br><span class="line">sqlite3 <span class="operator">-</span>html test.db</span><br><span class="line"></span><br><span class="line"><span class="comment">----#####################</span></span><br><span class="line"><span class="comment">---数据库的创建</span></span><br><span class="line"><span class="keyword">CREATE</span> </span><br><span class="line"><span class="comment">--任何一个field,有如下几种类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--NULL — The value is a NULL value</span></span><br><span class="line"><span class="comment">--INTEGER — a signed integer</span></span><br><span class="line"><span class="comment">--REAL — a floating point value</span></span><br><span class="line"><span class="comment">--TEXT — a text string</span></span><br><span class="line"><span class="comment">--BLOB — a blob of data</span></span><br><span class="line"></span><br><span class="line"><span class="comment">---创建一个名为 Testing的表, 包含Id一列, 为整数类型</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Testing(Id <span class="type">INTEGER</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看创建Testing的代码</span></span><br><span class="line">.schema Testing</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 若Tesing已经存在, 则再次创建会出错</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Testing(Id <span class="type">INTEGER</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 为了减少这种错误, 可以用 IF NOT EXISTS 检查.</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> Testing(Id <span class="type">INTEGER</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 从其他数据生成表格</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Cars2 <span class="keyword">AS</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars;</span><br><span class="line"></span><br><span class="line"><span class="comment">--查看现有数据库名</span></span><br><span class="line">.databases</span><br><span class="line"></span><br><span class="line"><span class="comment">--有多个数据库时,需要在命令中指定要更改的数据库</span></span><br><span class="line"></span><br><span class="line">ATTACH DATABASE <span class="string">&#x27;test2.db&#x27;</span> <span class="keyword">AS</span> <span class="string">&#x27;test2&#x27;</span>; <span class="comment">-- ### 可先在sqlite中更改数据库的名称</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test2.Cars(Id <span class="type">INTEGER</span> <span class="keyword">PRIMARY</span> KEY, Name TEXT, Price <span class="type">INTEGER</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test2.Cars <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;Porsche&#x27;</span>,<span class="number">107699</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> main.Cars <span class="keyword">WHERE</span> Id<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 临时数据库, 其中的数据表不会显示. 临时数据库的名称为 temp</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> Cars(Id <span class="type">INTEGER</span> <span class="keyword">PRIMARY</span> KEY, Name TEXT, Price <span class="type">INTEGER</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> temp.Cars <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;Kia&#x27;</span>,<span class="number">24300</span>);</span><br><span class="line">.databases</span><br><span class="line"></span><br><span class="line"><span class="comment">--删除表格</span></span><br><span class="line"><span class="keyword">DROP</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">--查看表格</span></span><br><span class="line">.<span class="keyword">TABLE</span> s</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> Testing;</span><br><span class="line"><span class="comment">--如果 Testing表格不存在, 而用DROP则会出错.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--为了排除这种错误, 一般改为</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> Testing;</span><br><span class="line"></span><br><span class="line"><span class="comment">--删除某一个数据库中的数据表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> test2.Cars;</span><br><span class="line"></span><br><span class="line"><span class="comment">--###########################################</span></span><br><span class="line"><span class="comment">-- ALTER</span></span><br><span class="line"><span class="comment">-- 对表格的更改</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Names(Id <span class="type">INTEGER</span>, NameTEXT);</span><br><span class="line"></span><br><span class="line"><span class="comment">--表格改名</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Names RENAME <span class="keyword">TO</span> NamesOfFriends;</span><br><span class="line">.schema NamesOfFriends</span><br><span class="line"></span><br><span class="line"><span class="comment">--为表格中增加一列</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> NamesOfFriends <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> Email TEXT;</span><br><span class="line">.schema NamesOfFriends</span><br><span class="line"></span><br><span class="line"><span class="comment">---########################################</span></span><br><span class="line"><span class="comment">--- sqlite语法规则</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">3</span>,<span class="string">&#x27;Wolf&#x27;</span>,<span class="number">34.5</span>;</span><br><span class="line">.<span class="keyword">null</span> <span class="keyword">value</span> <span class="keyword">NULL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">---二进制大型物件 Binary Large Object (BLOB)</span></span><br><span class="line"><span class="keyword">SELECT</span> x<span class="string">&#x27;345eda2348587aeb&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">---###### sqlite中的 运算符</span></span><br><span class="line"><span class="comment">--- Arithmetic operators</span></span><br><span class="line"><span class="comment">--- Boolean operators</span></span><br><span class="line"><span class="comment">--- Relational operators</span></span><br><span class="line"><span class="comment">--- Bitwise operators</span></span><br><span class="line"><span class="comment">--- Other operators</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- ||</span></span><br><span class="line"><span class="comment">--- * / %</span></span><br><span class="line"><span class="comment">--- + -</span></span><br><span class="line"><span class="comment">--- &lt;&lt; &gt;&gt; &amp; |</span></span><br><span class="line"><span class="comment">--- &lt; &lt;= &gt; &gt;=</span></span><br><span class="line"><span class="comment">--- = == != &lt;&gt; IS IN LIKE GLOB BETWEEN</span></span><br><span class="line"><span class="comment">--- AND </span></span><br><span class="line"><span class="comment">--- OR</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--取反字符</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">-</span>(<span class="number">3</span><span class="number">-44</span>);</span><br><span class="line"><span class="comment">--- unary prefixoperators:</span></span><br><span class="line"><span class="comment">--- - + ~ NOT</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- 数值运算</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">3</span> <span class="operator">*</span> <span class="number">3</span><span class="operator">/</span><span class="number">9</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">3</span> <span class="operator">+</span> <span class="number">4</span> <span class="operator">-</span> <span class="number">1</span> <span class="operator">+</span> <span class="number">5</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">11</span> <span class="operator">%</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">---逻辑运算符</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">AND</span> <span class="number">1</span>, <span class="number">0</span> <span class="keyword">AND</span> <span class="number">1</span>, <span class="number">1</span> <span class="keyword">AND</span> <span class="number">0</span>, <span class="number">0</span> <span class="keyword">AND</span> <span class="number">0</span> ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">3</span><span class="operator">=</span><span class="number">3</span> <span class="keyword">AND</span> <span class="number">4</span><span class="operator">=</span><span class="number">4</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">0</span> <span class="keyword">OR</span> <span class="number">1</span>,<span class="number">1</span> <span class="keyword">OR</span> <span class="number">0</span>, <span class="number">1</span> <span class="keyword">OR</span> <span class="number">1</span>,<span class="number">0</span> <span class="keyword">OR</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NOT</span> <span class="number">1</span>, <span class="keyword">NOT</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NOT</span> (<span class="number">3</span><span class="operator">=</span><span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--- 判断</span></span><br><span class="line"><span class="comment">--- Symbol Meaning</span></span><br><span class="line"><span class="comment">--- &lt; strictly less than</span></span><br><span class="line"><span class="comment">--- &lt;= less than or equal to</span></span><br><span class="line"><span class="comment">--- &gt; greater than</span></span><br><span class="line"><span class="comment">--- &gt;= greater than or equal to</span></span><br><span class="line"><span class="comment">--- = or == equal to</span></span><br><span class="line"><span class="comment">--- != or &lt;&gt; not equal to</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">3</span> <span class="operator">*</span> <span class="number">3</span><span class="operator">=</span><span class="operator">=</span><span class="number">9</span>, <span class="number">9</span><span class="operator">=</span><span class="number">9</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">3</span> <span class="operator">&lt;</span><span class="number">4</span>, <span class="number">3</span><span class="operator">&lt;&gt;</span><span class="number">5</span>, <span class="number">4</span><span class="operator">&gt;=</span><span class="number">4</span>, <span class="number">5</span><span class="operator">!=</span><span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">---位运算, 针对二进制的运算</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- bitwise and operator &amp;,</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">6</span> <span class="operator">&amp;</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">3</span> <span class="operator">&amp;</span> <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- bitwise or operator|</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- bitwise sh IF t &lt;&lt; &gt;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- 取反</span></span><br><span class="line"><span class="comment">--- bitwise negation operator</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">~</span><span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 其他运算符</span></span><br><span class="line"><span class="comment">--- ||字符串连接符</span></span><br><span class="line"><span class="comment">--- IN判断某个字符是否在一个向量中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--例如 </span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;Tom&#x27;</span> <span class="keyword">IN</span> (<span class="string">&#x27;Tom&#x27;</span>,<span class="string">&#x27;Frank&#x27;</span>,<span class="string">&#x27;Jane&#x27;</span>);</span><br><span class="line"><span class="comment">---例如</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars <span class="keyword">WHERE</span> Name <span class="keyword">IN</span>(<span class="string">&#x27;Audi&#x27;</span>,<span class="string">&#x27;Hummer&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">---LIKE, 配合 WHERE , 用正则表达式筛选</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars <span class="keyword">WHERE</span> Name <span class="keyword">LIKE</span><span class="string">&#x27;Vol%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 特定字符数的字符筛选</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars <span class="keyword">WHERE</span> Name <span class="keyword">LIKE</span><span class="string">&#x27;____&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- GLOB, 类似于 Like, 但是区分大小写, 同时识别UNIX字符</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars <span class="keyword">WHERE</span> Name GLOB <span class="string">&#x27; * en&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars <span class="keyword">WHERE</span> Name GLOB <span class="string">&#x27;????&#x27;</span>;<span class="comment">---四个字符</span></span><br><span class="line"><span class="keyword">AND</span></span><br><span class="line"><span class="keyword">BETWEEN</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars <span class="keyword">WHERE</span> Price <span class="keyword">BETWEEN</span> <span class="number">20000</span> <span class="keyword">AND</span> <span class="number">55000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 运算符的优先级</span></span><br><span class="line"><span class="comment">--- unary + - ~ NOT</span></span><br><span class="line"><span class="comment">--- ||</span></span><br><span class="line"><span class="comment">--- * / %</span></span><br><span class="line"><span class="comment">--- + -</span></span><br><span class="line"><span class="comment">--- &lt;&lt; &lt;&gt; &amp; |</span></span><br><span class="line"><span class="comment">--- &lt; &lt;= &gt; &gt;=</span></span><br><span class="line"><span class="comment">--- = == != &lt;&gt; IS IN LIKE GLOB BETWEEN</span></span><br><span class="line"><span class="comment">--- AND </span></span><br><span class="line"><span class="comment">--- OR</span></span><br><span class="line"></span><br><span class="line"><span class="comment">---同一级别运算符的顺序-</span></span><br><span class="line"><span class="comment">---从左至右</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">9</span><span class="operator">/</span><span class="number">3</span> <span class="operator">*</span> <span class="number">3</span>;</span><br><span class="line"><span class="comment">---- 从左至右的运算符包括</span></span><br><span class="line"><span class="comment">---- Arithmetic, boolean, relational, and bitwise operators are all left to right associated.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--- 数据的插入, 更新和删除</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> Cars;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Cars(Id <span class="type">INTEGER</span> <span class="keyword">PRIMARY</span> KEY, Name TEXT, Price <span class="type">INTEGER</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;Not available&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Cars(Id, Name, Price) <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">&#x27;Audi&#x27;</span>,<span class="number">52642</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Cars(Name, Price) <span class="keyword">VALUES</span> (<span class="string">&#x27;Mercedes&#x27;</span>,<span class="number">57127</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars;</span><br><span class="line"><span class="comment">--- ### 设定为 INTEGER PRIMARY KEY 之后, 插入数据时, 可以忽略, 数据库会为新纪录自动增加一个Id</span></span><br><span class="line"></span><br><span class="line"><span class="comment">---若未能在INSERT 时给出各列名称, 则需要按照长度提供所有值</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Cars <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;Skoda&#x27;</span>, <span class="number">9000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 显示 NULL as NULL</span></span><br><span class="line">.nullvalue <span class="keyword">NULL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars <span class="keyword">WHERE</span> Id<span class="operator">=</span><span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 对于已经有primary key条目的插入</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Cars <span class="keyword">VALUES</span>(<span class="number">4</span>,<span class="string">&#x27;Volvo&#x27;</span>,<span class="number">29000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">OR</span> REPLACE <span class="keyword">INTO</span> Cars <span class="keyword">VALUES</span>(<span class="number">4</span>,<span class="string">&#x27;Volvo&#x27;</span>,<span class="number">29000</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars <span class="keyword">WHERE</span> Id<span class="operator">=</span><span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 如果插入数据不成功， 会提示fail</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">OR</span> FAIL <span class="keyword">INTO</span> Cars <span class="keyword">VALUES</span>(<span class="number">4</span>,<span class="string">&#x27;Bentley&#x27;</span>,<span class="number">350000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 不会提示任何信息</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">OR</span> IGNORE <span class="keyword">INTO</span> Cars <span class="keyword">VALUES</span>(<span class="number">4</span>,<span class="string">&#x27;Bentley&#x27;</span>,<span class="number">350000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--- sqlite 3.7.11 之后, 可以同时插入多行</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Ints(Id <span class="type">INTEGER</span> <span class="keyword">PRIMARY</span> KEY, Val <span class="type">INTEGER</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Ints(Val) <span class="keyword">VALUES</span>(<span class="number">1</span>),(<span class="number">3</span>),(<span class="number">5</span>),(<span class="number">6</span>),(<span class="number">7</span>),(<span class="number">8</span>),(<span class="number">6</span>),(<span class="number">4</span>),(<span class="number">9</span>);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Cars2(Id <span class="type">INTEGER</span> <span class="keyword">PRIMARY</span> KEY, Name TEXT, Price <span class="type">INTEGER</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Cars2 <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars;</span><br><span class="line"></span><br><span class="line"><span class="comment">---############################################</span></span><br><span class="line"><span class="comment">--- ####### DELETE 删除部分数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> Cars2 <span class="keyword">WHERE</span> Id<span class="operator">=</span><span class="number">1</span>; </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars2; <span class="comment">-- 删除Cars2中的全部内容</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> Cars2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">Count</span>(Id)<span class="keyword">AS</span><span class="string">&#x27;# of cars&#x27;</span><span class="keyword">FROM</span> Cars2;</span><br><span class="line">.read cars.sql</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> Cars LIMIT5;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars;</span><br><span class="line"></span><br><span class="line"><span class="comment">----############################################</span></span><br><span class="line"><span class="comment">---- ####### Update,按照条件对数据进行修改</span></span><br><span class="line">.read cars.sql</span><br><span class="line">UPDATE Cars <span class="keyword">SET</span> Name<span class="operator">=</span><span class="string">&#x27;Skoda Octavia&#x27;</span> <span class="keyword">WHERE</span> Id<span class="operator">=</span><span class="number">3</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars <span class="keyword">WHERE</span> Id<span class="operator">=</span><span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">----###########################################</span></span><br><span class="line"><span class="comment">---- #### SELECT 的使用</span></span><br><span class="line"><span class="comment">---- ### 显示全部表格</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars;</span><br><span class="line"></span><br><span class="line"><span class="comment">----### 选择特定的列</span></span><br><span class="line"><span class="keyword">SELECT</span> Name, Price <span class="keyword">FROM</span> Cars;</span><br><span class="line"></span><br><span class="line"><span class="comment">---- ### 查询结果, 但是改查询结果的名</span></span><br><span class="line"><span class="keyword">SELECT</span> Name, Price <span class="keyword">AS</span> <span class="string">&#x27;Price of car&#x27;</span><span class="keyword">FROM</span> Cars;</span><br><span class="line"></span><br><span class="line"><span class="comment">---- ### 显示部分数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars LIMIT <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars LIMIT <span class="number">2</span>, <span class="number">4</span>; <span class="comment">--- 选择显示四行,但是不要查看前两行</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars LIMIT <span class="number">4</span> <span class="keyword">OFFSET</span> <span class="number">2</span>; <span class="comment">--- Offset 忽略前两行,但是显示四行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">----##############################################</span></span><br><span class="line"><span class="comment">----### 输出数据的排序</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars <span class="keyword">ORDER</span> <span class="keyword">BY</span> Price;</span><br><span class="line"><span class="keyword">SELECT</span> Name, Price <span class="keyword">FROM</span> Cars <span class="keyword">ORDER</span> <span class="keyword">BY</span> Price <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">----##############################################</span></span><br><span class="line"><span class="comment">---和 WHERE 搭配使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Orders <span class="keyword">WHERE</span> Id<span class="operator">=</span><span class="number">6</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Orders <span class="keyword">WHERE</span> Customer <span class="operator">=</span> &quot;Smith&quot;;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Orders <span class="keyword">WHERE</span> Customer <span class="keyword">LIKE</span> <span class="string">&#x27;B%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#################################################</span><br><span class="line"><span class="comment">--- 检查重复记录</span></span><br><span class="line"><span class="keyword">SELECT</span> Customer <span class="keyword">FROM</span> Orders <span class="keyword">WHERE</span> Customer <span class="keyword">LIKE</span> <span class="string">&#x27;B%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 去除重复</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Customer <span class="keyword">FROM</span> Orders <span class="keyword">WHERE</span> Customer <span class="keyword">LIKE</span> <span class="string">&#x27;B%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">----#####################################################</span></span><br><span class="line"><span class="comment">----数据分组</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">sum</span>(OrderPrice) <span class="keyword">AS</span> Total, Customer <span class="keyword">FROM</span> Orders <span class="keyword">GROUP</span> <span class="keyword">BY</span> Customer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">sum</span>(OrderPrice) <span class="keyword">AS</span> Total, Customer <span class="keyword">FROM</span> Orders</span><br><span class="line"> <span class="keyword">GROUP</span> <span class="keyword">BY</span> Customer <span class="keyword">HAVING</span> <span class="built_in">sum</span>(OrderPrice)<span class="operator">&gt;</span><span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">----#######################################################</span></span><br><span class="line"><span class="comment">----### 限制条件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- NOT NULL</span></span><br><span class="line"><span class="comment">-- UNIQUE</span></span><br><span class="line"><span class="comment">-- PRIMARY KEY</span></span><br><span class="line"><span class="comment">-- FOREIGN KEY</span></span><br><span class="line"><span class="comment">-- CHECK</span></span><br><span class="line"><span class="comment">-- DEFAULT</span></span><br><span class="line"></span><br><span class="line"><span class="comment">----### 创建表的时候, 声明不能有空值</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> People(Id <span class="type">INTEGER</span>,LastName TEXT <span class="keyword">NOT</span> <span class="keyword">NULL</span>, FirstName TEXT <span class="keyword">NOT</span> <span class="keyword">NULL</span>, City TEXT);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> People <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;Hanks&#x27;</span>, <span class="string">&#x27;Robert&#x27;</span>, <span class="string">&#x27;New York&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> People <span class="keyword">VALUES</span>(<span class="number">2</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;Marianne&#x27;</span>, <span class="string">&#x27;Chicago&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">----##########################################################</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Brands(Id <span class="type">INTEGER</span>, BrandName TEXT <span class="keyword">UNIQUE</span>);</span><br><span class="line"><span class="comment">----#### 不符合条件时, 要报错</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Brands <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;Coca Cola&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Brands <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;Pepsi&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Brands <span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="string">&#x27;Pepsi&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">---PRIMARY KEY 限制条件, PRIMARY KEY只能指定一个, 该列所有值为唯一的, 并且顺序增加. primary key是其他表格引用该表格的基础.</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> Brands;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Brands(Id <span class="type">INTEGER</span> <span class="keyword">PRIMARY</span> KEY,BrandName TEXT);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Brands(BrandName)<span class="keyword">VALUES</span>(<span class="string">&#x27;CocaCola&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Brands(BrandName)<span class="keyword">VALUES</span>(<span class="string">&#x27;Pepsi&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Brands(BrandName)<span class="keyword">VALUES</span>(<span class="string">&#x27;Sun&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Brands(BrandName)<span class="keyword">VALUES</span>(<span class="string">&#x27;Oracle&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Brands;</span><br><span class="line"></span><br><span class="line"><span class="comment">----引用其他表中的id</span></span><br><span class="line"><span class="keyword">FOREIGN</span> KEY(AuthorId) <span class="keyword">REFERENCES</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">BEGIN</span> TRANSACTION;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> Books;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> Authors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Authors(AuthorId <span class="type">INTEGER</span> <span class="keyword">PRIMARY</span> KEY, Name TEXT);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Authors <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;Jane Austen&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Authors <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;Leo Tolstoy&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Authors <span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="string">&#x27;Joseph Heller&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Authors <span class="keyword">VALUES</span>(<span class="number">4</span>,<span class="string">&#x27;Charles Dickens&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Books(BookId <span class="type">INTEGER</span> <span class="keyword">PRIMARY</span> KEY, TitleTEXT, AuthorId <span class="type">INTEGER</span>, <span class="keyword">FOREIGN</span> KEY(AuthorId) <span class="keyword">REFERENCES</span> Authors(AuthorId));</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Books <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;Emma&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Books <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;War and Peace&#x27;</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Books <span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="string">&#x27;Catch XII&#x27;</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Books <span class="keyword">VALUES</span>(<span class="number">4</span>,<span class="string">&#x27;David Copperfield&#x27;</span>,<span class="number">4</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Books <span class="keyword">VALUES</span>(<span class="number">5</span>,<span class="string">&#x27;Good as Gold&#x27;</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Books <span class="keyword">VALUES</span>(<span class="number">6</span>,<span class="string">&#x27;Anna Karenia&#x27;</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">---将两个表格的id绑定(其中一个引用另外一个),则被引用表格中的数据不能直接删除</span></span><br><span class="line">PRAGMA foreign_keys<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> Authors <span class="keyword">WHERE</span> AuthorId<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Books(BookId <span class="type">INTEGER</span> <span class="keyword">PRIMARY</span> KEY, TitleTEXT, AuthorId <span class="type">INTEGER</span>, <span class="keyword">FOREIGN</span> KEY(AuthorId) <span class="keyword">REFERENCES</span> Authors(AuthorId)<span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> Name, Title <span class="keyword">FROM</span> Authors <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> Books;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> Authors <span class="keyword">WHERE</span> AuthorId<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line"><span class="keyword">SELECT</span> Name, Title <span class="keyword">FROM</span> Authors <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> Books;</span><br><span class="line"></span><br><span class="line">.schema Orders <span class="comment">--- 查看表格头以及各列的名称和数据类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Orders(OrderPrice, Customer) <span class="keyword">VALUES</span> (<span class="number">-10</span>,<span class="string">&#x27;Johnson&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">---默认值关键字 DEFAULT</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Hotels(Id <span class="type">INTEGER</span> <span class="keyword">PRIMARY</span> KEY, NameTEXT, City TEXT <span class="keyword">DEFAULT</span> <span class="string">&#x27;not available&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Hotels(Name) <span class="keyword">VALUES</span> (<span class="string">&#x27;Slovan&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">----###############################################</span></span><br><span class="line"><span class="comment">----两个表格的合并</span></span><br><span class="line"></span><br><span class="line"><span class="comment">----三种类型的合INNER 并</span></span><br><span class="line"><span class="comment">-- (1) INNER JOIN,</span></span><br><span class="line"><span class="comment">-- (2) NATURAL INNER JOIN</span></span><br><span class="line"><span class="comment">-- (3) CROSS INNER JOIN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">---(1)INNER JOIN,</span></span><br><span class="line"><span class="keyword">SELECT</span> Name, <span class="keyword">Day</span> <span class="keyword">FROM</span> Customers <span class="keyword">AS</span> C <span class="keyword">JOIN</span> Reservations <span class="keyword">AS</span> R <span class="keyword">ON</span> C.CustomerId <span class="operator">=</span> R.CustomerId;</span><br><span class="line"><span class="comment">--- 注意AS XX 是为数据表临时改名, 以方便引用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">---以上句子可以用SELECT 实现相同的效果</span></span><br><span class="line"><span class="keyword">SELECT</span> Name, <span class="keyword">Day</span> <span class="keyword">FROM</span> Customers, Reservations <span class="keyword">WHERE</span> Customers.CustomerId <span class="operator">=</span> Reservations.CustomerId;</span><br><span class="line"></span><br><span class="line"><span class="comment">---(2)NATURAL INNERJOIN</span></span><br><span class="line"><span class="comment">--- NATURALJOIN自动以两个表中相同的列名进行匹配</span></span><br><span class="line"><span class="keyword">SELECT</span> Name, <span class="keyword">Day</span> <span class="keyword">FROM</span> Customers <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> Reservations;</span><br><span class="line"></span><br><span class="line"><span class="comment">---(3)CROSS INNER JOIN 是将表1和表2所有项进行匹配,并无实际应用价值.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- OUTER JOINS,也分为三种 (left outer joins,right outer joins,and full outer joins),但是SQLite只支持第一种 left outer joins</span></span><br><span class="line"><span class="comment">--- OUTER JOINS 查询左侧表格的所有内容,即便在右侧表格没有值,也将以NULL的形式给出</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> Name, <span class="keyword">Day</span> <span class="keyword">FROM</span> Customers <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> Reservations <span class="keyword">ON</span> Customers.CustomerId <span class="operator">=</span> Reservations.CustomerId;</span><br><span class="line"><span class="comment">---另一种方法选择</span></span><br><span class="line"><span class="keyword">SELECT</span> Name, <span class="keyword">Day</span> <span class="keyword">FROM</span> Customers <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> Reservations <span class="keyword">USING</span>(CustomerId);</span><br><span class="line"></span><br><span class="line"><span class="comment">----自动匹配另一个表格</span></span><br><span class="line">NATURALLEFTOUTERJOIN</span><br><span class="line"><span class="keyword">SELECT</span> Name, <span class="keyword">Day</span> <span class="keyword">FROM</span> Customers <span class="keyword">NATURAL</span> <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> Reservations;</span><br><span class="line"></span><br><span class="line"><span class="comment">----#############################################################</span></span><br><span class="line"><span class="comment">----SQLite中的函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">----第一类 核心函数</span></span><br><span class="line"><span class="keyword">SELECT</span> sqlite_version()</span><br><span class="line"><span class="keyword">SELECT</span> random() <span class="keyword">AS</span> Random;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">abs</span>(<span class="number">11</span>),<span class="built_in">abs</span>(<span class="number">-5</span>),<span class="built_in">abs</span>(<span class="number">0</span>),<span class="built_in">abs</span>(<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">max</span>(Price),<span class="built_in">min</span>(Price) <span class="keyword">FROM</span> Cars;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">upper</span> (Name) <span class="keyword">AS</span> <span class="string">&#x27;Names in capitals&#x27;</span> <span class="keyword">FROM</span> Friends;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">lower</span> (Name) <span class="keyword">AS</span> <span class="string">&#x27;Names in lowercase&#x27;</span> <span class="keyword">FROM</span> Friends <span class="keyword">WHERE</span> Id <span class="keyword">IN</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">SELECT</span> length(<span class="string">&#x27;ZetCode&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> total_changes() <span class="keyword">AS</span> <span class="string">&#x27;Total changes&#x27;</span>; <span class="comment">--- 数据库连接以来INSERT ,UPDATE,orDELETE的次数</span></span><br><span class="line"><span class="keyword">SELECT</span> sqlite_compileoption_used(<span class="string">&#x27;SQLITE_DEFAULT_FOREIGN_KEYS&#x27;</span>) <span class="keyword">AS</span> <span class="string">&#x27;FK&#x27;</span>; <span class="comment">---查看某选项的状态</span></span><br><span class="line"><span class="keyword">SELECT</span> typeof(<span class="number">12</span>), typeof(<span class="string">&#x27;ZetCode&#x27;</span>), typeof(<span class="number">33.2</span>), typeof(<span class="keyword">NULL</span>), typeof(x<span class="string">&#x27;345edb&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">----第二类 聚合函数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>( <span class="operator">*</span> ) <span class="keyword">AS</span> <span class="string">&#x27;# of cars&#x27;</span> <span class="keyword">FROM</span> Cars;<span class="comment">--- 返回行数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(Customer) <span class="keyword">AS</span> <span class="string">&#x27;# of orders&#x27;</span> <span class="keyword">FROM</span> Orders;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="keyword">DISTINCT</span> Customer) <span class="keyword">AS</span> <span class="string">&#x27;# of customers&#x27;</span> <span class="keyword">FROM</span> Orders;</span><br><span class="line"></span><br><span class="line"><span class="comment">----让sqlite显示NULL</span></span><br><span class="line">.nullvalue <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> TESTING(Id <span class="type">INTEGER</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Testing <span class="keyword">VALUES</span>(<span class="number">1</span>),(<span class="number">2</span>),(<span class="number">3</span>),(<span class="keyword">NULL</span>),(<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">SELECT</span> last_insert_rowid();</span><br><span class="line"></span><br><span class="line"><span class="comment">--- count( * )和 count(Id)的区别,count( * )考虑NULL,而后者全部去掉NULL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">AS</span> <span class="string">&#x27;# of rows&#x27;</span> <span class="keyword">FROM</span> Testing;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(Id) <span class="keyword">AS</span> <span class="string">&#x27;# of non NULL values&#x27;</span> <span class="keyword">FROM</span> Testing;</span><br><span class="line"></span><br><span class="line"><span class="comment">---平均值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">avg</span>(Price) <span class="keyword">AS</span> <span class="string">&#x27;Average price&#x27;</span> <span class="keyword">FROM</span> Cars;</span><br><span class="line"></span><br><span class="line"><span class="comment">---求和</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">sum</span>(OrderPrice) <span class="keyword">AS</span> Sum <span class="keyword">FROM</span> Orders;</span><br><span class="line"></span><br><span class="line"><span class="comment">----第三类 日期和时间函数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">date</span>(<span class="string">&#x27;now&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> datetime(<span class="string">&#x27;now&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">time</span>(<span class="string">&#x27;now&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">time</span>();</span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">date</span>();</span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">date</span>(<span class="string">&#x27;now&#x27;</span>,<span class="string">&#x27;2 months&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">date</span>(<span class="string">&#x27;now&#x27;</span>,<span class="string">&#x27;-55 days&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">date</span>(<span class="string">&#x27;now&#x27;</span>,<span class="string">&#x27;start of year&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> datetime(<span class="string">&#x27;now&#x27;</span>,<span class="string">&#x27;start of day&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">date</span>(<span class="string">&#x27;now&#x27;</span>,<span class="string">&#x27;weekday 6&#x27;</span>); <span class="comment">--- 其中 Sunday is0, Monday 1,..., Saturday 6</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">date</span>(<span class="string">&#x27;now&#x27;</span>,<span class="string">&#x27;start of year&#x27;</span>,<span class="string">&#x27;10 months&#x27;</span>,<span class="string">&#x27;weekday 4&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> strftime(<span class="string">&#x27;%d-%m-%Y&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;Current day: &#x27;</span><span class="operator">||</span> strftime(<span class="string">&#x27;%d&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;Days to XMas: &#x27;</span><span class="operator">||</span>(strftime(<span class="string">&#x27;%j&#x27;</span>,<span class="string">&#x27;2015-12-24&#x27;</span>)<span class="operator">-</span> strftime(<span class="string">&#x27;%j&#x27;</span>,<span class="string">&#x27;now&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">---- ########### 视图 VIEWS #################</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> CheapCars <span class="keyword">AS</span> <span class="keyword">SELECT</span> Name <span class="keyword">FROM</span> Cars <span class="keyword">WHERE</span> Price <span class="operator">&lt;</span><span class="number">30000</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> CheapCars;</span><br><span class="line">.<span class="keyword">TABLE</span> s</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> CheapCars;</span><br><span class="line">.<span class="keyword">TABLE</span> s</span><br><span class="line"></span><br><span class="line"><span class="comment">--VIEW是一种虚拟表格</span></span><br><span class="line"><span class="comment">--记录数据操作</span></span><br><span class="line"><span class="comment">-- Triggers 记录</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="built_in">Log</span>(Id <span class="type">INTEGER</span> <span class="keyword">PRIMARY</span> KEY, OldName TEXT, NewName TEXT,<span class="type">Date</span> TEXT);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> mytrigger UPDATE <span class="keyword">OF</span> Name <span class="keyword">ON</span> Friends</span><br><span class="line"></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="built_in">Log</span>(OldName, NewName,<span class="type">Date</span>) <span class="keyword">VALUES</span>(old.Name,new.Name, datetime(<span class="string">&#x27;now&#x27;</span>));</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">----查看 trigger</span></span><br><span class="line"><span class="keyword">SELECT</span> name, tbl_name <span class="keyword">FROM</span> sqlite_master <span class="keyword">WHERE</span> type<span class="operator">=</span><span class="string">&#x27;trigger&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Friends;</span><br><span class="line">UPDATE FriendsSET Name<span class="operator">=</span><span class="string">&#x27;Frank&#x27;</span> <span class="keyword">WHERE</span> Id<span class="operator">=</span><span class="number">3</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> FROMLog;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> name, tbl_name <span class="keyword">FROM</span> sqlite_master <span class="keyword">WHERE</span> type<span class="operator">=</span><span class="string">&#x27;trigger&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">----SQLite命令组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">----两种, 分别以commit和ROLLBACK结尾</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">BEGIN</span> TRANSACTION;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Test(Id <span class="type">INTEGER</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Test <span class="keyword">VALUES</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Test <span class="keyword">VALUES</span>(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Test <span class="keyword">VALUES</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Test <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">BEGIN</span> TRANSACTION;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> Test(Id <span class="type">INTEGER</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Test <span class="keyword">VALUES</span>(<span class="number">11</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Test <span class="keyword">VALUES</span>(<span class="number">12</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Test <span class="keyword">VALUES</span>(<span class="number">13</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Test <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- ############### 导入和导出</span></span><br><span class="line">.mode <span class="comment">--查询模式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- 导入CSV文件 .IMPORT</span></span><br><span class="line">.import <span class="comment">--- 文件名\表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">---### 需要设定 字段的分隔符。</span></span><br><span class="line">.mode CSV</span><br><span class="line">.import C:<span class="operator">/</span>work<span class="operator">/</span>mydat.csv <span class="keyword">TABLE</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- 导出 .output</span></span><br><span class="line">.head <span class="keyword">on</span></span><br><span class="line">.mode csv</span><br><span class="line">.output out_Cars.csv</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars;</span><br><span class="line">.output stdout</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 导出为html格式</span></span><br><span class="line">.header <span class="keyword">on</span></span><br><span class="line">.separator &quot;,&quot;</span><br><span class="line">.mode html</span><br><span class="line">.output out_Cars.html</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Cars;</span><br><span class="line">.output stdout</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2015/11/05/2015-11-6-sqlit3/" data-id="ckrsvkzaa006l90w06b8p0uem" data-title="sqlite3 简明指南" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-10-30-mysql" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2015/10/29/2015-10-30-mysql/" class="article-date">
  <time class="dt-published" datetime="2015-10-29T09:13:54.000Z" itemprop="datePublished">2015-10-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2015/10/29/2015-10-30-mysql/">mySQL简明入门</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>详情请参考<br><a target="_blank" rel="noopener" href="http://downloads.mysql.com/docs/mysql-tutorial-excerpt-5.1-en.pdf">http://downloads.mysql.com/docs/mysql-tutorial-excerpt-5.1-en.pdf</a></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br></pre></td><td class="code"><pre><span class="line">mysql <span class="operator">-</span>u root <span class="operator">-</span>p <span class="comment">--- 回车</span></span><br><span class="line"><span class="comment">--- 密码 12345</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- Ctrl + D 退出</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- 查看版本</span></span><br><span class="line"><span class="keyword">SELECT</span> VERSION(), <span class="built_in">CURRENT_DATE</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 查看数据库</span></span><br><span class="line"><span class="keyword">SHOW</span> DATABASES;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 创建数据库</span></span><br><span class="line"> <span class="keyword">CREATE</span> DATABASE menagerie;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 使用数据库</span></span><br><span class="line"> USE menagerie</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 创建表格</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> pet (name <span class="type">VARCHAR</span>(<span class="number">20</span>), owner <span class="type">VARCHAR</span>(<span class="number">20</span>), species <span class="type">VARCHAR</span>(<span class="number">20</span>), sex <span class="type">CHAR</span>(<span class="number">1</span>),birth <span class="type">DATE</span>, death <span class="type">DATE</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 显示数据库中的表格的名称</span></span><br><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 显示表格各列的属性</span></span><br><span class="line"><span class="keyword">DESCRIBE</span> pet;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 从本地读取文件</span></span><br><span class="line">LOAD DATA <span class="keyword">LOCAL</span> INFILE <span class="string">&#x27;/path/pet.txt&#x27;</span> <span class="keyword">INTO</span> <span class="keyword">TABLE</span> pet;</span><br><span class="line">注意, 如果是Windows, 要使用 LINES TERMINATED <span class="keyword">BY</span> <span class="string">&#x27;rn&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 在表格中插入一行</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span> (<span class="string">&#x27;Puffball&#x27;</span>,<span class="string">&#x27;Diane&#x27;</span>,<span class="string">&#x27;hamster&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;1999-03-30&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span> (<span class="string">&#x27;Fluffy&#x27;</span>,<span class="string">&#x27; Harold &#x27;</span>,<span class="string">&#x27;cat &#x27;</span>,<span class="string">&#x27;f &#x27;</span>,<span class="string">&#x27;1993-02-04&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span> (<span class="string">&#x27;Claws &#x27;</span>,<span class="string">&#x27;Gwen &#x27;</span>,<span class="string">&#x27;cat &#x27;</span>,<span class="string">&#x27;m &#x27;</span>,<span class="string">&#x27;1994-03-17&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span> (<span class="string">&#x27;Buffy &#x27;</span>,<span class="string">&#x27;Harold &#x27;</span>,<span class="string">&#x27;dog &#x27;</span>,<span class="string">&#x27;f &#x27;</span>,<span class="string">&#x27;1989-05-13&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span> (<span class="string">&#x27;Fang &#x27;</span>,<span class="string">&#x27;Benny&#x27;</span>,<span class="string">&#x27; dog &#x27;</span>,<span class="string">&#x27;m &#x27;</span>,<span class="string">&#x27;1990-08-27&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span> (<span class="string">&#x27;Bowser &#x27;</span>,<span class="string">&#x27;Diane &#x27;</span>,<span class="string">&#x27;dog &#x27;</span>,<span class="string">&#x27;m &#x27;</span>,<span class="string">&#x27;1979-08-31&#x27;</span>,<span class="string">&#x27;1995-07-29&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span> (<span class="string">&#x27;Chirpy&#x27;</span>,<span class="string">&#x27; Gwen&#x27;</span>,<span class="string">&#x27; bird&#x27;</span>,<span class="string">&#x27; f&#x27;</span>,<span class="string">&#x27; 1998-09-11&#x27;</span>,<span class="keyword">NULL</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span> (<span class="string">&#x27;Whistler&#x27;</span>,<span class="string">&#x27; Gwen&#x27;</span>,<span class="string">&#x27; bird&#x27;</span>,<span class="string">&#x27; NULL&#x27;</span>, <span class="string">&#x27;1997-12-09&#x27;</span>,<span class="keyword">NULL</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pet <span class="keyword">VALUES</span> (<span class="string">&#x27;Slim&#x27;</span>,<span class="string">&#x27; Benny&#x27;</span>,<span class="string">&#x27; snake&#x27;</span>,<span class="string">&#x27; m &#x27;</span>,<span class="string">&#x27;1996-04-29&#x27;</span>,<span class="keyword">NULL</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 从数据表中获取数据 </span></span><br><span class="line"><span class="comment">---SELECT 的基本语句格式: </span></span><br><span class="line"><span class="comment">---SELECT what_to_select</span></span><br><span class="line"><span class="comment">---FROM which_table</span></span><br><span class="line"><span class="comment">---WHERE conditions_to_satisfy;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- 查询全部数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 修改部分数据 </span></span><br><span class="line">UPDATE pet <span class="keyword">SET</span> birth <span class="operator">=</span> <span class="string">&#x27;1989-08-31&#x27;</span> <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;Bowser&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 查询部分数据 </span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;Bowser&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 比较运算 </span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> birth <span class="operator">&gt;=</span> <span class="string">&#x27;1998-1-1&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 逻辑运算 AND</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> species <span class="operator">=</span> <span class="string">&#x27;dog&#x27;</span> <span class="keyword">AND</span> sex <span class="operator">=</span> <span class="string">&#x27;f&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 逻辑运算 OR</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> species <span class="operator">=</span> <span class="string">&#x27;snake&#x27;</span> <span class="keyword">OR</span> species <span class="operator">=</span> <span class="string">&#x27;bird&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 运算的优先级</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> (species <span class="operator">=</span> <span class="string">&#x27;cat&#x27;</span> <span class="keyword">AND</span> sex <span class="operator">=</span> <span class="string">&#x27;m&#x27;</span>) <span class="keyword">OR</span> (species <span class="operator">=</span> <span class="string">&#x27;dog&#x27;</span> <span class="keyword">AND</span> sex <span class="operator">=</span> <span class="string">&#x27;f&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 选择特定的列</span></span><br><span class="line"><span class="keyword">SELECT</span> name, birth <span class="keyword">FROM</span> pet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> owner <span class="keyword">FROM</span> pet;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 去重复 </span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> owner <span class="keyword">FROM</span> pet;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- SELECT 的基本组合</span></span><br><span class="line"><span class="keyword">SELECT</span> name, species, birth <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> species <span class="operator">=</span> <span class="string">&#x27;dog&#x27;</span> <span class="keyword">OR</span> species <span class="operator">=</span> <span class="string">&#x27;cat&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 排序, 默认是 由小到大排序</span></span><br><span class="line"><span class="keyword">SELECT</span> name, birth <span class="keyword">FROM</span> pet <span class="keyword">ORDER</span> <span class="keyword">BY</span> birth;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 由大到小排序</span></span><br><span class="line"><span class="keyword">SELECT</span> name, birth <span class="keyword">FROM</span> pet <span class="keyword">ORDER</span> <span class="keyword">BY</span> birth <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 多个列排序</span></span><br><span class="line"><span class="keyword">SELECT</span> name, species, birth <span class="keyword">FROM</span> pet <span class="keyword">ORDER</span> <span class="keyword">BY</span> species, birth <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 当前日期 </span></span><br><span class="line">CURDATE()</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 两个日期相隔时间</span></span><br><span class="line">TIMESTAMPDIFF()</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 形成新的一列 </span></span><br><span class="line"><span class="keyword">AS</span> age (见后面的例子)</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 日期计算</span></span><br><span class="line"><span class="keyword">SELECT</span> name, birth, CURDATE(), TIMESTAMPDIFF(<span class="keyword">YEAR</span>,birth,CURDATE()) <span class="keyword">AS</span> age <span class="keyword">FROM</span> pet;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 加入新一列的表格再排序, 按照name</span></span><br><span class="line"><span class="keyword">SELECT</span> name, birth, CURDATE(), TIMESTAMPDIFF(<span class="keyword">YEAR</span>,birth,CURDATE()) <span class="keyword">AS</span> age <span class="keyword">FROM</span> pet <span class="keyword">ORDER</span> BYname;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 加入新一列的表格再排序, 按照 age</span></span><br><span class="line"><span class="keyword">SELECT</span> name, birth, CURDATE(), TIMESTAMPDIFF(<span class="keyword">YEAR</span>,birth,CURDATE()) <span class="keyword">AS</span> age <span class="keyword">FROM</span> pet <span class="keyword">ORDER</span> BYage;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 判断 is not null</span></span><br><span class="line"><span class="keyword">SELECT</span> name, birth, death, TIMESTAMPDIFF(<span class="keyword">YEAR</span>,birth,death) <span class="keyword">AS</span> age <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> death <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> age;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 时间计算</span></span><br><span class="line"><span class="keyword">YEAR</span>(), <span class="keyword">MONTH</span>(), DAYOFMONTH()</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 哪个月份出生 </span></span><br><span class="line"><span class="keyword">SELECT</span> name, birth, <span class="keyword">MONTH</span>(birth) <span class="keyword">FROM</span> pet;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 按照运算出的结果查找</span></span><br><span class="line"><span class="keyword">SELECT</span> name, birth <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> <span class="keyword">MONTH</span>(birth) <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 十二月份等的处理</span></span><br><span class="line"><span class="keyword">SELECT</span> name, birth <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> <span class="keyword">MONTH</span>(birth) <span class="operator">=</span> <span class="built_in">MOD</span>(<span class="keyword">MONTH</span>(CURDATE()), <span class="number">12</span>) <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 对NULL的判断</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">IS</span> <span class="keyword">NULL</span>, <span class="number">1</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">---匹配与正则表达式, 寻找name中以b开头的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;b%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">---寻找name中以fy结尾的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;%fy&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">---寻找名字中含有w的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;%w%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">---寻找名字只包含五个字母的, 用五个_</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;_____&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">---正则表达式的关键字</span></span><br><span class="line">REGEXP <span class="keyword">and</span> <span class="keyword">NOT</span> REGEXP operators (<span class="keyword">or</span> RLIKE <span class="keyword">and</span> <span class="keyword">NOT</span> RLIKE)</span><br><span class="line"></span><br><span class="line"><span class="comment">---正则表达式</span></span><br><span class="line"><span class="comment">---. 任意单个字符</span></span><br><span class="line"><span class="comment">---[a-z] a到z的任意字符</span></span><br><span class="line"><span class="comment">---[0-9] 0到9的任意字符</span></span><br><span class="line"><span class="comment">---“*” 之前, 放任何字符, 表示的是任意重复次数的该字符</span></span><br><span class="line"><span class="comment">---.* 表示任意重复次数的任意字符</span></span><br><span class="line"><span class="comment">---^ 开始</span></span><br><span class="line"><span class="comment">---$ 结束</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- 正则表达式举例</span></span><br><span class="line"><span class="comment">--- 以b开始的人名(不区分大小写)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> name REGEXP <span class="string">&#x27;^b&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 匹配大小写 BINARY, 名字以小写的b开头的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> name REGEXP <span class="type">BINARY</span> <span class="string">&#x27;^b&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 名字以fy结尾的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> name REGEXP <span class="string">&#x27;fy$&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 名字中含有w的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> name REGEXP <span class="string">&#x27;w&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 名字仅由五个字母组成</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> name REGEXP <span class="string">&#x27;^.....$&#x27;</span>;</span><br><span class="line"><span class="comment">--或者 </span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> name REGEXP <span class="string">&#x27;^.&#123;5&#125;$&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 统计表格的行数 </span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> pet;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- GROUP BY, 针对每一个水平进行计算</span></span><br><span class="line"><span class="keyword">SELECT</span> owner, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> pet <span class="keyword">GROUP</span> <span class="keyword">BY</span> owner;</span><br><span class="line"><span class="keyword">SELECT</span> species, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> pet <span class="keyword">GROUP</span> <span class="keyword">BY</span> species;</span><br><span class="line"><span class="keyword">SELECT</span> sex, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> pet <span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 分组可以同时考虑几个因素</span></span><br><span class="line"><span class="keyword">SELECT</span> species, sex, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> pet <span class="keyword">GROUP</span> <span class="keyword">BY</span> species, sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 进一步筛选, 只要 dog 或者 cat的部分记录</span></span><br><span class="line"><span class="keyword">SELECT</span> species, sex, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> species <span class="operator">=</span> <span class="string">&#x27;dog&#x27;</span> <span class="keyword">OR</span> species <span class="operator">=</span> <span class="string">&#x27;cat&#x27;</span> <span class="keyword">GROUP</span> BYspecies, sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">--- 只保留已知性别的, 按照 species 和 sex 统计</span></span><br><span class="line"><span class="keyword">SELECT</span> species, sex, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> pet <span class="keyword">WHERE</span> sex <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> species, sex;</span><br><span class="line"></span><br><span class="line">注意: <span class="keyword">select</span>后面的列, 如果使用了<span class="built_in">count</span>()函数, 则后面的<span class="keyword">group</span> <span class="keyword">by</span>后面, 必须跟上相同的列. 否则mysql会报错. </span><br><span class="line"></span><br><span class="line"><span class="comment">------使用多个表格</span></span><br><span class="line"><span class="comment">---创建一个新的表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> event (name <span class="type">VARCHAR</span>(<span class="number">20</span>), <span class="type">date</span> <span class="type">DATE</span>, type <span class="type">VARCHAR</span>(<span class="number">15</span>), remark <span class="type">VARCHAR</span>(<span class="number">255</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">---载入数据</span></span><br><span class="line">LOAD DATA INFILE <span class="string">&#x27;/home/jinlong/programming/mysql/event.txt&#x27;</span> <span class="keyword">INTO</span> <span class="keyword">TABLE</span> event;</span><br><span class="line"></span><br><span class="line"><span class="comment">---同时查询两个表格, 注意应该先将两个表格 </span></span><br><span class="line"><span class="comment">---用 INNER JOIN 合并.</span></span><br><span class="line"><span class="comment">---ON 表格合并的凭借 对于pet表格来说, 是name, 所以是 pet.name</span></span><br><span class="line"><span class="comment">----对于event表格来说, 也是name, 所以是event.name</span></span><br><span class="line"><span class="comment">---而筛选的条件,是 event表格中的type为 &#x27;litter&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> pet.name, </span><br><span class="line"> (<span class="keyword">YEAR</span>(<span class="type">date</span>)<span class="operator">-</span><span class="keyword">YEAR</span>(birth)) <span class="operator">-</span> (<span class="keyword">RIGHT</span>(<span class="type">date</span>,<span class="number">5</span>)<span class="operator">&lt;</span><span class="keyword">RIGHT</span>(birth,<span class="number">5</span>)) <span class="keyword">AS</span> age,remark</span><br><span class="line"> <span class="keyword">FROM</span> pet <span class="keyword">INNER</span> <span class="keyword">JOIN</span> event</span><br><span class="line"><span class="keyword">ON</span> pet.name <span class="operator">=</span> event.name </span><br><span class="line"> <span class="keyword">WHERE</span> event.type <span class="operator">=</span> <span class="string">&#x27;litter&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">---为了计算的方便, 有时候可以将同一个表格进行 INNER JOIN</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> p1.name, p1.sex, p2.name, p2.sex, p1.species</span><br><span class="line"> <span class="keyword">FROM</span> pet <span class="keyword">AS</span> p1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> pet <span class="keyword">AS</span> p2</span><br><span class="line"><span class="keyword">ON</span> p1.species <span class="operator">=</span> p2.species <span class="keyword">AND</span> p1.sex <span class="operator">=</span> <span class="string">&#x27;f&#x27;</span> <span class="keyword">AND</span> p2.sex <span class="operator">=</span> <span class="string">&#x27;m&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">---查询数据库的名称</span></span><br><span class="line"><span class="keyword">SELECT</span> DATABASE();</span><br><span class="line"></span><br><span class="line"><span class="comment">---显示表名</span></span><br><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br><span class="line"></span><br><span class="line"><span class="comment">---获取表格的结构</span></span><br><span class="line"><span class="keyword">DESCRIBE</span> pet;</span><br><span class="line"></span><br><span class="line"><span class="comment">---# MYSQL的批处理 从terminal运行</span></span><br><span class="line"><span class="comment">---UNIX平台</span></span><br><span class="line">mysql <span class="operator">&lt;</span> batch<span class="operator">-</span>file </span><br><span class="line"><span class="comment">---WINDOWS 平台</span></span><br><span class="line">mysql <span class="operator">-</span>e &quot;source batch-file&quot;</span><br><span class="line"></span><br><span class="line"><span class="comment">---# </span></span><br><span class="line"><span class="comment">---从terminal运行 mySQL的批处理文件</span></span><br><span class="line">mysql <span class="operator">-</span>h host <span class="operator">-</span>u <span class="keyword">user</span> <span class="operator">-</span>p <span class="operator">&lt;</span> batch<span class="operator">-</span>file</span><br><span class="line"></span><br><span class="line"><span class="comment">---从terminal运行 结果的分屏显示</span></span><br><span class="line">mysql <span class="operator">&lt;</span> batch<span class="operator">-</span>file <span class="operator">|</span> more</span><br><span class="line"></span><br><span class="line"><span class="comment">---从terminal运行 输出结果导出到文件</span></span><br><span class="line">mysql <span class="operator">&lt;</span> batch<span class="operator">-</span>file <span class="operator">&gt;</span> mysql.out</span><br><span class="line"></span><br><span class="line"><span class="comment">---从terminal运行 在批处理模式下显示输出</span></span><br><span class="line">mysql <span class="operator">-</span>t</span><br><span class="line"></span><br><span class="line"><span class="comment">---从terminal运行 在批处理模式下, 保存输入的命令</span></span><br><span class="line">mysql <span class="operator">-</span>vvv</span><br><span class="line"></span><br><span class="line"><span class="comment">---在mySQL中运行脚本文件</span></span><br><span class="line">source filename;</span><br><span class="line">或 . filename;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">------------------------------------------------------------------##</span></span><br><span class="line"><span class="comment">--- 创建一个商品价目表, 并基于该表做各种查询</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> databases;</span><br><span class="line"><span class="keyword">create</span> database test;</span><br><span class="line">use test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> shop (</span><br><span class="line">article <span class="type">INT</span>(<span class="number">4</span>) UNSIGNED ZEROFILL <span class="keyword">DEFAULT</span> <span class="string">&#x27;0000&#x27;</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">dealer <span class="type">CHAR</span>(<span class="number">20</span>)</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">price</span><br><span class="line"><span class="keyword">DOUBLE</span>(<span class="number">16</span>,<span class="number">2</span>)</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="string">&#x27;0.00&#x27;</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY(article, dealer));</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> shop <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;A&#x27;</span>,<span class="number">3.45</span>),(<span class="number">1</span>,<span class="string">&#x27;B&#x27;</span>,<span class="number">3.99</span>),(<span class="number">2</span>,<span class="string">&#x27;A&#x27;</span>,<span class="number">10.99</span>),(<span class="number">3</span>,<span class="string">&#x27;B&#x27;</span>,<span class="number">1.45</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;C&#x27;</span>,<span class="number">1.69</span>),(<span class="number">3</span>,<span class="string">&#x27;D&#x27;</span>,<span class="number">1.25</span>),(<span class="number">4</span>,<span class="string">&#x27;D&#x27;</span>,<span class="number">19.95</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> shop;</span><br><span class="line"></span><br><span class="line"><span class="comment">---查找最贵商品</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(article) <span class="keyword">AS</span> article <span class="keyword">FROM</span> shop;</span><br><span class="line"></span><br><span class="line"><span class="comment">---查找最高价对应的货品, 供应商</span></span><br><span class="line"><span class="keyword">SELECT</span> article, dealer, price</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">shop</span><br><span class="line"><span class="keyword">WHERE</span> price<span class="operator">=</span>(<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(price) <span class="keyword">FROM</span> shop);</span><br><span class="line"></span><br><span class="line"><span class="comment">---每一组的最贵商品</span></span><br><span class="line"><span class="keyword">SELECT</span> article, <span class="built_in">MAX</span>(price) <span class="keyword">AS</span> price</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">shop</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> article;</span><br><span class="line"></span><br><span class="line"><span class="comment">---每组最贵商品所在的行</span></span><br><span class="line"><span class="keyword">SELECT</span> article, dealer, price</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">shop s1</span><br><span class="line"><span class="keyword">WHERE</span> price<span class="operator">=</span>(<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(s2.price)</span><br><span class="line"><span class="keyword">FROM</span> shop s2</span><br><span class="line"><span class="keyword">WHERE</span> s1.article <span class="operator">=</span> s2.article);</span><br><span class="line"></span><br><span class="line"><span class="comment">---临时变量</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@min</span>_price:<span class="operator">=</span><span class="built_in">MIN</span>(price),<span class="variable">@max</span>_price:<span class="operator">=</span><span class="built_in">MAX</span>(price) <span class="keyword">FROM</span> shop;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> shop <span class="keyword">WHERE</span> price<span class="operator">=</span><span class="variable">@min</span>_price <span class="keyword">OR</span> price<span class="operator">=</span><span class="variable">@max</span>_price;</span><br><span class="line"></span><br><span class="line"><span class="comment">------------------------------------##</span></span><br><span class="line"><span class="comment">---# KEYS</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> person (</span><br><span class="line">id <span class="type">SMALLINT</span> UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">name <span class="type">CHAR</span>(<span class="number">60</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> shirt (</span><br><span class="line">id <span class="type">SMALLINT</span> UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">style ENUM(<span class="string">&#x27;t-shirt&#x27;</span>, <span class="string">&#x27;polo&#x27;</span>, <span class="string">&#x27;dress&#x27;</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">color ENUM(<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;white&#x27;</span>, <span class="string">&#x27;black&#x27;</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">owner <span class="type">SMALLINT</span> UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">REFERENCES</span> person(id),</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> person <span class="keyword">VALUES</span> (<span class="keyword">NULL</span>, <span class="string">&#x27;Antonio Paz&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@last</span> :<span class="operator">=</span> LAST_INSERT_ID();</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> shirt <span class="keyword">VALUES</span></span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">&#x27;polo&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="variable">@last</span>),</span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">&#x27;dress&#x27;</span>, <span class="string">&#x27;white&#x27;</span>, <span class="variable">@last</span>),</span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">&#x27;t-shirt&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="variable">@last</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> person <span class="keyword">VALUES</span> (<span class="keyword">NULL</span>, <span class="string">&#x27;Lilliana Angelovska&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@last</span> :<span class="operator">=</span> LAST_INSERT_ID();</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> shirt <span class="keyword">VALUES</span></span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">&#x27;dress&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="variable">@last</span>),</span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">&#x27;polo&#x27;</span>, <span class="string">&#x27;red&#x27;</span>, <span class="variable">@last</span>),</span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">&#x27;dress&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="variable">@last</span>),</span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">&#x27;t-shirt&#x27;</span>, <span class="string">&#x27;white&#x27;</span>, <span class="variable">@last</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> person;</span><br><span class="line"></span><br><span class="line">##<span class="comment">---查询keys</span></span><br><span class="line"><span class="keyword">SELECT</span> field1_index, field2_index <span class="keyword">FROM</span> test_table</span><br><span class="line"><span class="keyword">WHERE</span> field1_index <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span> <span class="keyword">OR</span> field2_index <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--- 查询每个月的访问量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t1 (<span class="keyword">year</span> <span class="keyword">YEAR</span>(<span class="number">4</span>), <span class="keyword">month</span> <span class="type">INT</span>(<span class="number">2</span>) UNSIGNED ZEROFILL,</span><br><span class="line"><span class="keyword">day</span> <span class="type">INT</span>(<span class="number">2</span>) UNSIGNED ZEROFILL);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t1 <span class="keyword">VALUES</span>(<span class="number">2000</span>,<span class="number">1</span>,<span class="number">1</span>),(<span class="number">2000</span>,<span class="number">1</span>,<span class="number">20</span>),(<span class="number">2000</span>,<span class="number">1</span>,<span class="number">30</span>),(<span class="number">2000</span>,<span class="number">2</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="number">2000</span>,<span class="number">2</span>,<span class="number">23</span>),(<span class="number">2000</span>,<span class="number">2</span>,<span class="number">23</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">year</span>,<span class="keyword">month</span>,BIT_COUNT(BIT_OR(<span class="number">1</span><span class="operator">&lt;&lt;</span><span class="keyword">day</span>)) <span class="keyword">AS</span> days <span class="keyword">FROM</span> t1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">year</span>,<span class="keyword">month</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">---为行增加 unique identity for new rows</span></span><br><span class="line">AUTO_INCREMENT</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> animals (</span><br><span class="line">id MEDIUMINT <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">name <span class="type">CHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (id)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> animals (name) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;dog&#x27;</span>),(<span class="string">&#x27;cat&#x27;</span>),(<span class="string">&#x27;penguin&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;lax&#x27;</span>),(<span class="string">&#x27;whale&#x27;</span>),(<span class="string">&#x27;ostrich&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> animals;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2015/10/29/2015-10-30-mysql/" data-id="ckrsvkza8006h90w0c65qeoi2" data-title="mySQL简明入门" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-10-23-south" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2015/10/23/2015-10-23-south/" class="article-date">
  <time class="dt-published" datetime="2015-10-23T00:33:54.000Z" itemprop="datePublished">2015-10-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2015/10/23/2015-10-23-south/">诗一首 北方人在南方</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>当家乡随着云彩远去，</p>
<p>老屋也消失在天边,</p>
<p>游子的心，</p>
<p>便开始漂泊。</p>
<p>&nbsp;</p>
<p>当父母的叮咛随着汽笛的轰鸣远去，</p>
<p>小小的渔船消失在水天一线，</p>
<p>游子的心，</p>
<p>就注定开始漂泊。</p>
<p>&nbsp;</p>
<p>从北方，</p>
<p>吹来甘冽的风，</p>
<p>雾霾却遮住了你的双眼。</p>
<p>家乡，</p>
<p>已经干瘪成几个汉字。</p>
<p>父母的微笑，</p>
<p>都只映在屏幕上。</p>
<p>&nbsp;</p>
<p>在南方，</p>
<p>你在冬日的暖阳下，</p>
<p>徜徉在海滨的清风中。</p>
<p>家乡，</p>
<p>却化作一块云彩环绕着你的心，</p>
<p>时雨时晴，</p>
<p>幻化出儿时的风景。</p>
<p>&nbsp;</p>
<p>2015年10月23日</p>
<p>香港大埔</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2015/10/23/2015-10-23-south/" data-id="ckrsvkza7006f90w0gdys7r0z" data-title="诗一首 北方人在南方" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%97%E6%AD%8C/" rel="tag">诗歌</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-9-24-parsetaxa" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2015/09/24/2015-9-24-parsetaxa/" class="article-date">
  <time class="dt-published" datetime="2015-09-23T20:44:00.000Z" itemprop="datePublished">2015-09-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2015/09/24/2015-9-24-parsetaxa/">一个简单的Taxon Parser：将输入的字符串按照属种作者分开</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>处理生物学名时经常需要将学名按照意义分成几个部分， 如</p>
<ol>
<li>GENUS                         属名</li>
<li>SPECIES                       种加词</li>
<li>AUTHOR_OF_SPECIES             作者</li>
<li>INFRASPECIFIC_RANK            种下等级</li>
<li>INFRASPECIFIC_EPITHET         种下等级加词</li>
<li>AUTHOR_OF_INFRASPECIFIC_RANK  种下等级作者<br>例如， 太白深灰槭的学名是：<br><code>Acer caesium Wall. ex Brandis subsp. giraldii (Pax) E. Murr.</code></li>
</ol>
<p>按照各部分的含义分开，应该是：</p>
<ul>
<li>属名 GENUS:  “Acer”                    </li>
<li>种加词 SPECIES:  “caesium”</li>
<li>种作者 AUTHOR_OF_SPECIES:  “Wall. ex Brandis”          </li>
<li>属下等级 INFRASPECIFIC_RANK:  “subsp.”</li>
<li>属下等级加词 INFRASPECIFIC_EPITHET: “giraldii”  </li>
<li>属下等级作者 AUTHOR_OF_INFRASPECIFIC_RANK:  “(Pax) E. Murr.”</li>
</ul>
<p>物种的学名的拼写有以下几种情况</p>
<ol>
<li>只给出属名</li>
<li>只给出属名和sp.</li>
<li>给出属名和种名， 但是未提供作者</li>
<li>给出属名， 种加词和作者</li>
<li>给出属名， 种加词， 作者， 种下等级（var.或subsp.,或f.）， 种下等级加词， 种下等级作者</li>
<li>给出属名， 种加词， 种下等级（var.或subsp.,或f.）， 种下等级加词， 种下等级作者</li>
<li>给出属名， 种加词， 种下等级（var.或subsp.,或f.）， 种下等级加词</li>
<li>相应的程序必须考虑到以上各种情况， 并将其正确分开。</li>
</ol>
<p>herblabel (<a target="_blank" rel="noopener" href="https://github.com/helixcn/herblabel">https://github.com/helixcn/herblabel</a>  ) R 程序包提供了一个简单的生物学名处理的函数</p>
<p>parse_taxa()， 经过测试，在以上提到的各种情况， 均工作正常。 由于 种下等级 f. 也常用于人名， 故本程序未加入处理f.的部分。 </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">library(herblabel)</span><br><span class="line"><span class="comment">###  Species</span></span><br><span class="line">parse_taxa(<span class="string">&quot;Acer&quot;</span>)</span><br><span class="line">parse_taxa(<span class="string">&quot;Acer caudatifoliumHayata&quot;</span>)</span><br><span class="line">parse_taxa(<span class="string">&quot;Acer caudatifolium&quot;</span>)</span><br><span class="line">parse_taxa(<span class="string">&quot;Acer sp.&quot;</span>)</span><br><span class="line"><span class="comment">### variaty</span></span><br><span class="line">parse_taxa(<span class="string">&quot;Acer caudatum Wall. var.multiserratum (Maxim.) Rehd.&quot;</span>)</span><br><span class="line">parse_taxa(<span class="string">&quot;Acer caudatum var.multiserratum (Maxim.) Rehd.&quot;</span>)</span><br><span class="line">parse_taxa(<span class="string">&quot;Acer caudatum Wall. var.multiserratum&quot;</span>)</span><br><span class="line">parse_taxa(<span class="string">&quot;Acer caudatum var. multiserratum&quot;</span>)</span><br><span class="line"><span class="comment">### subspecies</span></span><br><span class="line">parse_taxa(<span class="string">&quot;Acer caesium Wall. exBrandis subsp. giraldii (Pax) E. Murr.&quot;</span>)</span><br><span class="line">parse_taxa(<span class="string">&quot;Acer caesium subsp.giraldii (Pax) E. Murr.&quot;</span>)</span><br><span class="line">parse_taxa(<span class="string">&quot;Acer caesium Wall. exBrandis subsp. giraldii&quot;</span>)</span><br><span class="line">parse_taxa(<span class="string">&quot;Acer caesium subsp.giraldii&quot;</span>)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2015/09/24/2015-9-24-parsetaxa/" data-id="ckrsvkzah007590w0hyd4hegk" data-title="一个简单的Taxon Parser：将输入的字符串按照属种作者分开" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A4%8D%E7%89%A9%E5%AD%A6%E5%90%8D/" rel="tag">植物学名</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-07-23-starchartproj" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2015/07/23/2015-07-23-starchartproj/" class="article-date">
  <time class="dt-published" datetime="2015-07-22T18:58:54.000Z" itemprop="datePublished">2015-07-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2015/07/23/2015-07-23-starchartproj/">星图中的球极平面投影</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>将球面投影到平面上，有多种投影方式。R中的mapproj程序包包含了大部分的投影，适用于地图的投影变换。 而星图中最常用的投影方式为球极平面投影（Stereographic projection）， 这种投影方式有时也用于地图中。</p>
<p>这里介绍在R中如何实现球极平面投影。</p>
<p>定义函数<code>stereo_proj</code></p>
<ul>
<li>lambda： 其中lambda为赤经</li>
<li>phi： 为赤纬</li>
<li>lambda0 =0： lambda0为地图（星图）的投影中心点 赤经</li>
<li>phi0 =0： phio为地图（星图）投影中心点的 赤纬</li>
<li>R =1： 为比例半径， 一般取值为1</li>
</ul>
<p>函数定义如下：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">stereo_proj &lt;-<span class="keyword">function</span>(lambda,phi, lambda0 =<span class="number">0</span>, phi0 =<span class="number">0</span>, R =<span class="number">1</span>)&#123;</span><br><span class="line">   lambda &lt;- lambda/(<span class="number">180</span>/<span class="built_in">pi</span>)</span><br><span class="line">   phi    &lt;- phi/(<span class="number">180</span>/<span class="built_in">pi</span>)</span><br><span class="line">   lambda0 &lt;- lambda0/(<span class="number">180</span>/<span class="built_in">pi</span>)</span><br><span class="line">   phi0   &lt;- phi0/(<span class="number">180</span>/<span class="built_in">pi</span>)</span><br><span class="line">   k =<span class="number">2</span>*R/(<span class="number">1</span>+<span class="built_in">sin</span>(phi0)*<span class="built_in">sin</span>(phi)+<span class="built_in">cos</span>(phi0)*<span class="built_in">cos</span>(phi)*<span class="built_in">cos</span>(lambda - lambda0))</span><br><span class="line">   x = k*<span class="built_in">cos</span>(phi)*<span class="built_in">sin</span>(lambda - lambda0)</span><br><span class="line">   y = k*(<span class="built_in">cos</span>(phi0)*<span class="built_in">sin</span>(phi)-<span class="built_in">sin</span>(phi0)*<span class="built_in">cos</span>(phi)*<span class="built_in">cos</span>(lambda - lambda0))   </span><br><span class="line">   <span class="built_in">return</span>(<span class="built_in">list</span>(x = x, y = y))</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">### 公式参见 ### Source</span></span><br><span class="line"><span class="comment">###  </span></span><br><span class="line"><span class="comment">### 下面用地图投影变换举例</span></span><br><span class="line"></span><br><span class="line"> library(maps)</span><br><span class="line"> <span class="comment">###</span></span><br><span class="line"> aaa &lt;- map()  </span><br><span class="line"> <span class="comment">### 获取大比例尺世界地图中的座标</span></span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">plot(stereo_proj(lambda = aaa$x, phi = aaa$y), </span><br><span class="line">      type =<span class="string">&quot;l&quot;</span>, xlim =<span class="built_in">c</span>(-<span class="number">6</span>,<span class="number">6</span>), ylim =<span class="built_in">c</span>(-<span class="number">6</span>,<span class="number">6</span>)) </span><br><span class="line"></span><br><span class="line"><span class="comment">### 添加经度线</span></span><br><span class="line"><span class="comment">####Adding longitudinal Lines</span></span><br><span class="line">long =<span class="built_in">c</span>(-<span class="number">180</span>, -<span class="number">150</span>, -<span class="number">120</span>, -<span class="number">90</span>, -<span class="number">60</span>, -<span class="number">30</span>, <span class="number">0</span>, <span class="number">30</span>, <span class="number">60</span>, <span class="number">90</span>, <span class="number">120</span>, <span class="number">150</span>)</span><br><span class="line">lat  =-<span class="number">90</span>:<span class="number">90</span></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> long)&#123;</span><br><span class="line">   temp &lt;- stereo_proj(lambda = i, phi = lat)</span><br><span class="line">   points(temp$x, temp$y, type =<span class="string">&quot;l&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">### 添加纬度线</span></span><br><span class="line"><span class="comment">### Adding latitudinal lines### </span></span><br><span class="line">plot(<span class="number">0</span>, xlim =<span class="built_in">c</span>(-<span class="number">2</span>, <span class="number">2</span>), ylim = <span class="built_in">c</span>(-<span class="number">2</span>, <span class="number">2</span>), pch = <span class="string">&quot;&quot;</span>)</span><br><span class="line">lat =<span class="built_in">c</span>(-<span class="number">90</span>, -<span class="number">60</span>, -<span class="number">30</span>, <span class="number">0</span>, <span class="number">30</span>, <span class="number">60</span>, <span class="number">90</span>)</span><br><span class="line">long  =-<span class="number">150</span>:<span class="number">150</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> lat)&#123;</span><br><span class="line">   temp &lt;- stereo_proj(lambda = long,phi = i)</span><br><span class="line">   points(temp$x, temp$y, type =<span class="string">&quot;l&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2015/07/23/2015-07-23-starchartproj/" data-id="ckrsvkza4006790w0asoe9s50" data-title="星图中的球极平面投影" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A4%A9%E6%96%87/" rel="tag">天文</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-7-11-runpythoninr" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2015/07/10/2015-7-11-runpythoninr/" class="article-date">
  <time class="dt-published" datetime="2015-07-10T08:11:54.000Z" itemprop="datePublished">2015-07-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2015/07/10/2015-7-11-runpythoninr/">R中调用Python代码: 以运行PyEphem天文计算程序包为例</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>操作系统Linux Mint<br>安装 python 2.7.6 dev 版本<br>pyephem 所需要的 Numpy,Scipy 已经安装<br>rPython程序包所依赖的RJSONIO程序包也已经通过install.packages(“RJSONIO”) 安装到R中。</p>
<p>举例：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">library(rPython)</span><br><span class="line">python.exec(<span class="string">&quot;from ephem import *&quot;</span>)</span><br><span class="line">python.exec(<span class="string">&quot;j = ephem.Jupiter()&quot;</span>)</span><br><span class="line">python.exec(<span class="string">&quot;j.compute(&#x27;1986/2/8&#x27;)&quot;</span>)</span><br><span class="line">python.exec(<span class="string">&quot;print(&#x27;%s %s&#x27; % (j.ra, j.dec))&quot;</span>)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2015/07/10/2015-7-11-runpythoninr/" data-id="ckrsvkzag007390w0hh12d05z" data-title="R中调用Python代码: 以运行PyEphem天文计算程序包为例" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B/" rel="tag">编程</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-5-26-ad" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2015/05/26/2015-5-26-ad/" class="article-date">
  <time class="dt-published" datetime="2015-05-26T02:22:54.000Z" itemprop="datePublished">2015-05-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2015/05/26/2015-5-26-ad/">嘉道理农场暨植物园诚聘“植物鉴定和记录主任（已招到）</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>以下是简体中文说明（招聘信息以英文版为准）。</p>
<p>工作职责和要求如下：</p>
<p>（1）在香港和华南地区进行与植物保育与研究相关的野外工作。</p>
<p>（2）在野外以及标本馆进行植物的辨认或鉴定， 并保证采集的植物都有完整的采集记录。</p>
<p>（3）建立和管理嘉道理农场的植物采集记录数据库。</p>
<p>（4）组织森林监测样地的调查，并使数据格式符合CTFS的标准。</p>
<p>（5）做植物保育相关工作的报告。</p>
<p>（6）进行一般的行政管理， 如管理数据， 以及其他工人等。</p>
<p>要求：</p>
<ul>
<li><p>认同嘉道理农场暨植物园的目标， 远景以及价值观。</p>
</li>
<li><p>具有研究生以上的学位（具有博士学位优先）， 该学位需要与植物多样性和保护相关。</p>
</li>
<li><p>热衷于植物生物多样性的保护。</p>
</li>
<li><p>能够在野外鑑定出香港和华南地区的常见植物。</p>
</li>
<li><p>具有管理植物数据库和植物图片的经验。</p>
</li>
<li><p>具备森林样地或植被数据分析的背景， 至少在以下方面之一有工作经验 （1） 植物系统分类学 （2）群落生态学 （3） 物种分布模型 （4） 宏观生态学。</p>
</li>
<li><p>具有良好的沟通能力， 品行端正。</p>
</li>
<li><p>具有良好的英文和中文的听说读写能力。</p>
</li>
<li><p>有 R, Python, SQL 和 GIS背景的申请人优先考虑。</p>
</li>
<li><p>身体情况适合野外工作， 并且有出野外的经验。</p>
</li>
<li><p>具有开阔胸襟， 尊重大自然。</p>
</li>
</ul>
<p>条件符合者将会被通知面试， 面试通过后，将以“输入内地人才计划”的方式来港工作。</p>
<p>请注意： 工作语言以及面试， 均为英文.</p>
<p>申请者请准备</p>
<p>（1） 英文版个人简历， 附上两位推荐人， 并说明申请的职位， 以及期望的薪水。</p>
<p>（2） 一封申请信 （给出相应的工作经验以及为什麽对该职位感兴趣）。</p>
<p>邮寄到 Human Resources Manager, Kadoorie Farm &amp; Botanic Garden Corporation, Lam Kam Road, Tai Po, New Territories, Hong Kong</p>
<p>或电邮 到 <a href="mailto:kfjobs@kfbg.org">kfjobs@kfbg.org</a></p>
<p>以下为 英文版招聘广告, 原文链接 <a target="_blank" rel="noopener" href="http://www.kfbg.org/eng/PIRO-flo.aspx">http://www.kfbg.org/eng/PIRO-flo.aspx</a></p>
<p><strong>Plant Identification and Records Officer, FloraConservation Department, Kadoorie Farm and Botanic Garden Corporation, HongKong SAR.</strong></p>
<p>KFBG isseeking a highly motivated ecologist/botanist working on plantbiodiversity conservation and research in the Flora Conservation Department. Thecandidate should be enthusiastic with good communication skills, capable of working in ateam and managing projects under supervision. Daily duties will include(1) to help to curate the KFBG herbarium including the management of theinternal specimen collection database and to conduct plant exploration fieldtrips in Hong Kong and South China, (2) to organise and to participate in thesurvey of forest dynamic plots and ecological forest restoration plantings, and(3) to analyse existing and accumulating forest restoration and forestmonitoring datasets.</p>
<p><strong>Responsibilities</strong></p>
<p> To conduct field trips in countryside of HongKong and in South China for plant conservation and research projects.</p>
<p> To identify plant specimens both in the fieldand in herbarium to ensure the plant collections are well labelled.</p>
<p> To establish and manage an inventory databaseof botanical data for KFBG, and to handle the specimen collection records aspart of the mission, activities, and projects of KFBG.</p>
<p> To organize the (re)-census of forest dynamicand forest restoration plots and to process the dataset based on CTFS standard.</p>
<p> To provide capacity building and deliverpresentations or guided tours for plant conservation work relevant to themission of the Flora Conservation Department.</p>
<p> To handle general administrative duties,including but not limited to documentation of various kinds of data andsupervising other workers.</p>
<p><strong>Requirements:</strong></p>
<p> Commitment to the mission, vision and valuesof KFBGC. Being open minded and recognizes the validity of all spiritual paths.Being passionate about the biodiversity of plants and its conservation.</p>
<p> Possess a postgraduate degree (preferably PhDDegree) related to Plant Biodiversity and Conservation.</p>
<p> With field identification skills pertainingto the wild plants of Hong Kong and South China.</p>
<p> Experience in managing databases for plantinformation, including the living and preserved collections, and plant photos.</p>
<p> Experience in data analysis for forest plotsor vegetation. Experience either in (1) plant systematics, (2) communityecology, (3) species distribution modelling or (4) macro ecological studies.</p>
<p> Computer literacy, with experience andknowledge in computer programming using: R, Python, SQL and GIS would be anadvantage.</p>
<p> Good communication and interpersonal skills,including good command of spoken and written English and Chinese.</p>
<p> Physically fit for outdoor work andexperience in hiking in countryside.</p>
<p>Further Information isavailable at:  <a target="_blank" rel="noopener" href="http://www.kfbg.org/eng/PIRO-flo.aspx">http://www.kfbg.org/eng/PIRO-flo.aspx</a></p>
<p><strong>How to apply:</strong></p>
<p>Please send a C.V. (withtwo references, interested position and expected salary) and a short essay (onrelevant experience and reasons for interest in the post) to the HumanResources Manager, Kadoorie Farm &amp; Botanic Garden Corporation, Lam KamRoad, Tai Po, New Territories, Hong Kong or email to <a href="mailto:&#x6b;&#x66;&#106;&#x6f;&#98;&#x73;&#64;&#107;&#102;&#x62;&#x67;&#x2e;&#x6f;&#114;&#x67;">&#x6b;&#x66;&#106;&#x6f;&#98;&#x73;&#64;&#107;&#102;&#x62;&#x67;&#x2e;&#x6f;&#114;&#x67;</a>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2015/05/26/2015-5-26-ad/" data-id="ckrsvkzag007190w0axiv5ly6" data-title="嘉道理农场暨植物园诚聘“植物鉴定和记录主任（已招到）" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%B1%82%E8%81%8C/" rel="tag">求职</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-5-23-geany" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2015/05/23/2015-5-23-geany/" class="article-date">
  <time class="dt-published" datetime="2015-05-22T17:53:54.000Z" itemprop="datePublished">2015-05-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2015/05/23/2015-5-23-geany/">Linux 使用Geany编写并调试R脚本</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Geany是Linux下的一个文本编辑器， 十分简洁高效。 带有多种编程语言的高亮， 对于需要编译的语言如 C， C++， Fotran等， Geany提供了编译以及调试的平台。 用户可以直接写代码， 然后编译成可执行文件。<br>而Geany也可以用来编辑R， python等脚本语言， 并且， 通过简单的设定， 即可将所选的代码发送到Terminal。 </p>
<p>为了将所选择的命令直接发送到Terminal， 设定如下： </p>
<ol>
<li>/home/username/.config/geany/ 中， 打开 geany.conf<br>更改 send_selection_unsafe=true </li>
</ol>
<p>其中username要替换成该linux用户名</p>
<ol start="2">
<li><p>打开geany， Edit &gt;Preferences&gt;KeyBindings&gt; Format &gt; Sent Selection to Terminal<br>按住 Control键 和 R键<br>然后选择 overwritten， 保存即可。</p>
</li>
<li><p>使用时， 先在下方的Terminal 输入R以打开R， 然后选择要运行的R命令， 同时按住Control和R键即可。</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2015/05/23/2015-5-23-geany/" data-id="ckrsvkzaf006z90w07b3c15hp" data-title="Linux 使用Geany编写并调试R脚本" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/12/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/14/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/R%E7%BC%96%E7%A8%8B/" rel="tag">R编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%BA%E7%89%A9/" rel="tag">人物</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%99%E4%BD%9C/" rel="tag">写作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" rel="tag">可视化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E4%B9%A6/" rel="tag">图书</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" rel="tag">图像处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9C%B0%E7%90%86/" rel="tag">地理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A3%B0%E6%98%8E/" rel="tag">声明</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A9%E6%96%87/" rel="tag">天文</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90/" rel="tag">学习资源</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%B9%E8%AF%9D%E5%BD%95/" rel="tag">对话录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E5%BE%97/" rel="tag">心得</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%A5%E5%91%8A/" rel="tag">报告</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E7%89%88/" rel="tag">排版</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%85%E4%B9%A1/" rel="tag">故乡</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%87%E6%9C%AC%E9%A6%86/" rel="tag">标本馆</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A4%8D%E7%89%A9%E5%88%86%E7%B1%BB/" rel="tag">植物分类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A4%8D%E7%89%A9%E5%AD%A6%E5%90%8D/" rel="tag">植物学名</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B1%82%E8%81%8C/" rel="tag">求职</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" rel="tag">版本控制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%80%81/" rel="tag">生态</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%80%81%E8%B5%84%E8%AE%AF/" rel="tag">生态资讯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A0%94%E7%A9%B6%E8%B5%84%E8%AE%AF/" rel="tag">研究资讯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%B3%BB%E7%BB%9F%E5%8F%91%E8%82%B2/" rel="tag">系统发育</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%9F%E8%AE%A1/" rel="tag">统计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B/" rel="tag">编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%8C%E6%91%84%E5%8C%86%E5%8C%86/" rel="tag">行摄匆匆</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A7%81%E9%97%BB%E5%BD%95/" rel="tag">见闻录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%97%E6%AD%8C/" rel="tag">诗歌</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9B%E5%8C%96/" rel="tag">进化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E6%83%B3/" rel="tag">随想</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A9%B3%E8%AE%BA/" rel="tag">驳论</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/R%E7%BC%96%E7%A8%8B/" style="font-size: 18.75px;">R编程</a> <a href="/tags/%E4%BA%BA%E7%89%A9/" style="font-size: 11.88px;">人物</a> <a href="/tags/%E5%86%99%E4%BD%9C/" style="font-size: 13.13px;">写作</a> <a href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" style="font-size: 12.5px;">可视化</a> <a href="/tags/%E5%9B%BE%E4%B9%A6/" style="font-size: 10px;">图书</a> <a href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" style="font-size: 11.88px;">图像处理</a> <a href="/tags/%E5%9C%B0%E7%90%86/" style="font-size: 17.5px;">地理</a> <a href="/tags/%E5%A3%B0%E6%98%8E/" style="font-size: 10.63px;">声明</a> <a href="/tags/%E5%A4%A9%E6%96%87/" style="font-size: 16.25px;">天文</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90/" style="font-size: 10px;">学习资源</a> <a href="/tags/%E5%AF%B9%E8%AF%9D%E5%BD%95/" style="font-size: 10px;">对话录</a> <a href="/tags/%E5%BF%83%E5%BE%97/" style="font-size: 10px;">心得</a> <a href="/tags/%E6%8A%A5%E5%91%8A/" style="font-size: 12.5px;">报告</a> <a href="/tags/%E6%8E%92%E7%89%88/" style="font-size: 13.75px;">排版</a> <a href="/tags/%E6%95%85%E4%B9%A1/" style="font-size: 10.63px;">故乡</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10.63px;">数据库</a> <a href="/tags/%E6%A0%87%E6%9C%AC%E9%A6%86/" style="font-size: 14.38px;">标本馆</a> <a href="/tags/%E6%A4%8D%E7%89%A9%E5%88%86%E7%B1%BB/" style="font-size: 10px;">植物分类</a> <a href="/tags/%E6%A4%8D%E7%89%A9%E5%AD%A6%E5%90%8D/" style="font-size: 10px;">植物学名</a> <a href="/tags/%E6%B1%82%E8%81%8C/" style="font-size: 10px;">求职</a> <a href="/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" style="font-size: 11.25px;">版本控制</a> <a href="/tags/%E7%94%9F%E6%80%81/" style="font-size: 16.88px;">生态</a> <a href="/tags/%E7%94%9F%E6%80%81%E8%B5%84%E8%AE%AF/" style="font-size: 10px;">生态资讯</a> <a href="/tags/%E7%A0%94%E7%A9%B6%E8%B5%84%E8%AE%AF/" style="font-size: 10px;">研究资讯</a> <a href="/tags/%E7%B3%BB%E7%BB%9F%E5%8F%91%E8%82%B2/" style="font-size: 10px;">系统发育</a> <a href="/tags/%E7%BB%9F%E8%AE%A1/" style="font-size: 18.13px;">统计</a> <a href="/tags/%E7%BC%96%E7%A8%8B/" style="font-size: 10.63px;">编程</a> <a href="/tags/%E8%A1%8C%E6%91%84%E5%8C%86%E5%8C%86/" style="font-size: 15px;">行摄匆匆</a> <a href="/tags/%E8%A7%81%E9%97%BB%E5%BD%95/" style="font-size: 10px;">见闻录</a> <a href="/tags/%E8%AF%97%E6%AD%8C/" style="font-size: 15.63px;">诗歌</a> <a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 19.38px;">软件</a> <a href="/tags/%E8%BF%9B%E5%8C%96/" style="font-size: 10.63px;">进化</a> <a href="/tags/%E9%9A%8F%E6%83%B3/" style="font-size: 11.25px;">随想</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 20px;">随笔</a> <a href="/tags/%E9%A9%B3%E8%AE%BA/" style="font-size: 10px;">驳论</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">February 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">October 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10/">October 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">August 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/07/">July 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/06/">June 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/05/">May 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/04/">April 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/02/">February 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">January 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/12/">December 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">November 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/10/">October 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/08/">August 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/07/">July 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/05/">May 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">April 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/03/">March 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/02/">February 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/12/">December 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/11/">November 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/09/">September 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/08/">August 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/07/">July 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06/">June 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/05/">May 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/04/">April 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/03/">March 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/01/">January 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/08/">August 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/07/">July 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/06/">June 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/05/">May 2009</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/07/25/2021-07-25beans/">种豆记</a>
          </li>
        
          <li>
            <a href="/2021/07/19/2021-07-19-rresources/">植物学和生态学的一些R语言学习资源</a>
          </li>
        
          <li>
            <a href="/2021/05/15/2021-05-15-ecopapers100/">生态学研究生要清楚的三件事：从《生态学家必读的100篇论文》说起</a>
          </li>
        
          <li>
            <a href="/2021/05/13/2021-05-13-life/">生活的答案</a>
          </li>
        
          <li>
            <a href="/2021/05/07/2021-05-7-new-distribution/">新种、新分布与植物爱好者的“发现权”</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 Jinlong Zhang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>
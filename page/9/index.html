<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Jinlong Zhang&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Jinlong Zhang&#39;s blog">
<meta property="og:url" content="https://helixcn.github.io/page/9/index.html">
<meta property="og:site_name" content="Jinlong Zhang&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jinlong Zhang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Jinlong Zhang's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jinlong Zhang&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://helixcn.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-2018-1-31-lunareclipse" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/01/31/2018-1-31-lunareclipse/" class="article-date">
  <time class="dt-published" datetime="2018-01-31T06:48:54.000Z" itemprop="datePublished">2018-01-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/01/31/2018-1-31-lunareclipse/">月食小记</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>淅淅沥沥，下了一天的雨，晚饭之后，天居然放晴了。大埔林村河桥上，抬头就见到初亏后不久的月亮，正悬挂在半空中：今天月全食。</p>
<p>发了一条微信朋友圈，很快收到远在黑龙江的妹妹的回复：“想起小时候大哥在院子里支起桌子，穿着绿大衣，拿圆规画好圆圈后记录月食的过程。大哥的兴趣并没有随着时间消磨掉，这次月食仿佛让我回到小时候”。是的，上次看月全食已经是二十年前。</p>
<p>月全食隔几年就能见到一次，可是很多时候观赏条件未必理想，要么天气不佳，要么发生在凌晨，所以二十年了，只是初中那一次见过月全食的全过程。</p>
<p>茫茫天地，不知所止；日月运行，周而复始。在这颗蓝色的星球上，生活着七十亿人还有数不清的生灵。每个人的经历和想法都不同，然而大家都喜欢明媚的阳光，喜欢雨后的彩虹，喜欢大自然恩赐的美食。也有人喜欢云彩，有人喜欢星空，有人喜欢花草，喜欢动物，喜欢湖泊海洋，喜欢大漠……自然现象、自然风光确实能让人愉悦。不过日常生活中，多少人是与大自然分开的呢？朝九晚五，公交、地铁、电脑、外卖，这一切都让自己与自然拉开了距离。也许有时是自己太狭隘，过于计较一些人和事，或者沉迷于想象不能自拔，甚至情绪失控。</p>
<p>哲学家康德说，世界上有两样东西能够深深震撼人的心灵，一个是崇高的道德准则， 另一个是头顶上灿烂的星空。人若无道德约束，则形同走兽；人若不仰望星空，则难以认识宇宙的浩瀚，难以知道自身的渺小与力所不及，也很难明白人生本无意义。天文爱好者里流行一句话：心系宇宙天地宽。是啊，相比天文学上的时间和空间，人力所及是多么渺小……</p>
<p>二十年，发生了多少事，早已经不记得，现在记忆力似乎也开始衰退；二十年，风风雨雨，走南闯北，读了高中、大学、硕士、博士，甚至还去了瑞典待了几个月；二十年里，认识了新朋友，没有忘记老朋友。改变的是体重，是年龄，不变的是对自然的兴趣和一如既往的真诚。</p>
<p>曾经用过mrstarlitsky、自然之美、北国秋韵、红景天等网名，名字虽然不同，却都只是一个人的代号。多年的学习，让人学到很多知识、技巧，让人努力学会思考，更让人知道自己不知道的其实更多。学到多少知识，掌握多少技巧，其实并不多么重要，保持对大自然的好奇、欣赏与敬畏，才正是要时时要提醒自己的。</p>
<p>二十年后的月全食，能否唤醒尘世中漂泊的自己？初心易得，始终难守。愿你乘风归来，依旧是少年。</p>
<p>2018年1月31日</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2018/01/31/2018-1-31-lunareclipse/" data-id="ckmt6y7or00asmgya3eu44nbr" data-title="月食小记" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2018-1-29-floristic" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/01/29/2018-1-29-floristic/" class="article-date">
  <time class="dt-published" datetime="2018-01-28T18:44:54.000Z" itemprop="datePublished">2018-01-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/01/29/2018-1-29-floristic/">植物分布区类型分析何去何从？</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>植物分布区类型分析， 就是在某地区植物名录的基础上， 列出一个地区的热带成份占多少， 温带成份占多少， 每种区系类型的主要代表科属是什么，占多大百分比等。分布区类型划分的标准主要是吴征镒院士提出的植物属的分布区类型。</p>
<p>十年以前，植物分布区类型分析是一类非常流行的研究。一些中文刊物发表过大量植物区系分析的论文。植物区系分析也早已经成为保护区考察报告的标准配置：在一个地区进行科学考察，采集标本、鉴定之后，研究人员会给出植物名录。名录部分是科考报告的核心内容。 在给出具体的名录之前，科考报告一般还会列出不同类群的科、属、种数量，再讨论不同分布区类型的科属数量等。</p>
<p>不过，近年来，植物区系分析已经很难再发表论文。最重要的原因是这些研究很难提供新知识或者新的认知。在区系分析中，大部分作者对分布区类型的划分只是按照吴先生的观点， 简单统计不同类型的科属数量，与流水账无异，其结果必然缺乏吸引力。例如， 研究点在华南某地，热带亚洲成份必然占重要比例；若在西北地区， 古地中海成份则更高； 在长白山或者辽东半岛， 中国日本成份必然占重要比例。只要知道研究地点，就能猜出结果，这样的分析当然缺乏吸引力。然而，这只是这些研究局限性的第一层面。</p>
<p>物种的分布受到自身生态位的限制，受到物种形成、扩散、种间竞争、杂交、入侵以及海陆变迁、气候变化、人为干扰等多种因素的影响。不同地区的不同类群，其分布格局受到的影响因素一般是不同的。当然，一定区域内气候条件等往往更为相似，可能有一些类群，经过漫长时间的适应和扩散之后出现类似的分布格局。例如， 冬青科、山茶科、木兰科、山矾科、金缕梅科等植物，常见于亚热带季风地区。冷杉、红莓苔子、岩高兰、天栌、松毛翠等见于寒带或者寒温带等。</p>
<p>对不同等级分类单元进行分布区类型的划分，有助于了解这些类群在地质历史上经历的重要变化，也有助于了解该类群的生态位需求等，从而认识为什么有些类群出现了众多的物种，为什么有些类群物种数很少，为什么有些物种分布区狭窄，有些物种分布区广阔， 为什么会出现间断分布等，这就是分布区类型划分的主要意义。不过，很多分布区类型的研究将属的分布区类型生搬硬套到种水平，就很难再探讨这些问题。一个属下的各个种，由于异域物种形成、扩散等原因， 往往分布在不同的地区，有些种的分布区面积大些，有些面积小些，或者占据不同的生态位等。在这种情况下，如果针对性地研究每个种的分布格局成因，最后总结出相应的结论，无疑会是更有意思的研究内容。</p>
<p>研究物种分布格局的成因， 现在常常用两种手段：潜在分布区预测以及遗传多样性分析。</p>
<p>第一种方法是利用物种的标本记录以及当前的气候图层预测物种的潜在分布区。假设物种在很长一段时间以来生态位是保守的，可以推断物种在历史上分布区的变化，能够帮人们更好的了解物种当前分布根据的成因。当然，这样的研究虽然听起来“高、大、上”，也有一些限制条件。 首先， 物种的标本采集强度在不同地区有很大差异。 特别是一些广布种，标本采集人常常认为是“大路货”而不予采集， 造成常见种在标本采集上严重不足。这样也就造成标本记录的偏差。 同时，一些地区采集过于集中。 据东北林业大学王洪峰老师这次在NSII会议的报告， 黑龙江省植物标本绝大多数采集自哈尔滨和伊春两个地区，这是因为帽儿山以及凉水两个重要的实验和实习基地吸引了众多的植物学家和生态学家进行采集，而其他地区，如牡丹江，黑河等，标本采集量仍然严重不足。在其他省份，类似的情况也极为常见。江西师范大学阳文静博士的研究就曾指出，中国东部地区还有很多县市标本采集严重不足， 特别是华北平原等人为干扰相对严重的农业地区。所以十分有必要对这些地区集中采集， 甚至进行网格化调查等。 再有， 很多物种受到人为干扰， 已经发生了局域灭绝，分布点数目以及分布区缩小到很小的范围，其分布区范围难以反映物种真实的生态位。</p>
<p>标本采集在空间上的偏差以及人为干扰等， 都会影响人们对物种分布区格局的预测。 不过，相比用属一级的物种分布区类型生搬硬套到种的水平，用模型预测的方法探讨物种分布格局成因，至少能在种水平有更多的讨论空间。</p>
<p>第二种方法需要如下假设， 如果一个地区在历史上相对稳定，某一个物种在某地区已经存在过很长时间， 那么该地区往往保存了更多的古老遗传突变，所以这些地区，该物种的遗传多样性往往比较高；而物种新扩散到的地区，由于缺乏足够长时间的积累遗传突变，物种的遗传多样性相对会低一些。群体遗传研究当然能从基因水平，帮人们了解物种的迁移、扩散、杂交等， 不过也受到若干因素的限制，如检测遗传多样性的位点选择，种群大小， 采样的完整程度等。尽管也有很多限制，从目前来看， 深入的进行物种分布格局成因的探讨，必须要结合群体遗传学的相关证据。</p>
<p>如果更多的植物学家能了解这方面的进展，相信也就没有人对分布区类型划分有那么浓厚的兴趣了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2018/01/29/2018-1-29-floristic/" data-id="ckmt6y7oq00aqmgya3e3waqwc" data-title="植物分布区类型分析何去何从？" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%94%9F%E6%80%81/" rel="tag">生态</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2018-1-17-latexbook" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/01/17/2018-1-17-latexbook/" class="article-date">
  <time class="dt-published" datetime="2018-01-17T05:03:54.000Z" itemprop="datePublished">2018-01-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/01/17/2018-1-17-latexbook/">一个较为完整的中文图书Latex模板</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>用Latex编写中文书是让人头疼的工作。如果不是需要输入很多公式，很多人是不愿意用latex排版中文书的。</p>
<p>在ctex宏包发布之前， latex系统对中文排版的支持一直不太理想。虽然中文能够正常显示，但是一些排版细节， 如章节号、行距、字体选择、缩进等都需要写很多命令重新定义。ctex宏包较好地解决了这个问题。</p>
<p>这里给出一个latex中文图书模板。 该模板主要包括：</p>
<ol>
<li>扉页</li>
<li>序言</li>
<li>前言</li>
<li>目录</li>
<li>部分</li>
<li>章</li>
<li>章以下标题</li>
<li>分栏模式</li>
<li>include包含其他tex文档</li>
<li>标题名称转换</li>
<li>标题部分加入目录</li>
<li>自动生成索引</li>
<li>参考文献（待完善）</li>
<li>生成目录、索引以及参考文献的超链接</li>
<li>后记</li>
</ol>
<p>编译的方法是： 将代码部分保存到文本文件中， 用UTF-8编码。 之后用XeLaTeX编译即可生成中文文档。 虽然生成的图书效果值得商榷， 但是相信编译为书稿后， 再交给专业排版人员， 一定能省很多事。 最主要的是可以用Latex直接写公式。</p>
<p>利用这个模板，编写植物名录、植物图集等会容易很多。可以借助其他脚本语言如Python或者R处理相应的数据库，生成tex代码，\include{}之后，再编译即可。</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%% Latex代码开始</span></span><br><span class="line"><span class="keyword">\documentclass</span>[utf8]&#123;book&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;titletoc&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;titlesec&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;ctexcap&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>[b5paper,text=&#123;125mm,195mm&#125;,centering,left=1in,right=1in,top=1in,bottom=1in]&#123;geometry&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>[]&#123;geometry&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;imakeidx&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;multicol&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;hyperref&#125;</span><br><span class="line"><span class="keyword">\makeindex</span></span><br><span class="line"><span class="keyword">\bibliographystyle</span>&#123;plain&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line"><span class="keyword">\title</span>&#123;<span class="keyword">\heiti</span>中国植物多样性地理图集&#125;</span><br><span class="line"><span class="keyword">\author</span>&#123;<span class="keyword">\fangsong</span>中国科学院植物研究所 编著&#125;</span><br><span class="line"><span class="keyword">\date</span>&#123;2018年1月&#125;</span><br><span class="line"><span class="keyword">\frontmatter</span></span><br><span class="line"><span class="keyword">\maketitle</span></span><br><span class="line"><span class="keyword">\chapter</span>&#123;序 I&#125;</span><br><span class="line">这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言</span><br><span class="line"><span class="keyword">\chapter</span>&#123;序 II&#125;</span><br><span class="line">这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分是序言这部分</span><br><span class="line"><span class="keyword">\chapter</span>&#123;前~言&#125;</span><br><span class="line">这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分是前言这部分</span><br><span class="line">这部分是前言</span><br><span class="line"><span class="keyword">\renewcommand</span><span class="keyword">\contentsname</span>&#123;目~录&#125;</span><br><span class="line"><span class="keyword">\tableofcontents</span></span><br><span class="line"><span class="keyword">\mainmatter</span></span><br><span class="line"><span class="keyword">\part</span>&#123;总论&#125;</span><br><span class="line"><span class="keyword">\chapter</span>&#123;中国植物调查的历史&#125;</span><br><span class="line"><span class="keyword">\section</span>&#123;一级节标题&#125;</span><br><span class="line"><span class="keyword">\subsection</span>&#123;二级节标题&#125;</span><br><span class="line"><span class="keyword">\subsubsection</span>&#123;三级节标题&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;multicols&#125;&#123;2&#125;</span><br><span class="line">清朝中期，外国人就开始中国采集植物标本。清朝中期， 外国人就开始中国采集植物标本。清朝中期， 外国人就开始中国采集植物标本。清朝中期， 外国人就开始中国采集植物标本。清朝中期，外国人就开始中国采集植物标本。清朝中期， 外国人就开始中国采集植物标本。</span><br><span class="line"><span class="keyword">\end</span>&#123;multicols&#125;</span><br><span class="line"><span class="keyword">\chapter</span>&#123;植物区系分区&#125;</span><br><span class="line"><span class="keyword">\section</span>&#123;一级节标题&#125;</span><br><span class="line"><span class="keyword">\subsection</span>&#123;二级节标题&#125;</span><br><span class="line"><span class="keyword">\subsubsection</span>&#123;三级节标题&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;multicols&#125;&#123;2&#125;</span><br><span class="line">和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集植物<span class="keyword">\index</span>&#123;调查&#125;和标本采集植物调查和标本采集植物调查和标本采集植物调查和标本采集</span><br><span class="line"><span class="keyword">\end</span>&#123;multicols&#125;</span><br><span class="line"><span class="keyword">\part</span>&#123;植物多样性分区概述&#125;</span><br><span class="line"><span class="keyword">\chapter</span>&#123;东北地区&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;multicols&#125;&#123;2&#125;</span><br><span class="line">Lorem ipsum dolor sit amet,consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore etdolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamcolaboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in <span class="keyword">\index</span>&#123;reprehenderit&#125; in voluptate velit essecillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat nonproident, sunt in culpa qui officia deserunt mollit anim id est laborum.</span><br><span class="line"><span class="keyword">\end</span>&#123;multicols&#125;</span><br><span class="line"><span class="keyword">\chapter</span>&#123;华北地区&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;multicols&#125;&#123;2&#125;</span><br><span class="line">Lorem ipsum dolor sit amet,consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore etdolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamcolaboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor inreprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officiadeserunt mollit anim id est laborum.</span><br><span class="line"><span class="keyword">\end</span>&#123;multicols&#125;</span><br><span class="line"><span class="keyword">\include</span>&#123;angiosperms&#125;</span><br><span class="line"><span class="keyword">\appendix</span></span><br><span class="line"><span class="keyword">\chapter</span>&#123;APG分类系统的科名&#125;</span><br><span class="line">内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容文内容正文内容正文内容正文<span class="keyword">\index</span>&#123;内容&#125;</span><br><span class="line">内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容附录内容正文内容正文<span class="keyword">\cite</span>&#123;DK1&#125;.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">\renewcommand</span><span class="keyword">\indexname</span>&#123;索~~引&#125;</span><br><span class="line"><span class="keyword">\printindex</span></span><br><span class="line"><span class="keyword">\addcontentsline</span>&#123;toc&#125;&#123;chapter&#125;&#123;索~引&#125;</span><br><span class="line"><span class="keyword">\backmatter</span></span><br><span class="line"><span class="keyword">\addcontentsline</span>&#123;toc&#125;&#123;chapter&#125;&#123;参考文献&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;thebibliography&#125;&#123;参考文献&#125;</span><br><span class="line"><span class="keyword">\bibitem</span>[Knuth1 et al. 1997]&#123;DK1&#125; D. Knuth, T.A.O.C.P. , Vol.1, Addison-Wesley, 1997.</span><br><span class="line"><span class="keyword">\bibitem</span>[Knuth2]&#123;DK2&#125; D. Knuth, T.A.O.C.P. , Vol.2, Addison-Wesley, 1997.</span><br><span class="line"><span class="keyword">\bibitem</span>[TONG YH 2014]&#123;TONG&#125; TONG YH, PANG KS, XIAN NH,2014. Carpinus insularis(Betulaceae), A new species from HongKong [J]. J Trop Subtrop Bot, 22(2): 121-124. [童毅华， 彭权森，夏念和，2014.香港桦木科一新种——香港鹅耳枥 [J]. 热带亚热带植物学报，22(2):121-124.]</span><br><span class="line"><span class="keyword">\bibitem</span>[XIA NH 2008]&#123;XIA&#125; XIA NH, DENG YF, YIP KL,2008. Syzygium impressum (Myrtaceae), A new species from HongKong [J]. J Trop Subtrop Bot, 16(1):19-22. [夏念和，邓云飞，叶国梁，2008. 香港桃金娘科一新种-凹脉赤楠 [J].热带亚热带植物学报，16(1):19-22.]</span><br><span class="line"><span class="keyword">\end</span>&#123;thebibliography&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\chapter</span>&#123;后~~记&#125;</span><br><span class="line">后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容后记内容</span><br><span class="line"><span class="keyword">\begin</span>&#123;flushright&#125;</span><br><span class="line">作~~者~~~~~~~~~</span><br><span class="line">2018年1月~~~~~</span><br><span class="line"><span class="keyword">\end</span>&#123;flushright&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br><span class="line"><span class="comment">%% Latex代码结束</span></span><br></pre></td></tr></table></figure>


<p><a target="_blank" rel="noopener" href="http://blog.sciencenet.cn/home.php?mod=attachment&id=151326">中文图书模板.pdf</a></p>
<p><a target="_blank" rel="noopener" href="http://blog.sciencenet.cn/home.php?mod=attachment&id=151327">中文图书模板.tex</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2018/01/17/2018-1-17-latexbook/" data-id="ckmt6y7oo00ammgyabsbgfrbi" data-title="一个较为完整的中文图书Latex模板" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%8E%92%E7%89%88/" rel="tag">排版</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2018-1-15-beamer" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/01/15/2018-1-15-beamer/" class="article-date">
  <time class="dt-published" datetime="2018-01-15T02:50:54.000Z" itemprop="datePublished">2018-01-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/01/15/2018-1-15-beamer/">一个中文Latex幻灯片模版</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>幻灯片重在用简洁、优雅的方式传递信息。</p>
<p>幻灯片中，最重要的当然是内容， 但是排版风格也十分重要，尤其是字体、行距以及版式的统一。</p>
<p>制作幻灯片和文档的方法很多， Latex不是唯一选择。Markdown等也能通过pandoc转换，或者借助用javascript等生成类似的效果，powerpoint经过精心设计， 也能赏心悦目。 不过在Markdown以及powerpoint中生成中文文档一些细节不好控制， 很多时候还是用Latex更简单明了。</p>
<p>Beamer是Latex的一个程序包， 可用来生成pdf格式的幻灯片。Latex中，中文文档大多以CJK包为基础编译。配置中文使用环境，在CJK基础上曾出现过若干程序包， 但是配置中文环境往往十分复杂， 其中目录、标题、索引、代码高亮显示等为最难的部分往往很难到位。为此，国内一些Latex爱好者开发了ctex程序包， 以生成符合中文排版习惯的文档的latex文档 （<a target="_blank" rel="noopener" href="http://www.ctan.org/tex-archive/language/chinese/ctex%EF%BC%89%E3%80%82%E8%A6%81%E6%9F%A5%E7%9C%8Bctex%E7%9A%84%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3%EF%BC%8C">http://www.ctan.org/tex-archive/language/chinese/ctex）。要查看ctex的帮助文档，</a> 可以在安装好Texlive或者MikTeX之后， 在terminal或者cmd中，输入texdoc ctex查看。该项目的github网址是 <a target="_blank" rel="noopener" href="https://github.com/CTeX-org/ctex-kit">https://github.com/CTeX-org/ctex-kit</a> 。目前来看 ，ctex套件通过XeLaTeX为中文提供了最好的支持。</p>
<p>以下是一个基于ctex程序包的beamer文档代码。 将源代码保存为utf-8格式的文本文档，然后用XeLaTeX编译即可。</p>
<p>查看更多beamer的配色方案以及主题， 参见</p>
<p><a target="_blank" rel="noopener" href="http://deic.uab.es/~iblanes/beamer_gallery/">http://deic.uab.es/~iblanes/beamer_gallery/</a></p>
<p><a target="_blank" rel="noopener" href="https://hartwork.org/beamer-theme-matrix/">https://hartwork.org/beamer-theme-matrix/</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/matze/mtheme">https://github.com/matze/mtheme</a></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%% TeX代码开始</span></span><br><span class="line"><span class="keyword">\documentclass</span>[UTF8]&#123;ctexbeamer&#125;</span><br><span class="line"><span class="keyword">\usetheme</span>&#123;Boadilla&#125;</span><br><span class="line"><span class="keyword">\usecolortheme</span>&#123;beaver&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;graphicx&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;color&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line"><span class="keyword">\title</span>&#123;R编程与进化分析&#125;</span><br><span class="line"><span class="keyword">\subtitle</span>&#123;内容与目标&#125;</span><br><span class="line"><span class="keyword">\author</span>&#123;<span class="keyword">\songti</span> 张金龙&#125;</span><br><span class="line"><span class="keyword">\institute</span>&#123;jinlongzhang01@gmail.com&#125;</span><br><span class="line"><span class="keyword">\date</span>&#123;<span class="keyword">\today</span>&#125;</span><br><span class="line"><span class="keyword">\frame</span>&#123;<span class="keyword">\titlepage</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\begin</span>&#123;frame&#125;</span><br><span class="line"><span class="keyword">\frametitle</span>&#123;目录&#125;</span><br><span class="line"><span class="keyword">\tableofcontents</span></span><br><span class="line"><span class="keyword">\end</span>&#123;frame&#125;</span><br><span class="line"><span class="keyword">\section</span>&#123;进化树之后要回答的问题&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 如果需要目录，请去掉这张幻灯片的%</span></span><br><span class="line"><span class="comment">%\begin&#123;frame&#125;</span></span><br><span class="line"><span class="comment">%\frametitle&#123;目录&#125;</span></span><br><span class="line"><span class="comment">%\tableofcontents[currentsection]</span></span><br><span class="line"><span class="comment">%\end&#123;frame&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">\begin</span>&#123;frame&#125;</span><br><span class="line"><span class="keyword">\frametitle</span>&#123;进化树能帮我们回答哪些问题 I？&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;itemize&#125;</span><br><span class="line"><span class="keyword">\item</span> 1. 分类单元之间的系统发育关系</span><br><span class="line"><span class="keyword">\item</span> 2. 物种的形成速率受什么影响？ 如： 类群的古老程度， 类群的丰富度， 类群所处的纬度， 类群的特殊生境</span><br><span class="line"><span class="keyword">\item</span> 3. 物种形成速率和灭绝速率在历史上发生过哪些变化？</span><br><span class="line"><span class="keyword">\item</span> 4. 物种的进化历史越独特， 越应该受到保护吗？</span><br><span class="line"><span class="keyword">\item</span> 5. 相近的物种有相似的性状吗？ 有相似的习性吗？</span><br><span class="line"><span class="keyword">\end</span>&#123;itemize&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;frame&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br><span class="line"><span class="comment">%%% TeX代码结束。</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://image.sciencenet.cn/home/201801/18/235614sdudnvzdvuucurdc.png"><img src="http://blog.sciencenet.cn/static/js/grey.gif" alt="img"></a></p>
<p><a target="_blank" rel="noopener" href="http://image.sciencenet.cn/home/201801/18/235520qfvbzcxxtt66cfvs.png"><img src="http://blog.sciencenet.cn/static/js/grey.gif" alt="img"></a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2018/01/15/2018-1-15-beamer/" data-id="ckmt6y7op00aomgya5izlf5e0" data-title="一个中文Latex幻灯片模版" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%8E%92%E7%89%88/" rel="tag">排版</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2018-1-9-learnpython" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/01/08/2018-1-9-learnpython/" class="article-date">
  <time class="dt-published" datetime="2018-01-08T08:31:54.000Z" itemprop="datePublished">2018-01-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/01/08/2018-1-9-learnpython/">为什么生态学家要学习Python或者R？</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>最近有几位老师在微信里面分享了学习Python的一些资料。与R相比，Python是一门真正意义上的编程语言，除了编写脚本，用于数值计算之外，还可以编写命令行程序，编写带用户界面的应用程序，编写网站，绘图，调用C，C++以及Fortran等语言的函数库等等。Python比R的应用领域更广阔，除了为黑客提供各种黑科技外，还广泛应用在化学、物理、天文、生物信息等领域，当然也非常好玩儿。这么强大的语言，当然非常值得了解和学习。更难能可贵的是，很多Python的项目是开源的，也就是源代码可以下载，供好事者仔细研究。Python的另外一个好处就是可以在不同的平台上使用，也可以编译为独立的程序运行。Python脚本也可以用来驱动MySQL,sqlite, ArcGIS, Adobe Indesign等软件，进行二次开发，用途极广。 Python资源极为丰富，有数以万计的程序包， 其中不乏生物信息学软件包。Biopython就是其中之一。BioPython程序包的一些函数可以对DNA序列进行复杂操作，实现对GenBank的访问和查询等。Python的语法简洁，通俗易懂， 很容易上手。 Python用户不需要捣腾层次复杂的花括号，只需要留意缩进。Python还有pip程序包管理系统，编写程序包也极为方便。掌握了Python，就掌握了这些资源。看了上面的介绍， 还没有学Python的朋友，是不是动心了呢？</p>
<p>然而还有一个选择，那就是R语言，也叫R软件，R语言是驱动R软件工作的命令。其实R语言的本质是S语言，S语言诞生于美国贝尔实验室。不过实现S语言的软件Splus售价太高，新西兰奥克兰大学的两个老师在教学过程中山寨了一下SPlus，他们用C语言和Fortran编写了一个软件，用来实现S语言，于是R软件就诞生了。自从这两个老师开放了R的源代码之后，R受到了学术界的关注。因为S语言语法简单，接近于很多人熟悉的C语言，在进行统计分析以及绘图上有出色的表现。不仅如此，R秉承了UNIX的传统，所有的命令， 包括程序包中的函数，都有非常详细的帮助文件，这是很多语言和软件所望尘莫及的。Python的很多程序包都没有做到这一点。近几年来，R语言成为生态学研究最流行的软件，特别是在森林样地数据处理、地理信息和空间处理、统计绘图以及在系统发育比较分析，经济学，贝叶斯统计等很多领域，都有一流的学者坚持使用R，一些新的统计方法也用R开发。从Springer以及Wiley，O’Reilly等著名出版商R相关图书的出版情况，就可以了解到R的热度。Tiobe编程语言热度排名，R蹿升到第8位，对于一门应用领域狭窄的脚本语言实属不易。还有很多研究论文直接在附录中给出了R代码。英国生态学会的Methodsin Ecology and Evolution 杂志更是开设专栏介绍生态学与进化分析的软件包，其中R程序包占绝大多数。在过去，研究人员可能提供MatLab代码或者SAS程序，然而最近几年， 这种情况逐渐减少了。相比之下，提供Python代码的生态学研究还不是很多。</p>
<p>对于生态研究来说，R与Python都是非常好的语言，R则更胜一筹。任何一门编程语言， 从入门到精通都需要很长时间练习，普通人即使花费很多时间， 也未必能够掌握一门计算机语言的精髓，更别提能使用得出神入化。Python的语言的覆盖面很广，几乎是我们能想到的脚本语言能做的事情，Python都是可以做到的。</p>
<p>但是，一门计算机语言， 能够在一个学科中占据绝对优势，其实主要是看运气，更重要的是取决于在这门脚本语言的发展过程中，有没有足够牛的牛人， 能够做出一些开创性的工作，奠定良好的发展基础。 例如， 之所以R软件在系统发育比较分析（PhylogeneticComparative Methods）能占绝对优势，根本原因在于法国进化生物学家E.Paradis编写的APE程序包，因为这个程序包定义了phylo这种数据类型，设计了进化树在R中储存的格式以及基本的操作。这样一来， 你想提取物种名， 就可以用 $tip.label提取；想为进化树重新排序，就用ladderize(); 想绘图，就用plot.phylo()；Paradis创造了APE，在Analysisof Phylogenetics and Evolution一书中介绍了相应的操作。APE对进化树的操作简单易行，因此很快吸引了大量用户，其中不乏一流学者，很多人在APE的基础上开发了程序包，如laser,phytools, picante等等,引入了众多新的分析方法，从此用R进行进化分析一发而不可收拾。对于群落生态来讲，类似的例子是vegan程序包。这个程序包主要用来进行多元统计，对于群落生态学数据分析有举足轻重的作用，例如计算alpha和beta多样性，CCA，DCA排序以及方差分解，物种多度曲线等等只需要一个函数就完成了。 生成的结果，可以直接绘图或者进行其他分析，极为方便。vegan也是众多一流生态学者合作完成的。进行生物多样性分析， vegan是绕不开的，而且越来越多的人开始使用vegan做群落数据分析，这也是很多人学习R的驱动力。在此之前，群落生态学家主要是用CANOCO或者TWINSPAN或者其他一些多元统计分析软件进行数据处理，数据格式千差万别，甚至每个软件都有自己的数据格式。那时候， 就连Numerical Ecology的作者，大名鼎鼎的Pierre Legendre都也只能自己用Fortran写程序。</p>
<p>R语言目前在中科院以及国内大学的生态和进化研究中已经非常重要。植物研究所赖江山博士的R语言培训班和课程进行的如火如荼，次次爆满。很多人学习R，不但是为了掌握一门技术， 更是为了了解资源。学习了一门语言，就打开了一门看世界的窗户，其实编程语言也是如此，至少可以看看用这门编程语言能做什么以及现有的资源有哪些。不过，学习的诀窍，就在于不要一下子学很多东西，而是要学得深入。虽然R语言或者Python已经入门，但是学的不够精，即使代码和程序包在就在那里，自己也不清楚怎么用。 ggplot2的作者Wickham在《Rfor Data Science》一书里面说，作者建议读者先学好一门语言，学到很熟很深的程度，然后自然就容易融会贯通，这种说法我十分赞同。</p>
<p>对于学过R语言的学生，什么学到比较熟练了呢？ 这里说说自己编写R程序包的感受。</p>
<p>其实学习R语言，并不一定非要求编写什么程序包。编写程序包还涉及到一些Latex语言文档，有时候涉及到调用C语言或者C++或者Fortran代码，涉及到其他程序包的依赖以及编写Description文件的格式以及UTF-8编码等许许多多问题，需要一段时间去认真学习。而且随着R的升级，R程序包编写的要求也经常改变，原来能够正常工作的程序包因为不符合要求就从CRAN下架了。还有不同操作平台编译的限制，数据大小的限制等等。例如在检查R程序包过程中有几十项内容，不能有一条出错，否则就不能提交到CRAN。对程序包的质量严格控制，并不是R管理团队太苛刻了。最近昆明植物所一位老师就抱怨说，安装一个R程序包，要依赖十个其他的包， 然后其中有些包又要依赖若干程序包，不过有一个二次依赖的程序包，因为不合格已经从CRAN移除了，这就导致程序包不能正常安装。程序包没有人好好维护的情况之下， 如果出现错误，就难免影响用户的心情， 影响CRAN以及R的声誉。当然， 你可以说， CRAN上的程序包都是作者负责的，出错也是难免的，R核心团队对此没有任何责任。道理是如此，可是谁也不希望不靠谱的程序包太多。</p>
<p>2017年年底，我忽然收到维也纳大学KurtHornik教授发来的email，让我修改phylotools，原因是该程序包一些函数的例子里读取用户工作路径之外的路径，这违反了CRAN的规定。phylotools程序包主要是用来构建DNA序列的超级矩阵supermatrix的。2009年年底，我到华南植物园葛学军研究员的实验室补充浙江古田山大样地DNA条形码的数据，做了一些实验之后，要把140多个种，每个种的rbcLa, matK,trnH-psbA基因分别比对，然后再拼成supermatrix。在计算机程序里，这是很容易实现的，但是如果用手工，就非常麻烦。当时还不熟悉R的我，编写了一些R脚本，用来创建supermatrix，这些函数后来就成了phylotools的主体。2015年，重新检查这个程序包后，我觉得很多函数写得不够好，于是将函数重新写了一遍， 放到github托管了。这次收到email通知，让我修改phylotools，我干脆就把github上的新版本改了改，然后提交到CRAN。新版本很快就就在CRAN接收了，不过代价也是有的： 因为重写了一些函数， 参数和旧版本不同，基于旧版本的R脚本其实已经不能用了。虽然如此，作为软件包的作者，我还是觉得新版本的代码优雅一些，函数设计更合理一些。相比之下，虽然对HK80以及spaa这两个程序包都不太满意，但是精力有限，就一直没有修改。另外两个R包，查询植物科属的plantlist以及打印植物标签的herblabel一直都托管在r-forge以及github上，没有在CRAN上那么费心。</p>
<p>能够编写R程序包，是否代表具有很高的R编程水平？答案是否定的。 因为编写程序包这件事， 只要是能编写R函数的用户，学习一点儿编写程序包的技巧，都是可以弄出来的。能够写程序包，确实说明相当熟悉R语言了，至少是能编写R函数了。能编写函数是区分入门水平和较为熟悉一门语言的分水岭。学习编程，入门阶段熟悉的是语法，如赋值、调用函数、写循环，如何查询帮助；之后是数据操作，字符串操作与正则表达式，编写函数，再之后就是各种算法。有人说，算法是函数的灵魂，很多情况下确实如此。因为函数就是为了实现一些功能，算法告诉你应该怎样实现这些功能。对算法的理解不够深入，函数就很难解决更深层次的问题，比如，要编写一个用于CCA排序的函数或者进行方差分解的函数，没有对相应理论很好掌握是不可能做到的。这些是真正考验基础理论和水平的地方，国内数量生态学家与国际同行核心竞争力的差距也就是在这里。</p>
<p>学习计算机语言，无论是Python还是R，都是有助于培养好的思维习惯与严谨的态度。在编程过程中，错一个标点符号都是不行的。与此同时， 学习编程还要理解很多抽象的概念，比如S3、S4方法，面向对象、继承、多态性，也需要理解一些数学和统计学的内容，最小二乘法、极大似然、贝叶斯统计、非参数统计以及线性和混合模型等等。</p>
<p>将一个问题分解为能用程序解决的问题，需要化整为零，一步一步思考，然后步步为营，这样从技术上问题也许就解决了。然而真正解决生态学与进化上的问题，发现新知识，提出新观点，已经不是技术问题，是编程所不能回答的。这时候就需要将各种信息进行整合，深刻把握问题的本质，进行深入思考。编程的能力再强，如果没有纵深的思考，没有对问题的全局性把握，没有从具体的学术问题出发，就很容易停留在技术层面，难有深刻的见解。无论是学习Python还是R，这个问题都需要仔细考虑的。</p>
<p>2018年1月9日 于 香港大埔</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2018/01/08/2018-1-9-learnpython/" data-id="ckmt6y7os00aumgyadadd3n89" data-title="为什么生态学家要学习Python或者R？" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BF%83%E5%BE%97/" rel="tag">心得</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2017-11-8-CTPL2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/11/07/2017-11-8-CTPL2/" class="article-date">
  <time class="dt-published" datetime="2017-11-07T08:20:54.000Z" itemprop="datePublished">2017-11-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/11/07/2017-11-8-CTPL2/">CTPL2通过中文名批量查询植物学名</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>关注plantlist程序包的朋友们可能记得我在半年前加了CTPL2函数，用来从excel文件中读取植物名并批量查询。这篇主要谈谈在整理CTPL2所用到的数据集时的心得。</p>
<p>写plantlist程序包CTPL2函数主要是想节约点时间。因为在野外调查结束后，整理植物名录总要花上很多时间，直接输入拉丁名显然是费时费力，极容易出错。其中一种方法是用输入法直接输拉丁名，例如拼音加加，不过要根据已经改过名的植物照片整理名录，用输入法逐个输入也是非常麻烦的，这是因为输入法词库大多不提供物种命名人，在严谨的植物名录中是不能用的。cfh可以基于照片生成名录，但是每个种都要有照片，照片要改好名称，上传到cfh，以便自动生成名录。不过这仍然有这样或那样的不便，例如要查询物种的分布，保护等级等信息，过程就非常繁琐。因此我就想能不能用中文名关联上一个数据库， 实现批量查询。</p>
<p>想法是好的，函数也很容易写，但是R的中文编码问题始终让人极为头疼。试了很多种方法让问题简单， 最终只能选用读取excel文件的方式，把字符编码交给openxlsx程序包处理。因为openxlsx包是依赖于Rcpp的，所以要运行新版的plantlist需要安装这两个包。</p>
<p>做一个工具函数同做艺术品是相通的，都要努力发挥创意。要让这个函数好用，最好能满足以下要求：只要在xlsx文件的第一列，依次输入物种中文名，保存，运行函数就能自动生成一个新的excel文件，里面有如下结果：</p>
<ol>
<li>物种的中文名</li>
<li>学名</li>
<li>带命名人的学名</li>
<li>APG等现代分类系统的科名</li>
<li>科中文名</li>
<li>属名</li>
<li>属中文名</li>
<li>该种在国内的IUCN保护等级</li>
<li>是否为特有植物</li>
<li>分布的省市缩写</li>
<li>分布的海拔范围等</li>
</ol>
<p>因为这些数据都是多样性分析中常用的，所以应尽量出现在结果中。</p>
<p>不同地区物种不同，要满足国内大部分科研人员的需求，名录的覆盖度要很高，所以数据库必须要包括大部分植物的标准中文名。所以这个数据库合并了多个数据库，包括：</p>
<ol>
<li>《中国植物志》中文名数据库</li>
<li>The Plant List网站科属数据库</li>
<li>刘冰等2014中国被子植物属数据库</li>
<li>中国高等植物IUCN红色名录</li>
<li>中国种子植物名称和分布数据库</li>
</ol>
<p>合并后，数据达到53000多条，包括苔藓、蕨类、裸子植物、被子植物的标准中文名。</p>
<p>数据库合并看似容易，实则问题非常多。例如，当前仍然未能找到苔藓的中文科属名称对照表，蕨类部分也仍然需要按照ppg系统整理，这些仍待下次更新时补充。被子植物部分还好有刘冰博士整理的中文名对照表，让进度加快不少。iucn红色名录数据中，有时候两个学名对应同一个中文名，此外还有为数众多的原变种、原亚种以及原变型等，这在匹配时都是很大的麻烦。不过由于它们的存在，几千条近似的条目分散在这五万多条数据中，要将这种条目合并，需要认真细致的校对。</p>
<p>由于数据量较大，在整理过程中，MS Excel还罢工几次：有时候整理到一万多条，不得不重新开始。吃了两次亏后，只能寄希望于随手按住Control+S了。经过多天的努力，数据终于整理干净了。</p>
<p>全部数据之后压缩成R数据库二进制文件。增加一个版本号后，经过检测，CTPL2函数可正常使用。</p>
<p>整理物种的学名以及相关信息，在植被多样性研究中是十分耗时的。真心希望plantlist程序包的CTPL2函数能帮大家节约时间。该程序包的下载地址是 <a target="_blank" rel="noopener" href="https://www.github.com/helixcn/plantlist">https://www.github.com/helixcn/plantlist</a>  </p>
<p>如果有任何问题、意见或建议，请发email到<a href="mailto:&#x6a;&#x69;&#110;&#108;&#x6f;&#x6e;&#x67;&#122;&#x68;&#97;&#x6e;&#103;&#48;&#49;&#64;&#103;&#109;&#x61;&#105;&#108;&#x2e;&#99;&#x6f;&#x6d;">&#x6a;&#x69;&#110;&#108;&#x6f;&#x6e;&#x67;&#122;&#x68;&#97;&#x6e;&#103;&#48;&#49;&#64;&#103;&#109;&#x61;&#105;&#108;&#x2e;&#99;&#x6f;&#x6d;</a>。</p>
<p>安装 plantlist 请参考 <a target="_blank" rel="noopener" href="http://blog.sciencenet.cn/blog-255662-846673.html">http://blog.sciencenet.cn/blog-255662-846673.html</a>  </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/11/07/2017-11-8-CTPL2/" data-id="ckmt6y7nx0094mgya23n3b4zv" data-title="CTPL2通过中文名批量查询植物学名" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%87%E6%9C%AC%E9%A6%86/" rel="tag">标本馆</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2017-10-27-janzen" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/10/27/2017-10-27-janzen/" class="article-date">
  <time class="dt-published" datetime="2017-10-26T16:54:54.000Z" itemprop="datePublished">2017-10-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/27/2017-10-27-janzen/">幼苗生存状态、负密度制约与Janzen Connell假说的检验</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>检验同种和不同种在群落内的竞争效应是群落生态学的重要研究内容。 负密度制约一般表现在同种个体或者异种个体在空间距离越近，对资源的竞争也就越激烈。与此同时，相同种在空间上的聚集，容易导致疾病传播，容易被捕食或者取食，对该种的幼苗生长不利。这种情况也发生在幼苗与母树之间，生态学家提出距离母树更近的幼苗死亡率更高，这就是Janzen Connell假说，并认为这是群落内物种多样性维持的重要机制之一。近年来，对于Janzen-Connell的研究也不断增加。</p>
<p>检验同一物种以及不同物种之间的密度制约现象， 一般是用到幼苗的两次调查数据， 用广义线性混合模型去探讨各因子的相对贡献。 响应变量一般为幼苗在两次调查时的生存状态。 解释变量一般为同种和异种幼苗在任何一棵幼苗内的胸径截面积，幼苗胸径、高度等。并将样方号、物种等并不太关心的因子作为随机效应处理。 根据研究问题和研究尺度的不同，也可能也会考虑环境因子的贡献等， 不过由于很难直接获得每棵幼苗对应的环境因子，所以整合环境因子的密度制约分析还不多。</p>
<p>在本文先随机生成一套样地数据， 然后给出一个函数compute_neighbour_area，该函数能计算指定半径下，每个个体相同种和不同树种的胸径截面积，生成的数据可以直接用来拟合广义线性混合模型，以探讨同种和不同种的竞争效应，探讨密度制约机制。</p>
<p>模拟生成的练习数据要求如下，面积为5公顷，长250m， 宽200m， 有90个物种， 12700个个体， 详情参见下面的R代码和注释 。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#### 假设样地有如下90个物种 （参考 陈云等 2017）</span></span><br><span class="line"></span><br><span class="line">sp &lt;- <span class="built_in">c</span>(<span class="string">&quot;Abelia biflora&quot;</span>, </span><br><span class="line"><span class="string">&quot;Abelia uniflora&quot;</span>,<span class="string">&quot;Acer davidii&quot;</span>,<span class="string">&quot;Acer davidii subsp. grosseri&quot;</span>,<span class="string">&quot;Acer griseum&quot;</span>,</span><br><span class="line"><span class="string">&quot;Acer pictum subsp. mono&quot;</span>,<span class="string">&quot;Acer truncatum&quot;</span>,<span class="string">&quot;Ailanthus altissima&quot;</span>,<span class="string">&quot;Aralia elata&quot;</span>,</span><br><span class="line"><span class="string">&quot;Berberis circumserrata&quot;</span>,<span class="string">&quot;Berberis mitifolia&quot;</span>,<span class="string">&quot;Betula chinensis&quot;</span>,<span class="string">&quot;Betula luminifera&quot;</span>,</span><br><span class="line"><span class="string">&quot;Betula platyphylla&quot;</span>,<span class="string">&quot;Buckleya graebneriana&quot;</span>,<span class="string">&quot;Carpinus cordata&quot;</span>,<span class="string">&quot;Carpinus turczaninowii&quot;</span>,</span><br><span class="line"><span class="string">&quot;Cerasus clarofolia&quot;</span>,<span class="string">&quot;Cerasus polytricha&quot;</span>,<span class="string">&quot;Cerasus serrulata&quot;</span>,<span class="string">&quot;Cercidiphyllum japonicum&quot;</span>,</span><br><span class="line"><span class="string">&quot;Cornus controversa&quot;</span>,<span class="string">&quot;Cornus kousa subsp. chinensis&quot;</span>,<span class="string">&quot;Cornus macrophylla&quot;</span>,</span><br><span class="line"><span class="string">&quot;Cornus schindleri subsp. poliophylla&quot;</span>,<span class="string">&quot;Cornus walteri&quot;</span>,<span class="string">&quot;Corylus chinensis&quot;</span>,</span><br><span class="line"><span class="string">&quot;Corylus heterophylla&quot;</span>,<span class="string">&quot;Cotoneaster acutifolius&quot;</span>,<span class="string">&quot;Cotoneaster multiflorus&quot;</span>,</span><br><span class="line"><span class="string">&quot;Crataegus hupehensis&quot;</span>,<span class="string">&quot;Crataegus pinnatifida&quot;</span>,<span class="string">&quot;Deutzia parviflora&quot;</span>,</span><br><span class="line"><span class="string">&quot;Diospyros lotus&quot;</span>,<span class="string">&quot;Elaeagnus umbellata&quot;</span>,<span class="string">&quot;Euonymus maackii&quot;</span>,</span><br><span class="line"><span class="string">&quot;Euonymus phellomanus&quot;</span>,<span class="string">&quot;Euonymus schensianus&quot;</span>,<span class="string">&quot;Euptelea pleiosperma&quot;</span>,</span><br><span class="line"><span class="string">&quot;Evodia daniellii&quot;</span>,<span class="string">&quot;Evodia fargesii&quot;</span>,<span class="string">&quot;Forsythia suspensa&quot;</span>,<span class="string">&quot;Fraxinus chinensis&quot;</span>,</span><br><span class="line"><span class="string">&quot;Fraxinus mandshurica&quot;</span>,<span class="string">&quot;Fraxinus paxiana&quot;</span>,<span class="string">&quot;Juglans cathayensis&quot;</span>,</span><br><span class="line"><span class="string">&quot;Koelreuteria paniculata&quot;</span>,<span class="string">&quot;Lespedeza bicolor&quot;</span>,<span class="string">&quot;Lespedeza buergeri&quot;</span>,</span><br><span class="line"><span class="string">&quot;Lindera obtusiloba&quot;</span>,<span class="string">&quot;Litsea tsinlingensis&quot;</span>,<span class="string">&quot;Lonicera hispida&quot;</span>,</span><br><span class="line"><span class="string">&quot;Lonicera microphylla&quot;</span>,<span class="string">&quot;Lonicera tatarinowii&quot;</span>,<span class="string">&quot;Maddenia hypoleuca&quot;</span>,</span><br><span class="line"><span class="string">&quot;Malus baccata&quot;</span>,<span class="string">&quot;Malus honanensis&quot;</span>,<span class="string">&quot;Malus hupehensis&quot;</span>,<span class="string">&quot;Malus kansuensis&quot;</span>,</span><br><span class="line"><span class="string">&quot;Meliosma flexuosa&quot;</span>,<span class="string">&quot;Meliosma veitchiorum&quot;</span>,<span class="string">&quot;Ostrya japonica&quot;</span>,<span class="string">&quot;Padus buergeriana&quot;</span>,</span><br><span class="line"><span class="string">&quot;Philadelphus incanus&quot;</span>,<span class="string">&quot;Pinus armandii&quot;</span>,<span class="string">&quot;Pinus tabuliformis&quot;</span>,<span class="string">&quot;Populus davidiana&quot;</span>,</span><br><span class="line"><span class="string">&quot;Quercus aliena var. acutiserrata&quot;</span>,<span class="string">&quot;Quercus serrata var. brevipetiolata&quot;</span>,</span><br><span class="line"><span class="string">&quot;Quercus variabilis&quot;</span>,<span class="string">&quot;Rhododendron micranthum&quot;</span>,<span class="string">&quot;Ribes pachysandroides&quot;</span>,</span><br><span class="line"><span class="string">&quot;Salix floderusii&quot;</span>,<span class="string">&quot;Sambucus williamsii&quot;</span>,<span class="string">&quot;Sinowilsonia henryi&quot;</span>,</span><br><span class="line"><span class="string">&quot;Sorbaria sorbifolia&quot;</span>,<span class="string">&quot;Sorbus alnifolia&quot;</span>,<span class="string">&quot;Sorbus hupehensis&quot;</span>,<span class="string">&quot;Spiraea hirsuta&quot;</span>,</span><br><span class="line"><span class="string">&quot;Stachyurus chinensis&quot;</span>,<span class="string">&quot;Styrax hemsleyanus&quot;</span>,<span class="string">&quot;Styrax obassis&quot;</span>,<span class="string">&quot;Symplocos paniculata&quot;</span>,</span><br><span class="line"><span class="string">&quot;Tilia japonica&quot;</span>,<span class="string">&quot;Tilia paucicostata&quot;</span>,<span class="string">&quot;Toxicodendron vernicifluum&quot;</span>,<span class="string">&quot;Ulmus davidiana&quot;</span>,</span><br><span class="line"><span class="string">&quot;Viburnum betulifolium&quot;</span>,<span class="string">&quot;Viburnum opulus var. sargentii&quot;</span>,<span class="string">&quot;Yulania denudata&quot;</span>)</span><br><span class="line"></span><br><span class="line">set.seed(<span class="number">12345</span>)  <span class="comment">#### 设定随机数种子</span></span><br><span class="line">library(sads)    <span class="comment">#### 导入物种多度分布程序包</span></span><br><span class="line"><span class="comment">## Loading required package: bbmle</span></span><br><span class="line"><span class="comment">## Loading required package: stats4</span></span><br><span class="line">library(stringr) <span class="comment">#### 导入字符串处理程序包</span></span><br><span class="line">library(vegan)   <span class="comment">#### 导入物种名处理程序包</span></span><br><span class="line"><span class="comment">## Loading required package: permute</span></span><br><span class="line"><span class="comment">## Loading required package: lattice</span></span><br><span class="line"><span class="comment">## This is vegan 2.5-3</span></span><br><span class="line">library(coefplot)<span class="comment">#### 绘制参数图</span></span><br><span class="line"><span class="comment">## Loading required package: ggplot2</span></span><br><span class="line">library(knitr)</span><br><span class="line">library(lme4)</span><br><span class="line"><span class="comment">## Loading required package: Matrix</span></span><br><span class="line">library(broom)</span><br><span class="line"><span class="comment">#### 生成物种编码， 并全部转换为大写</span></span><br><span class="line">spcode &lt;- toupper(make.cepnames(sp))</span><br><span class="line"><span class="comment">### 物种数90</span></span><br><span class="line">nsp &lt;- <span class="built_in">length</span>(spcode)<span class="comment">### 个体数</span></span><br><span class="line">nind &lt;- 12700</span><br><span class="line"><span class="comment">### 假设多度服从以下分布</span></span><br><span class="line">temp &lt;- rls(n = nsp, N = <span class="number">10000</span>, alpha = <span class="number">6</span>)</span><br><span class="line"><span class="comment">#### 生成名称字符串向量</span></span><br><span class="line">sppool &lt;- <span class="built_in">rep</span>(spcode, temp)</span><br><span class="line"><span class="comment">#### 随机筛选出物种， 长度与样地的个体数相同</span></span><br><span class="line">species &lt;- sample(sppool, nind, replace = <span class="literal">TRUE</span>)</span><br><span class="line"><span class="comment">#### 查看每个种的个体数#### </span></span><br><span class="line">table(species)</span><br><span class="line"><span class="comment">#### 计算总的个体数</span></span><br><span class="line"><span class="built_in">sum</span>(table(species))</span><br><span class="line"><span class="comment">## [1] 12700</span></span><br><span class="line"><span class="comment">#### 样地长250m， 对应nind个x坐标，坐标的取值范围从0-250</span></span><br><span class="line">gx &lt;- <span class="built_in">round</span>(runif(nind)*<span class="number">250</span>, digits = <span class="number">2</span>)</span><br><span class="line"><span class="comment">#### 样地宽200m， 对应nind个y坐标，坐标的取值范围从0-250</span></span><br><span class="line">gy &lt;- <span class="built_in">round</span>(runif(nind)*<span class="number">200</span>, digits = <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">xlab20 &lt;- cut(gx, breaks = seq(<span class="number">0</span>, <span class="number">260</span>, by = <span class="number">20</span>), labels = <span class="number">1</span>:<span class="number">13</span>)</span><br><span class="line">ylab20 &lt;- cut(gy, breaks = seq(<span class="number">0</span>, <span class="number">220</span>, by = <span class="number">20</span>), labels = <span class="number">1</span>:<span class="number">11</span>)</span><br><span class="line"><span class="comment">#### check the quardrat name</span></span><br><span class="line">sort(unique(ylab20))</span><br><span class="line"><span class="comment">##  [1] 1  2  3  4  5  6  7  8  9  10</span></span><br><span class="line"><span class="comment">## Levels: 1 2 3 4 5 6 7 8 9 10 11</span></span><br><span class="line">sort(unique(xlab20))</span><br><span class="line"><span class="comment">##  [1] 1  2  3  4  5  6  7  8  9  10 11 12 13</span></span><br><span class="line"><span class="comment">## Levels: 1 2 3 4 5 6 7 8 9 10 11 12 13</span></span><br><span class="line"><span class="comment">#### generate quadrat name</span></span><br><span class="line">quadrat20 &lt;- paste(str_pad(xlab20, <span class="number">2</span>, pad =<span class="string">&quot;0&quot;</span>), </span><br><span class="line">                       str_pad(ylab20, <span class="number">2</span>, pad =<span class="string">&quot;0&quot;</span>), sep = <span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="comment">##### table(quadrat20)</span></span><br><span class="line"><span class="comment">#### 假设dbh服从指数分布</span></span><br><span class="line">dbh = dbh &lt;-<span class="built_in">round</span>(rexp(nind,rate =<span class="number">2</span>)*<span class="number">50</span>+<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment">#### 假设样地名为白云山BYS （白云山物种名录参考 陈云等 2017）, 物种标牌</span></span><br><span class="line">tag &lt;- paste(<span class="string">&quot;BYS&quot;</span>, str_pad(<span class="number">1</span>:nind, <span class="number">6</span>, pad =<span class="string">&quot;0&quot;</span>), sep =<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="comment">#### 物种的生存状态</span></span><br><span class="line">status &lt;- rbinom(nind, size = <span class="number">1</span>, prob = <span class="number">0.01</span>)</span><br><span class="line"><span class="comment">#### 合并到一个data.frame中</span></span><br><span class="line">bys &lt;- data.frame(tag, species, gx, gy, quadrat20, dbh, status)</span><br><span class="line"><span class="comment">#### 以上样地模拟数据生成。 请注意以上数据都是随机生成， 数据只供练习用，不宜用来做零模型或其他分析。 </span></span><br><span class="line"><span class="comment">#### 数据准备</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#### 首先，去除个体数少于30个的个体</span></span><br><span class="line"><span class="comment">####  每个种的个体数</span></span><br><span class="line">nindividual &lt;- table(bys$species)</span><br><span class="line"><span class="comment">#### 大于等于30个个体的物种名</span></span><br><span class="line">sp_to_select &lt;- <span class="built_in">names</span>(nindividual[nindividual &gt;= <span class="number">30</span>])</span><br><span class="line"><span class="comment">#### 仅保留名单中出现的物种</span></span><br><span class="line">sub_bys &lt;- subset(bys, subset = species %in% sp_to_select)</span><br><span class="line"><span class="comment">#### 提取一部分数据的前2000条， 用于检验下面的函数</span></span><br><span class="line">sub_bys_test &lt;- sub_bys[<span class="number">1</span>:<span class="number">2000</span>,]</span><br><span class="line"></span><br><span class="line"><span class="comment">#### 计算每一个个体， 在某一半径范围内同种和异种的胸径截面积</span></span><br><span class="line"><span class="comment">#### dat 为样地数据， 必须包括以下各列</span></span><br><span class="line"><span class="comment">#### gx 个体在样地内的x坐标， 单位为m</span></span><br><span class="line"><span class="comment">#### gy 个体在样地内的y坐标， 单位为m</span></span><br><span class="line"><span class="comment">#### species 个体的名称缩写</span></span><br><span class="line"><span class="comment">#### dbh 每个个体的胸径，单位为cm</span></span><br><span class="line"><span class="comment">#### r 从任何一个个体出发所画圆盘的半径</span></span><br><span class="line"></span><br><span class="line">compute_neighbour_area &lt;- <span class="keyword">function</span> (dat, r = <span class="literal">NULL</span>)</span><br><span class="line">&#123;   </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">any</span>(<span class="built_in">is.na</span>(dat)))&#123;  </span><br><span class="line">    <span class="comment">### 如果出现NA缺失数据， 则需要先去除， 以免产生未知后果</span></span><br><span class="line">        dat &lt;- na.omit(dat)        </span><br><span class="line">        warning(<span class="string">&quot;NAs detected in the data and the entries </span></span><br><span class="line"><span class="string">                  containing NAs have been omitted.&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    dat$ID &lt;- 1:nrow(dat)  </span><br><span class="line">    <span class="comment">### 为每一条物种记录增加一个ID</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">is.null</span>(dat$gx))&#123;   </span><br><span class="line">      <span class="comment">### 检查gx</span></span><br><span class="line">      stop(<span class="string">&quot;Column gx is missing&quot;</span>)</span><br><span class="line">    &#125; </span><br><span class="line">       </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">is.null</span>(dat$gy))&#123;   </span><br><span class="line">      <span class="comment">### 检查gy</span></span><br><span class="line">      stop(<span class="string">&quot;Column gy is missing&quot;</span>)</span><br><span class="line">    &#125; </span><br><span class="line">       </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">is.null</span>(dat$species))&#123;  </span><br><span class="line">      <span class="comment">### 检查物种名</span></span><br><span class="line">      stop(<span class="string">&quot;Column species is missing&quot;</span>)</span><br><span class="line">    &#125;    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">is.null</span>(dat$dbh))&#123;   </span><br><span class="line">      <span class="comment">### 检查dbh</span></span><br><span class="line">      stop(<span class="string">&quot;Column species is missing&quot;</span>)</span><br><span class="line">    &#125;    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">is.null</span>(r))&#123;  </span><br><span class="line">      <span class="comment">### 检查是否有提供r</span></span><br><span class="line">      stop(<span class="string">&quot;r is not specified&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    gx &lt;- dat$gx</span><br><span class="line">    gy &lt;- dat$gy</span><br><span class="line">    dat$species &lt;- <span class="built_in">as.character</span>(dat$species)  </span><br><span class="line">    <span class="comment">### 转换为字符串主要是为了方便后面进行物种筛选</span></span><br><span class="line">    species_each_id &lt;- dat$species   </span><br><span class="line">    <span class="comment">### 由于进行的循环数较多， 所以最好不要在循环中不断提取物种， 而是先生成一个字符串向量</span></span><br><span class="line">    area_of_neighbours_same_species &lt;- <span class="built_in">rep</span>(<span class="literal">NA</span>, nrow(dat))  </span><br><span class="line">    <span class="comment">### 生成空白数据</span></span><br><span class="line">    area_of_neighbours_diff_species &lt;- <span class="built_in">rep</span>(<span class="literal">NA</span>, nrow(dat))  </span><br><span class="line">    <span class="comment">### 生成空白数据</span></span><br><span class="line">    print(paste(nrow(dat), <span class="string">&quot;rows to process.&quot;</span>))   </span><br><span class="line">    <span class="comment">### 提示数据量</span></span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:nrow(dat))&#123;        </span><br><span class="line">       <span class="keyword">if</span>(i %% <span class="number">100</span> == <span class="number">0</span> | i == <span class="number">1</span>)&#123;   </span><br><span class="line">    <span class="comment">### 每计算100个，打印正在计算哪条</span></span><br><span class="line">            print(paste(<span class="string">&quot;Computing neighbourhood area for row:&quot;</span>, i))</span><br><span class="line">        &#125;</span><br><span class="line">        x &lt;- gx[i]   <span class="comment">### 提取第i个</span></span><br><span class="line">        y &lt;- gy[i]        </span><br><span class="line">        <span class="comment">#### 先把数据量缩小到个体加减半径范围内的方块内， 这样能减少很多计算量</span></span><br><span class="line">        dat_sub &lt;- dat[(gx &lt; x + r) &amp; (gx &gt; x - r) &amp; (gy &lt; y + r) &amp; (gy &gt; y - r), ] </span><br><span class="line">        <span class="comment">### Select the area, reduce the computation of each loop</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">#### 计算相邻树木的胸径截面积需要将中心树种本身去除</span></span><br><span class="line">        <span class="comment">#### Exclude the focusing tree during the computation</span></span><br><span class="line">        dat_sub &lt;- dat_sub[dat_sub$ID != i, ]        </span><br><span class="line">        <span class="comment">#### 如果dat_sub 的行数大于0， 表明在缩小的方块内是有其他树种的</span></span><br><span class="line">        <span class="keyword">if</span>(nrow(dat_sub) &gt; <span class="number">0</span>)&#123;          </span><br><span class="line">            <span class="comment">#### 先生成一个空白的向量， 用来保存哪些记录是处在圆盘内的， 这里的下表是针对方块内的小数据的</span></span><br><span class="line">            sp &lt;- <span class="built_in">rep</span>(<span class="literal">NA</span>, nrow(dat_sub))  </span><br><span class="line">            <span class="comment">### empty vector, the index of the entries within the distance </span></span><br><span class="line">            <span class="comment">### r will be saved to sp.</span></span><br><span class="line">            <span class="keyword">for</span>(j <span class="keyword">in</span> <span class="number">1</span>:nrow(dat_sub))&#123; </span><br><span class="line">                <span class="comment">### 对方块内所有的物种计算欧氏距离，并做比较， 做j次 </span></span><br><span class="line">                mat &lt;- data.frame(<span class="built_in">c</span>(x, dat_sub$gx[j]), <span class="built_in">c</span>(y, dat_sub$gy[j]))</span><br><span class="line">                sp[j] &lt;- (dist(mat) &lt;= r)</span><br><span class="line">            &#125;            </span><br><span class="line">            <span class="comment">#### 所有个体的胸径截面积</span></span><br><span class="line">            area_of_neighbours &lt;- <span class="built_in">pi</span>*(dat_sub$dbh[sp]/<span class="number">2</span>)^<span class="number">2</span>  </span><br><span class="line">            <span class="comment">### Trunk Area at the breast height for all the neighbouring trees </span></span><br><span class="line">            <span class="comment">### in the subset dataset, within distance R</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">#### 如果同种的在圆盘内出现了，那么胸径截面积向量的长度肯定不是0，这时候就保存结果到第i个位置</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">length</span>(area_of_neighbours[dat_sub$species[sp] %in% </span><br><span class="line">                  species_each_id[i]]) != <span class="number">0</span> )&#123;</span><br><span class="line">                area_of_neighbours_same_species[i] &lt;- </span><br><span class="line">                    <span class="built_in">sum</span>(area_of_neighbours[dat_sub$species[sp] %in% species_each_id[i]])  </span><br><span class="line">                    <span class="comment">### The trunk area at breast height of the same species</span></span><br><span class="line">            &#125;            </span><br><span class="line">            <span class="comment">#### 如果不同种在圆盘内出现了，那么胸径截面积向量的长度肯定不是0，这时候就保存结果到第i个位置</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">length</span>(area_of_neighbours[!dat_sub$species[sp] %in% </span><br><span class="line">                species_each_id[i]]) != <span class="number">0</span>)&#123;</span><br><span class="line">                area_of_neighbours_diff_species[i] &lt;- </span><br><span class="line">                     <span class="built_in">sum</span>(area_of_neighbours[!dat_sub$species[sp] %in% </span><br><span class="line">                species_each_id[i]]) </span><br><span class="line">                <span class="comment">### The trunk area of breast height of different species</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">          <span class="comment">### If there is no tree within the distance r, return NA</span></span><br><span class="line">          <span class="comment">#### 如果没有出现任何树木，第i个胸径截面积都是NA</span></span><br><span class="line">            area_of_neighbours_same_species[i] &lt;- <span class="literal">NA</span></span><br><span class="line">            area_of_neighbours_diff_species[i] &lt;- <span class="literal">NA</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    <span class="comment">#### 合并成data.frame</span></span><br><span class="line">    res &lt;- data.frame(area_of_neighbours_same_species, </span><br><span class="line">                      area_of_neighbours_diff_species)    </span><br><span class="line">    <span class="comment">#### 为了数据处理方便，在返回值的列名上增加半径 r的取值</span></span><br><span class="line">    colnames(res) &lt;- paste(<span class="built_in">c</span>(<span class="string">&quot;area_of_neighbours_same_species&quot;</span>, </span><br><span class="line">                           <span class="string">&quot;area_of_neighbours_diff_species&quot;</span>), </span><br><span class="line">                           <span class="string">&quot;_r_&quot;</span>, r, sep = <span class="string">&quot;&quot;</span>)    </span><br><span class="line">    </span><br><span class="line">    <span class="built_in">return</span>(res)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#### debug(compute_neighbour_area)</span></span><br><span class="line"></span><br><span class="line">neighbour_area_res10 &lt;- compute_neighbour_area(sub_bys_test, r = <span class="number">10</span>) </span><br><span class="line"><span class="comment">### 半径10m</span></span><br><span class="line"><span class="comment">## [1] &quot;2000 rows to process.&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 1&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 100&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 200&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 300&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 400&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 500&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 600&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 700&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 800&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 900&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 1000&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 1100&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 1200&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 1300&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 1400&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 1500&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 1600&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 1700&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 1800&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 1900&quot;</span></span><br><span class="line"><span class="comment">## [1] &quot;Computing neighbourhood area for row: 2000&quot;</span></span><br><span class="line"><span class="comment">#### 合并数据</span></span><br><span class="line">sub_bys_test &lt;- cbind(sub_bys_test, neighbour_area_res10)</span><br><span class="line"><span class="comment">#### </span></span><br><span class="line">head(sub_bys_test)</span><br><span class="line"><span class="comment">##         tag  species     gx    gy quadrat20   dbh status</span></span><br><span class="line"><span class="comment">## 1 BYS000001 SORBALNI  53.21 78.17      0304  54.7      0</span></span><br><span class="line"><span class="comment">## 2 BYS000002 POPUDAVI 115.82 79.36      0604  40.0      0</span></span><br><span class="line"><span class="comment">## 3 BYS000003 BERBCIRC  45.61  2.98      0301   6.4      0</span></span><br><span class="line"><span class="comment">## 4 BYS000004 PADUBUER  12.58  3.22      0101   6.5      0</span></span><br><span class="line"><span class="comment">## 5 BYS000005 PINUARMA 244.71 80.23      1305  44.2      0</span></span><br><span class="line"><span class="comment">## 6 BYS000006 LITSTSIN  20.92 68.87      0204 140.7      0</span></span><br><span class="line"><span class="comment">##   area_of_neighbours_same_species_r_10</span></span><br><span class="line"><span class="comment">## 1                           1899.35979</span></span><br><span class="line"><span class="comment">## 2                                   NA</span></span><br><span class="line"><span class="comment">## 3                            183.85386</span></span><br><span class="line"><span class="comment">## 4                             11.34115</span></span><br><span class="line"><span class="comment">## 5                           5242.44635</span></span><br><span class="line"><span class="comment">## 6                                   NA</span></span><br><span class="line"><span class="comment">##   area_of_neighbours_diff_species_r_10</span></span><br><span class="line"><span class="comment">## 1                            18553.107</span></span><br><span class="line"><span class="comment">## 2                            10102.828</span></span><br><span class="line"><span class="comment">## 3                            10170.050</span></span><br><span class="line"><span class="comment">## 4                             6330.403</span></span><br><span class="line"><span class="comment">## 5                             9277.956</span></span><br><span class="line"><span class="comment">## 6                             4614.992</span></span><br><span class="line"><span class="comment">#### 拟合广义线性混合模型</span></span><br><span class="line"><span class="comment">#### 各列数据标准化， 以便在参数图中进行比较相对重要性</span></span><br><span class="line">sub_bys_test$dbh  &lt;- scale(sub_bys_test$dbh)</span><br><span class="line">sub_bys_test$area_of_neighbours_same_species_r_10 &lt;- </span><br><span class="line">     scale( sub_bys_test$area_of_neighbours_same_species_r_10)</span><br><span class="line"></span><br><span class="line">sub_bys_test$area_of_neighbours_diff_species_r_10 &lt;- </span><br><span class="line">    scale (sub_bys_test$area_of_neighbours_diff_species_r_10)</span><br><span class="line">    <span class="comment">#### 设定广义线性混合模型</span></span><br><span class="line">    glmm_model_10m = glmer(status ~ dbh + </span><br><span class="line">                                    area_of_neighbours_same_species_r_10 + </span><br><span class="line">                                    area_of_neighbours_diff_species_r_10 + </span><br><span class="line">                                    (<span class="number">1</span>+dbh|species)+(<span class="number">1</span>|quadrat20),</span><br><span class="line">                                    data=sub_bys_test, </span><br><span class="line">                                    family = binomial(link=<span class="string">&quot;cloglog&quot;</span>))</span><br><span class="line"><span class="comment">## singular fit</span></span><br><span class="line">tidy(glmm_model_10m)</span><br><span class="line"><span class="comment">## Warning in bind_rows_(x, .id): binding factor and character vector,</span></span><br><span class="line"><span class="comment">## coercing into character vector</span></span><br><span class="line"><span class="comment">## Warning in bind_rows_(x, .id): binding character and factor vector,</span></span><br><span class="line"><span class="comment">## coercing into character vector</span></span><br><span class="line"><span class="comment">## # A tibble: 8 x 6</span></span><br><span class="line"><span class="comment">##   term                      estimate std.error statistic   p.value group  </span></span><br><span class="line"><span class="comment">##   &lt;chr&gt;                        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  </span></span><br><span class="line"><span class="comment">## 1 (Intercept)               -4.62e+0     0.394   -11.7    9.18e-32 fixed  </span></span><br><span class="line"><span class="comment">## 2 dbh                       -1.23e-1     0.347    -0.354  7.24e- 1 fixed  </span></span><br><span class="line"><span class="comment">## 3 area_of_neighbours_sam…   -8.53e-1     0.777    -1.10   2.73e- 1 fixed  </span></span><br><span class="line"><span class="comment">## 4 area_of_neighbours_dif…    1.99e-1     0.280     0.712  4.76e- 1 fixed  </span></span><br><span class="line"><span class="comment">## 5 sd_(Intercept).quadrat…    2.29e-7    NA        NA     NA        quadra…</span></span><br><span class="line"><span class="comment">## 6 sd_(Intercept).species     0.         NA        NA     NA        species</span></span><br><span class="line"><span class="comment">## 7 sd_dbh.species             3.36e-8    NA        NA     NA        species</span></span><br><span class="line"><span class="comment">## 8 cor_(Intercept).dbh.sp…  NaN          NA        NA     NA        species</span></span><br><span class="line">glance(glmm_model_10m)</span><br><span class="line"><span class="comment">## # A tibble: 1 x 6</span></span><br><span class="line"><span class="comment">##   sigma logLik   AIC   BIC deviance df.residual</span></span><br><span class="line"><span class="comment">##   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;int&gt;</span></span><br><span class="line"><span class="comment">## 1     1  -58.3  133.  171.     117.         918</span></span><br><span class="line">coefplot(glmm_model_10m)</span><br></pre></td></tr></table></figure>

<p>当然， 实际研究中， 最好能考虑每个个体调查时间的间隔 offset， 或者考虑更复杂的随机效应，特比是针对不同种， 在数据量允许的情况下， 计算各个种生存状态的影响因素等。</p>
<h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><ol>
<li>陈云,郭凌,姚成亮,韦博良,袁志良,叶永忠.暖温带⁃北亚热带过渡区落叶阔叶林群落特征.生态学报,2017,37(17):5602-5611.</li>
<li>Zhu, Yan, et al. “Conspecific and phylogenetic density‐dependent survival differs across life stages in a tropical forest.” Journal of Ecology 103.4 (2015): 957-966.</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/10/27/2017-10-27-janzen/" data-id="ckmt6y7nv0090mgya9rap07m5" data-title="幼苗生存状态、负密度制约与Janzen Connell假说的检验" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%94%9F%E6%80%81/" rel="tag">生态</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2017-10-21-trees" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/10/21/2017-10-21-trees/" class="article-date">
  <time class="dt-published" datetime="2017-10-20T23:03:54.000Z" itemprop="datePublished">2017-10-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/21/2017-10-21-trees/">繁花满树 (十六首)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-小村里正午的阳光"><a href="#1-小村里正午的阳光" class="headerlink" title="1. 小村里正午的阳光"></a>1. 小村里正午的阳光</h1><p>  &nbsp;</p>
<p>  买好了回家的机票，</p>
<p>  但愿这次一切平安顺利，</p>
<p>  不要遇到大风雪。</p>
<p>  2000公里3.5小时的飞行</p>
<p>  比大雁更快</p>
<p>  &nbsp;</p>
<p>  不在乎朋友圈有多少赞，</p>
<p>  只愿家里一切安好。</p>
<p>  没有人在乎你的孤独，</p>
<p>  除了你自己，</p>
<p>  因为孤独只有自己能理解</p>
<p>  &nbsp;</p>
<p>  离乡十六年，</p>
<p>  电脑、手机、ipad，</p>
<p>  数字电视、数码相机、互联网，</p>
<p>  QQ、微信、电子邮件、高铁， </p>
<p>  还有家家户户的小汽车….</p>
<p>  还有DNA提取、基因组、PCR、Illumina，</p>
<p>  R语言、大样地、红色名录、Maxent….</p>
<p>  &nbsp;</p>
<p>  该来的就一定要来</p>
<p>  该走的就一定要走</p>
<p>  录音机、VCD、DVD、1.44M软盘、随身听、mp3….</p>
<p>  仿佛正午的阳光</p>
<p>  只维持一顿饭的功夫</p>
<p>  烟一样消散</p>
<p>  &nbsp;</p>
<p>  小村里只有捕鱼、耪地，</p>
<p>  不需要动植物标本，</p>
<p>  不需要多元回归树、最大熵和蒙特卡洛马尔科夫链….</p>
<p>  小村能自给自足，</p>
<p>  额外的都不需要，</p>
<p>  小村里说话时第二声还是要压低一半。</p>
<p>  &nbsp;</p>
<p>  在远方，</p>
<p>  总会想起小村。</p>
<p>  十六个春秋，</p>
<p>  多少不认识的孩子出生了，</p>
<p>  多少人曾在花季和雨季，</p>
<p>  多少人去了远方</p>
<p>  &nbsp;</p>
<p>  时间改变了你的容颜</p>
<p>  不变的只有乡音</p>
<p>  某一天正午的阳光</p>
<p>  和低沉的西北风</p>
<p>  &nbsp;</p>
<p>  2017年10月21日于大埔</p>
<p>  &nbsp;</p>
<h1 id="2-初冬的柿子"><a href="#2-初冬的柿子" class="headerlink" title="2. 初冬的柿子"></a>2. 初冬的柿子</h1><p>  &nbsp;</p>
<p>  初冬的清晨</p>
<p>  柿子挂满枝头</p>
<p>  散发着温暖的光</p>
<p>  静静守候</p>
<p>  &nbsp;</p>
<p>  37度的温暖</p>
<p>  照亮整洁的院子</p>
<p>  也照亮那一片荒芜</p>
<p>  还有深蓝的天</p>
<p>  &nbsp;</p>
<p>  叶子落了</p>
<p>  柿子还在</p>
<p>  南国的清晨五点</p>
<p>  北京也是五点</p>
<p>  &nbsp;</p>
<p>  寒夜走了</p>
<p>  天蒙蒙亮时</p>
<p>  柿树下的灯光还是那么温暖</p>
<p>  让你一下子回到了春天</p>
<p>  &nbsp;</p>
<h1 id="3-山楂"><a href="#3-山楂" class="headerlink" title="3. 山楂"></a>3. 山楂</h1><p>  &nbsp;</p>
<p>  那时候</p>
<p>  一小盆山楂</p>
<p>  就是外面的世界</p>
<p>  那天下午</p>
<p>  送货的卡车洒了一些山楂在村里</p>
<p>  这是村罐头厂对村民们的全部恩惠</p>
<p>  人人有份</p>
<p>  &nbsp;</p>
<p>  清晨的霜</p>
<p>  还未散去</p>
<p>  山楂就来了</p>
<p>  山楂也就一直没有走：</p>
<p>  在蓟县北山的树上</p>
<p>  在东城路</p>
<p>  在二道贩子的麻袋里</p>
<p>  住满了山楂</p>
<p>  &nbsp;</p>
<p>  山楂和山楂树</p>
<p>  一年又一年</p>
<p>  开花、结果</p>
<p>  从不知疲劳</p>
<p>  如同种山楂的人</p>
<p>  要养活自己和正在读书的儿女</p>
<p>  &nbsp;</p>
<p>  穿行在大街小巷的糖葫芦杆子</p>
<p>  哪里有婚丧嫁娶</p>
<p>  哪里下课、放学</p>
<p>  就聚集在哪里</p>
<p>  那是孩子们最喜欢的味道</p>
<p>  &nbsp;</p>
<p>  倾斜着的铝锅里</p>
<p>  绵白糖已经浓稠变黄</p>
<p>  串好的山楂在里面打个滚</p>
<p>  然后清脆地摔在湿木板上</p>
<p>  就生出了晶莹剔透的翅膀</p>
<p>  有了爬上竿子的资格</p>
<p>  就在那一瞬间</p>
<p>  &nbsp;</p>
<p>  三十年前的山楂籽从未发芽</p>
<p>  山楂还是一样红</p>
<p>  一样酸</p>
<p>  蘸糖葫芦的人</p>
<p>  现在开电瓶车</p>
<p>  不再蘸糖葫芦</p>
<p>  &nbsp;</p>
<p>  2017年10月18日</p>
<p>  &nbsp;</p>
<h1 id="4-清晨随想"><a href="#4-清晨随想" class="headerlink" title="4. 清晨随想"></a>4. 清晨随想</h1><p>  &nbsp;</p>
<p>  哈佛、耶鲁、斯坦福、佛罗里达、奥胡斯、根特…..，</p>
<p>  朋友圈里一长串大学的名字，</p>
<p>  熟悉而陌生，</p>
<p>  智慧在远方开枝散叶</p>
<p>  如果没有互联网，</p>
<p>  我只埋头于眼前的柴米油盐</p>
<p>  &nbsp;</p>
<p>  梦见联合国专门派人教我怎样养鸡</p>
<p>  怎样用水帘给鸡舍降温</p>
<p>  怎样无损伤收鸡蛋</p>
<p>  梦见派人教我怎样种桃子</p>
<p>  怎样避免收获时伤到桃子</p>
<p>  以免影响农产品的价格</p>
<p>  ……</p>
<p>  凡事都要小心</p>
<p>  &nbsp;</p>
<p>  四十岁的老屋里</p>
<p>  假装停着那三十五岁的自行车</p>
<p>  学校八点钟上课</p>
<p>  现在已经9点05，</p>
<p>  这堂课，</p>
<p>  要么是数学</p>
<p>  要么是物理</p>
<p>  我深信，都是因为那课程</p>
<p>  进入了一种让人听不懂的状态</p>
<p>  我才会迟到</p>
<p>  &nbsp;</p>
<p>  不知道为什么</p>
<p>  人要在火柴盒中生存</p>
<p>  也许因为这座城太小</p>
<p>  &nbsp;</p>
<p>  楼道里人来人往</p>
<p>  街上人来人往</p>
<p>  街上的人各自行路</p>
<p>  都不在乎</p>
<p>  远方的大学和那边的风景</p>
<p>  &nbsp;</p>
<p>  2017年10月9日清晨</p>
<p>  &nbsp;</p>
<h1 id="5-大埔的黄昏"><a href="#5-大埔的黄昏" class="headerlink" title="5. 大埔的黄昏"></a>5. 大埔的黄昏</h1><p>  &nbsp;</p>
<p>  大埔，</p>
<p>  华灯初上，</p>
<p>  深蓝的天空，</p>
<p>  多了一抹昏黄</p>
<p>  &nbsp;</p>
<p>  香港，</p>
<p>  一个人的傍晚，</p>
<p>  时间，</p>
<p>  在公路旁流淌</p>
<p>  &nbsp;</p>
<p>  来自南海的风，</p>
<p>  带来了一弯月色；</p>
<p>  林村河旁，</p>
<p>  是否遍洒流光?</p>
<p>  &nbsp;</p>
<p>  车走了，</p>
<p>  明天还会不会来？</p>
<p>  人生易老，</p>
<p>  作伴好还乡</p>
<p>  &nbsp;</p>
<p>  2017年9月28日于香港大埔</p>
<p>  &nbsp;</p>
<h1 id="6-倦"><a href="#6-倦" class="headerlink" title="6. 倦"></a>6. 倦</h1><p>  &nbsp;</p>
<p>  黑云压城：</p>
<p>  暴风雨到来的一瞬间，</p>
<p>  终于上了巴士，</p>
<p>  外面又是倾盆大雨……</p>
<p>  &nbsp;</p>
<p>  一年600次乘车，车上居然没有一张熟悉的面孔，</p>
<p>  这些人从哪里来？</p>
<p>  这些人会不会想家？</p>
<p>  也许不会想</p>
<p>  &nbsp;</p>
<p>  他们从没有背井离乡。</p>
<p>  &nbsp;</p>
<p>  但是我为什么要离开故乡？</p>
<p>  然后为什么要从零开始？</p>
<p>  还不都是因为自己太无能，</p>
<p>  太渺小……</p>
<p>  &nbsp;</p>
<p>  朋友圈分享自己的感受：</p>
<p>  其实都是为了慰藉自己的心，</p>
<p>  让自己少些孤独和伤感，</p>
<p>  请原谅我的自私</p>
<p>  &nbsp;</p>
<p>  倦了：</p>
<p>  你不停地索取，</p>
<p>  我不停地给予，</p>
<p>  从不懂怜悯或拒绝</p>
<p>  &nbsp;</p>
<p>  孤独的雨夜，一个人听雨</p>
<p>  仿佛一个人饮酒</p>
<p>  窗外灯光昏黄……</p>
<p>  我只想着回不去的故乡</p>
<p>  &nbsp;</p>
<h1 id="7-台风之夜"><a href="#7-台风之夜" class="headerlink" title="7. 台风之夜"></a>7. 台风之夜</h1><p>  &nbsp;</p>
<p>  台风如过客，</p>
<p>  来也匆匆，</p>
<p>  去也匆匆。</p>
<p>  &nbsp;</p>
<p>  回到多年前那个夏天的傍晚，</p>
<p>  也许……</p>
<p>  一切能重新开始</p>
<p>  没有那一晚，</p>
<p>  就不会有现在….</p>
<p>  &nbsp;</p>
<p>  奋力追赶，</p>
<p>  却依然落后，</p>
<p>  也许根本不在正确的轨道上</p>
<p>  &nbsp;</p>
<p>  你说我意气用事，</p>
<p>  我比谁都更清楚自己；</p>
<p>  追寻台风的脚步，</p>
<p>  风里来，雨里去….</p>
<p>  &nbsp;</p>
<p>  我愿沉醉在这雨中，</p>
<p>  走走停停，</p>
<p>  聆听，聆听….</p>
<p>  &nbsp;</p>
<h1 id="8-秋天快来"><a href="#8-秋天快来" class="headerlink" title="8. 秋天快来"></a>8. 秋天快来</h1><p>  台风在辽阔的太平洋上转出一个大写的M，</p>
<p>  也许它的征途是星辰大海，</p>
<p>  我并不理会，</p>
<p>  但是，</p>
<p>  这是多好的广告</p>
<p>  &nbsp;</p>
<p>  世界需要降温、降雨，</p>
<p>  发展速度需要降，</p>
<p>  房价需要降，</p>
<p>  只是网速和工资都不要降….</p>
<p>  &nbsp;</p>
<p>  改完稿子已经凌晨一点，</p>
<p>  不知道世界上为什么要有那么多论文，</p>
<p>  为什么要有那么多人做研究，</p>
<p>  其实很多人只是在科研中寻求温饱</p>
<p>  &nbsp;</p>
<p>  音乐还在响着，</p>
<p>  下一首曲子是贝多芬的《命运》，</p>
<p>  这星期还有一篇稿子要审….</p>
<p>  …..</p>
<p>  &nbsp;</p>
<p>  不想这么焦虑，</p>
<p>  不想这样疲惫，</p>
<p>  不想这样打拼，</p>
<p>  背着厚厚的蜗牛壳，</p>
<p>  我并不知自己被什么驱动，</p>
<p>  在外国人的语言与文字间艰难地爬行</p>
<p>  &nbsp;</p>
<p>  只希望秋天快来：</p>
<p>  到那时候，</p>
<p>  去收获满车的高粱和玉米，</p>
<p>  一定要堆得老高，</p>
<p>  同时收获满院子的金色阳光，</p>
<p>  收获黎明前的露水，</p>
<p>  还有院子里那棵玉簪花的阵阵香气</p>
<p>  &nbsp;</p>
<h1 id="9-明天就回去"><a href="#9-明天就回去" class="headerlink" title="9. 明天就回去"></a>9. 明天就回去</h1><p>  &nbsp;</p>
<p>  月光照亮你</p>
<p>  也照亮了安静的小村</p>
<p>  &nbsp;</p>
<p>  你留住了宁静，</p>
<p>  也留住了一样宁静的天空</p>
<p>  没有路灯的小村</p>
<p>  我们就只需要月光；</p>
<p>  没有灯红酒绿的小村，</p>
<p>  我们就只需要夜的沉寂</p>
<p>  &nbsp;</p>
<p>  在那里长大，</p>
<p>  一生一世就留在了那里：</p>
<p>  十八年的日日夜夜，</p>
<p>  乡音，</p>
<p>  还有母亲的双眼，</p>
<p>  都盼你回去</p>
<p>  &nbsp;</p>
<p>  明天就回去：</p>
<p>  回那里耕田、放牛、种菜，</p>
<p>  回那里划船、逮鱼、做小本生意</p>
<p>  再回到那平平常常的日子，</p>
<p>  然后去五里以外赶集</p>
<p>  那个只有半天的小集市….</p>
<p>  &nbsp;</p>
<p>  明天就回去，</p>
<p>  再不要四处流浪；</p>
<p>  明天就回去，</p>
<p>  回到皎洁的月光里</p>
<p>  &nbsp;</p>
<h1 id="10-天牛"><a href="#10-天牛" class="headerlink" title="10. 天牛"></a>10. 天牛</h1><p>  &nbsp;</p>
<p>  这一刻，</p>
<p>  你行走在一片风景里。</p>
<p>  &nbsp;</p>
<p>  这一刻，</p>
<p>  你忘记了曾经的孤独，</p>
<p>  也许也忘记了自己。</p>
<p>  &nbsp;</p>
<p>  这一刻，</p>
<p>  你行走在一间大房子外面，</p>
<p>  想看看谁在办公室里偷懒….</p>
<p>  &nbsp;</p>
<p>  你行走在空中，</p>
<p>  就像行走在树上；</p>
<p>  你行走在树上，</p>
<p>  阳光就填充了你的思想</p>
<p>  &nbsp;</p>
<h1 id="11-地球日植树"><a href="#11-地球日植树" class="headerlink" title="11. 地球日植树"></a>11. 地球日植树</h1><p>  &nbsp;</p>
<p>  当你种下一棵树，</p>
<p>  铺上防草垫，</p>
<p>  就又为大地打了一块补丁</p>
<p>  &nbsp;</p>
<p>  从枯黄到翠绿，</p>
<p>  到山溪再次流淌，</p>
<p>  你的双手成就了大自然的欢愉</p>
<p>  &nbsp;</p>
<p>  一米高的芒草，</p>
<p>  伴随着太阳，清风，白云，</p>
<p>  掠过植树区</p>
<p>  – 你需要漫长的等待</p>
<p>  &nbsp;</p>
<p>  当你种下一棵树，</p>
<p>  锤击钢铁的声音，</p>
<p>  刺痛了耳膜，</p>
<p>  也刺痛了大地</p>
<p>  &nbsp;</p>
<p>  6月4日</p>
<p>  于香港大埔</p>
<p>  &nbsp;</p>
<h1 id="12-夏天里的一朵花"><a href="#12-夏天里的一朵花" class="headerlink" title="12. 夏天里的一朵花"></a>12. 夏天里的一朵花</h1><p>  &nbsp;</p>
<p>  没人记得一朵花，</p>
<p>  在大地上</p>
<p>  怎样绽放、枯萎，</p>
<p>  怎样随风而逝，</p>
<p>  怎样埋入黄土</p>
<p>  &nbsp;</p>
<p>  没人记得一朵丝瓜花</p>
<p>  在某一天傍晚</p>
<p>  瓜熟蒂落</p>
<p>  那时候火烧云正红彻天际</p>
<p>  &nbsp;</p>
<p>  夏天里重复着夏天</p>
<p>  草芥依然是草芥，</p>
<p>  夏天里的一朵花，</p>
<p>  随着火烧云消失在深蓝色的夜空里</p>
<p>  没有人再记得</p>
<p>  &nbsp;</p>
<h1 id="13-时间里的花朵"><a href="#13-时间里的花朵" class="headerlink" title="13. 时间里的花朵"></a>13. 时间里的花朵</h1><p>  &nbsp;</p>
<p>  —— <strong>写给采标本的人</strong></p>
<p>  &nbsp;</p>
<p>  5月26日同金刚、慧玲、阿芳一起参观香港渔农自然护理署植物标本室，见到若干超过百年的植物标本，其中不乏Champion、Ford、Dunn、Levine、Maclure等名家的标本有感</p>
<p>  &nbsp;</p>
<p>  你的工作默默无闻，</p>
<p>  然而时间会记得，</p>
<p>  一百年后的人们也会记得</p>
<p>  &nbsp;</p>
<p>  清晰的记录，</p>
<p>  一百年后，</p>
<p>  依然映出你在那一刻是怎样屏息凝神：</p>
<p>  在那一刻，</p>
<p>  你想在时间的长河里留下一朵花，</p>
<p>  让它永不凋谢；</p>
<p>  &nbsp;</p>
<p>  仿佛一壶老酒，</p>
<p>  芳香四溢</p>
<p>  岁月留住了你想留住的花朵，</p>
<p>  也留住了你的心</p>
<p>  &nbsp;</p>
<h1 id="14-霞光里的少年"><a href="#14-霞光里的少年" class="headerlink" title="14. 霞光里的少年"></a>14. <strong>霞光里的少年</strong></h1><p>  &nbsp;</p>
<p>  遥想1997年初春里的一天，</p>
<p>  一个十三岁的少年，</p>
<p>  在寒夜里爬起身，</p>
<p>  一个人到一里路以外的河边看海尔-波普彗星</p>
<p>  &nbsp;</p>
<p>  寒气袭人，</p>
<p>  东方泛白。</p>
<p>  彗星高悬在东方的天空，</p>
<p>  就像快要降落天际的羽毛球</p>
<p>  &nbsp;</p>
<p>  满地白霜，</p>
<p>  潮白河边，</p>
<p>  脚下那一层薄冰，</p>
<p>  咔咔作响</p>
<p>  &nbsp;</p>
<p>  二十岁的河流沐浴在朝霞里，</p>
<p>  还有河面上的一层浮冰，</p>
<p>  以及二三里以外河堤上的树木</p>
<p>  ……</p>
<p>  &nbsp;</p>
<p>  大地还在沉睡，</p>
<p>  村庄就像一个婴儿，</p>
<p>  做着自己甜美的梦</p>
<p>  &nbsp;</p>
<p>  我只愿做一个渔夫，</p>
<p>  撑船，</p>
<p>  撒网，</p>
<p>  收获这样的清晨和喜悦</p>
<p>  &nbsp;</p>
<p>  二十年后，</p>
<p>  在五千里之外，</p>
<p>  大地还是大地</p>
<p>  回忆起那一天，</p>
<p>  少年又回到了那个清晨</p>
<p>  &nbsp;</p>
<p>  2017年5月24日</p>
<p>  于香港大埔</p>
<p>  &nbsp;</p>
<h1 id="15-大帽山以北"><a href="#15-大帽山以北" class="headerlink" title="15. 大帽山以北"></a>15. <strong>大帽山以北</strong></h1><p>  &nbsp;</p>
<p>  春天里，</p>
<p>  &nbsp;</p>
<p>  大雾弥漫。</p>
<p>  春天的天气完全不顾老板的理想：</p>
<p>  我们一安排上山，</p>
<p>  就要下雨。</p>
<p>  &nbsp;</p>
<p>  春天的植树区，</p>
<p>  海拔还是600米。</p>
<p>  &nbsp;</p>
<p>  春天的大帽山北坡，</p>
<p>  不管我们多着急，</p>
<p>  还是只有两三个人在测量树木。</p>
<p>  &nbsp;</p>
<h1 id="16-繁花满树—-写给钟花樱桃"><a href="#16-繁花满树—-写给钟花樱桃" class="headerlink" title="16. 繁花满树—-写给钟花樱桃"></a>16. <strong>繁花满树—-写给钟花樱桃</strong></h1><p>  &nbsp;</p>
<p>  盼望你繁花满树，</p>
<p>  盼望你果实挂满枝头，</p>
<p>  盼望你不再孤独，</p>
<p>  盼望你平安如意。</p>
<p>  花非花，</p>
<p>  雾非雾…</p>
<p>  &nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/10/21/2017-10-21-trees/" data-id="ckmt6y7nv008ymgyaa93fetxr" data-title="繁花满树 (十六首)" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%97%E6%AD%8C/" rel="tag">诗歌</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2017-10-19-glm" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/10/19/2017-10-19-glm/" class="article-date">
  <time class="dt-published" datetime="2017-10-19T05:06:54.000Z" itemprop="datePublished">2017-10-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/19/2017-10-19-glm/">广义线性模型中的逻辑斯蒂回归</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>其实题目不太准确，这篇短文介绍的是二项分布线性模型， 也就是当响应变量为01时的线性模型，例如物种是否出现，病人是否需要住院，学生是否成功考入大学，英语四六级成绩是否及格等。逻辑斯蒂回归模型，是二项分布线性模型中的一种，也是最广泛的一种。</p>
<p>事情还要从1935年说起。那一年，英国伦敦大学学院的C.I. Bliss 在《Annals of Applied Biology》上发表论文The Calculation of the Dosage**-**Mortality Curve。这篇论文的表4，就是现在广泛用于逻辑斯蒂回归教学的beetle数据。该数据是C.I. Bliss从Strand在1930年发表的论文中摘出来的。</p>
<p>Bliss的这篇论文主要以杂拟谷盗**(<strong>Tribolium confusum</strong>)**为例，系统介绍拟合存活比例曲线的方法。杂拟谷盗是一种粮食害虫。当时生物学家将481只杂拟谷盗分成8组，每一组分别在暴露在不同浓度的二硫化碳5小时，之后记录每个组有多少只甲虫死了。由于甲虫对二硫化碳的反应只有两种可能，要么存活，要么死亡，所以这个数据集是典型的二项分布数据。</p>
<p>在这篇论文中，Bliss提出了一种连接函数，也就是事件发生与否，用转换以后的正态分布累计曲线去估算，称为Probit。实际上，二项分布线性模型的连接函数有三种，分别为logit, probit以及cloglog。 logit、probit以及cloglog都是统计变换，目的是将二项分布数据转换为一种形式，以便能用线性模型估计直接估计模型的参数。其中最常见的为logit，使用logit连接函数的二项分布回归称为逻辑斯蒂回归。logit是事件发生与是否发生的比例 （odds）的对数值，形为log**(<strong>y</strong>/(<strong>1</strong>-<strong>y</strong>))<strong>，称为log odds。cloglog是complementary log log的缩写，是将响应变量进行两次log变换， 公式为log</strong>(-<strong>log</strong>(<strong>1</strong>-<strong>y</strong>))**。 cloglog常用来拟合数据出现大量极端数值的数据， 例如，大样地的幼苗的负密度制约研究中，部分胸径等级的树苗只有很少一部分死亡，用cloglog能较准确捕捉到与树苗死亡相关性较强的环境因子， 如同种密度制约、光环境等。</p>
<p>下面用R代码演示如何进行二项分布回归，分别用logit, probit以及cloglog三种连接函数。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">library(broom)</span><br><span class="line"><span class="comment">####表格形式的数据</span></span><br><span class="line"><span class="comment">####tabular form</span></span><br><span class="line"><span class="comment">####数据来源www.stat.ualberta.ca/~kcarrier/STAT562/comp_log_log</span></span><br><span class="line"><span class="comment">####beetle</span></span><br><span class="line"><span class="comment">####   LOGDOSE     NUMBER_OF_BEETLES  NUMBER_KILLED  COMP_LOG_LOGPROBITLOGIT</span></span><br><span class="line"><span class="comment">####1   1.691                59             6          5.7   3.4 35.0</span></span><br><span class="line"><span class="comment">####2   1.724                60            13         11.3  10.7  9.8</span></span><br><span class="line"><span class="comment">####3   1.755                62           18         20.9   23.422.4</span></span><br><span class="line"><span class="comment">####4   1.784                56            28         30.3  33.8 33.9</span></span><br><span class="line"><span class="comment">####5   1.811                63            52         47.7  49.6 50.0</span></span><br><span class="line"><span class="comment">####6   1.837                59            53         54.2  53.4 53.3</span></span><br><span class="line"><span class="comment">####7   1.861                62            61         61.1  59.7 59.2</span></span><br><span class="line"><span class="comment">####8   1.884                60            60         59.9  59.2 58.8</span></span><br><span class="line"><span class="comment">####&gt;</span></span><br><span class="line"><span class="comment">####二硫化碳的浓度</span></span><br><span class="line">LOGDOSE          &lt;-<span class="built_in">c</span>(<span class="number">1.691</span>, <span class="number">1.724</span>, <span class="number">1.755</span>, <span class="number">1.784</span>, <span class="number">1.811</span>, <span class="number">1.837</span>, <span class="number">1.861</span>, <span class="number">1.884</span> )</span><br><span class="line"><span class="comment">####各小组杂拟谷盗的头数</span></span><br><span class="line">NUMBER_OF_BEETLES&lt;-<span class="built_in">c</span>(<span class="number">59</span>,    <span class="number">60</span>,    <span class="number">62</span>,    <span class="number">56</span>,    <span class="number">63</span>,    <span class="number">59</span>,    <span class="number">62</span>,    <span class="number">60</span>    )    </span><br><span class="line"><span class="comment">####杂拟谷盗经过二硫化碳熏蒸5小时后，死亡的个体数</span></span><br><span class="line">NUMBER_KILLED    &lt;-<span class="built_in">c</span>(<span class="number">6</span>,     <span class="number">13</span>,    <span class="number">18</span>,    <span class="number">28</span>,    <span class="number">52</span>,    <span class="number">53</span>,    <span class="number">61</span>,    <span class="number">60</span>    )</span><br><span class="line"><span class="comment">####合并成一个数据框</span></span><br><span class="line">beetle&lt;-data.frame(NUMBER_OF_BEETLES,NUMBER_KILLED, LOGDOSE)</span><br><span class="line"><span class="comment">####第一种方法，数据表格式</span></span><br><span class="line"><span class="comment">####调用glm函数，注意连接函数的选择</span></span><br><span class="line">mod_logit  &lt;-glm(cbind(NUMBER_KILLED, NUMBER_OF_BEETLES -NUMBER_KILLED)~LOGDOSE,data=beetle,  family=binomial(link=<span class="string">&quot;logit&quot;</span>) )</span><br><span class="line">mod_probit &lt;-glm(cbind(NUMBER_KILLED, NUMBER_OF_BEETLES -NUMBER_KILLED)~LOGDOSE,data=beetle,  family=binomial(link=<span class="string">&quot;probit&quot;</span>))</span><br><span class="line">mod_cloglog&lt;-glm(cbind(NUMBER_KILLED, NUMBER_OF_BEETLES -NUMBER_KILLED)~LOGDOSE,data=beetle,  family=binomial(link=<span class="string">&quot;cloglog&quot;</span>))</span><br><span class="line"><span class="comment">####Showing significance of the variables</span></span><br><span class="line">tidy(mod_logit )</span><br><span class="line"></span><br><span class="line">\<span class="comment">##         term  estimate std.error statistic      p.value</span></span><br><span class="line">\<span class="comment">##1 (Intercept) -60.74013  5.181870 -11.72166 9.871561e-32</span></span><br><span class="line">\<span class="comment">##2     LOGDOSE  34.28593  2.913213  11.76911 5.631446e-32</span></span><br><span class="line"></span><br><span class="line">tidy(mod_probit)</span><br><span class="line"></span><br><span class="line">\<span class="comment">##         term  estimate std.error statistic      p.value</span></span><br><span class="line">\<span class="comment">##1 (Intercept) -34.95614  2.648984 -13.19605 9.245343e-40</span></span><br><span class="line">\<span class="comment">##2     LOGDOSE  19.74103  1.488046  13.26640 3.625628e-40</span></span><br><span class="line"></span><br><span class="line">tidy(mod_cloglog)</span><br><span class="line"></span><br><span class="line">\<span class="comment">##         term  estimate std.error statistic      p.value</span></span><br><span class="line">\<span class="comment">##1 (Intercept) -39.52224  3.235649 -12.21463 2.596958e-34</span></span><br><span class="line">\<span class="comment">##2     LOGDOSE  22.01474  1.796996  12.25085 1.662370e-34</span></span><br><span class="line"></span><br><span class="line">\<span class="comment">####Showing AIC et al.</span></span><br><span class="line">glance(mod_logit )</span><br><span class="line"></span><br><span class="line">\<span class="comment">##  null.deviance df.null    logLik      AIC     BIC deviancedf.residual</span></span><br><span class="line">\<span class="comment">##1      284.2024       7 -18.65681 41.31361 41.4725 11.11558          6</span></span><br><span class="line"></span><br><span class="line">glance(mod_probit)</span><br><span class="line"></span><br><span class="line">\<span class="comment">##  null.deviance df.null   logLik      AIC      BIC deviancedf.residual</span></span><br><span class="line">\<span class="comment">##1      284.2024       7 -18.0925 40.18499 40.34388 9.986957          6</span></span><br><span class="line"></span><br><span class="line">glance(mod_cloglog)</span><br><span class="line"></span><br><span class="line">\<span class="comment">##  null.deviance df.null    logLik      AIC      BIC deviancedf.residual</span></span><br><span class="line">\<span class="comment">##1      284.2024       7 -14.85619 33.71237 33.87126 3.514334          6</span></span><br><span class="line"></span><br><span class="line">\<span class="comment">####绘图Visualisingthe results</span></span><br><span class="line">mortality_rate&lt;-beetle$NUMBER_KILLED/beetle$NUMBER_OF_BEETLES</span><br><span class="line">dose&lt;-beetle$LOGDOSE</span><br><span class="line">plot(mortality_rate~dose,xlab=<span class="string">&quot;Dose of Carbon Disulfide&quot;</span>,ylab=<span class="string">&quot;MortalityRate of Beetles&quot;</span>,main=<span class="string">&quot;BinomialRegression&quot;</span>)</span><br><span class="line">LOGDOSE_new=seq(<span class="built_in">min</span>(dose),<span class="built_in">max</span>(dose),length.out=<span class="number">200</span>)</span><br><span class="line">mod_logit_line   &lt;-predict(mod_logit,newdata=data.frame(LOGDOSE=LOGDOSE_new), type=<span class="string">&quot;response&quot;</span>)</span><br><span class="line">lines(mod_logit_line~LOGDOSE_new,col=<span class="string">&quot;blue&quot;</span>)</span><br><span class="line">mod_probit_line  &lt;-predict(mod_probit,newdata=data.frame(LOGDOSE=LOGDOSE_new), type=<span class="string">&quot;response&quot;</span>)</span><br><span class="line">lines(mod_probit_line~LOGDOSE_new,col=<span class="string">&quot;red&quot;</span>)</span><br><span class="line">mod_cloglog_line &lt;-predict(mod_cloglog,newdata=data.frame(LOGDOSE=LOGDOSE_new), type=<span class="string">&quot;response&quot;</span>)</span><br><span class="line">lines(mod_cloglog_line~LOGDOSE_new,col=<span class="string">&quot;green&quot;</span>)</span><br><span class="line">legend(<span class="string">&quot;bottomright&quot;</span>,title=<span class="string">&quot;Linkfunctions&quot;</span>,legend=<span class="built_in">c</span>(<span class="string">&quot;logit&quot;</span>,<span class="string">&quot;probit&quot;</span>,<span class="string">&quot;cloglog&quot;</span>),lty=<span class="built_in">c</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>),col=<span class="built_in">c</span>(<span class="string">&quot;blue&quot;</span>,<span class="string">&quot;red&quot;</span>,<span class="string">&quot;green&quot;</span>))</span><br></pre></td></tr></table></figure>


<p><a target="_blank" rel="noopener" href="http://image.sciencenet.cn/home/201710/19/235751xnqz1qtzcz2annqp.jpeg"><img src="http://image.sciencenet.cn/home/201710/19/235751xnqz1qtzcz2annqp.jpeg" alt="img"></a></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">\<span class="comment">#####第二种方法，每个个体生存状态的长数据格式。glm是可以接受这种格式的。</span></span><br><span class="line">\<span class="comment">#####按照个体来计</span></span><br><span class="line">dose_surived&lt;-</span><br><span class="line"><span class="built_in">c</span>(<span class="built_in">rep</span>(<span class="number">1.691</span>,<span class="number">59</span>-<span class="number">6</span>),         </span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.724</span>,<span class="number">60</span>-<span class="number">13</span>),         </span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.755</span>,<span class="number">62</span>-<span class="number">18</span>),         </span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.784</span>,<span class="number">56</span>-<span class="number">28</span>),         </span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.811</span>,<span class="number">63</span>-<span class="number">52</span>),         </span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.837</span>,<span class="number">59</span>-<span class="number">53</span>),         </span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.861</span>,<span class="number">62</span>-<span class="number">61</span>),         </span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.884</span>,<span class="number">60</span>-<span class="number">60</span>))</span><br><span class="line">dose_dead&lt;-<span class="built_in">c</span>(</span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.691</span>, <span class="number">6</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.724</span>,<span class="number">13</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.755</span>,<span class="number">18</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.784</span>,<span class="number">28</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.811</span>,<span class="number">52</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.837</span>,<span class="number">53</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.861</span>,<span class="number">61</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="number">1.884</span>,<span class="number">60</span>))</span><br><span class="line">status_survived&lt;-<span class="built_in">c</span>(</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;alive&quot;</span>,<span class="number">59</span>-<span class="number">6</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;alive&quot;</span>,<span class="number">60</span>-<span class="number">13</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;alive&quot;</span>,<span class="number">62</span>-<span class="number">18</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;alive&quot;</span>,<span class="number">56</span>-<span class="number">28</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;alive&quot;</span>,<span class="number">63</span>-<span class="number">52</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;alive&quot;</span>,<span class="number">59</span>-<span class="number">53</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;alive&quot;</span>,<span class="number">62</span>-<span class="number">61</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;alive&quot;</span>,<span class="number">60</span>-<span class="number">60</span>))</span><br><span class="line">status_dead&lt;-<span class="built_in">c</span>(</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;dead&quot;</span>, <span class="number">6</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;dead&quot;</span>,<span class="number">13</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;dead&quot;</span>,<span class="number">18</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;dead&quot;</span>,<span class="number">28</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;dead&quot;</span>,<span class="number">52</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;dead&quot;</span>,<span class="number">53</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;dead&quot;</span>,<span class="number">61</span>),</span><br><span class="line"><span class="built_in">rep</span>(<span class="string">&quot;dead&quot;</span>,<span class="number">60</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">dose_long&lt;-<span class="built_in">c</span>(dose_dead,dose_surived)</span><br><span class="line">status   &lt;-as.factor(<span class="built_in">c</span>(status_dead,status_survived))</span><br><span class="line"></span><br><span class="line">incidence_mod_logit  &lt;-glm(status~dose_long,family=binomial(link=<span class="string">&quot;logit&quot;</span>))</span><br><span class="line">incidence_mod_probit &lt;-glm(status~dose_long,family=binomial(link=<span class="string">&quot;probit&quot;</span>))</span><br><span class="line">incidence_mod_cloglog&lt;-glm(status~dose_long,family=binomial(link=<span class="string">&quot;cloglog&quot;</span>))</span><br><span class="line"></span><br><span class="line">\<span class="comment">####Showing significance of the variables</span></span><br><span class="line">tidy(incidence_mod_logit )</span><br><span class="line"></span><br><span class="line">\<span class="comment">##         term  estimate std.error statistic      p.value</span></span><br><span class="line">\<span class="comment">##1 (Intercept) -60.74013  5.181834 -11.72174 9.861985e-32</span></span><br><span class="line">\<span class="comment">##2   dose_long  34.28593  2.913192  11.76920 5.625873e-32</span></span><br><span class="line"></span><br><span class="line">tidy(incidence_mod_probit)</span><br><span class="line"></span><br><span class="line">\<span class="comment">##         term  estimate std.error statistic      p.value</span></span><br><span class="line">\<span class="comment">##1 (Intercept) -34.95613  2.649010 -13.19592 9.261453e-40</span></span><br><span class="line">\<span class="comment">##2   dose_long  19.74102  1.488061  13.26627 3.631968e-40</span></span><br><span class="line"></span><br><span class="line">tidy(incidence_mod_cloglog)</span><br><span class="line"></span><br><span class="line">\<span class="comment">##         term  estimate std.error statistic      p.value</span></span><br><span class="line">\<span class="comment">##1 (Intercept) -39.52224  3.235632 -12.21469 2.594819e-34</span></span><br><span class="line">\<span class="comment">##2   dose_long  22.01474  1.796986  12.25092 1.660982e-34</span></span><br><span class="line"></span><br><span class="line">\<span class="comment">####Showing AIC et al.</span></span><br><span class="line">glance(incidence_mod_logit )</span><br><span class="line"></span><br><span class="line">\<span class="comment">##  null.deviance df.null    logLik      AIC      BIC deviancedf.residual</span></span><br><span class="line">\<span class="comment">##1       645.441     480 -186.1771 376.3542 384.7059 372.3542        479</span></span><br><span class="line"></span><br><span class="line">glance(incidence_mod_probit)</span><br><span class="line"></span><br><span class="line">\<span class="comment">##  null.deviance df.null    logLik      AIC      BIC deviancedf.residual</span></span><br><span class="line">\<span class="comment">##1       645.441     480 -185.6128 375.2255 383.5773 371.2255        479</span></span><br><span class="line"></span><br><span class="line">glance(incidence_mod_cloglog)</span><br><span class="line"></span><br><span class="line">\<span class="comment">##  null.deviance df.null    logLik      AIC      BIC deviancedf.residual</span></span><br><span class="line">\<span class="comment">##1       645.441     480 -182.3765 368.7529 377.1046 364.7529        479</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/10/19/2017-10-19-glm/" data-id="ckmt6y7nu008wmgya5xpt8oor" data-title="广义线性模型中的逻辑斯蒂回归" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BB%9F%E8%AE%A1/" rel="tag">统计</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2017-10-18-plotsinfdp" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/10/18/2017-10-18-plotsinfdp/" class="article-date">
  <time class="dt-published" datetime="2017-10-18T00:19:54.000Z" itemprop="datePublished">2017-10-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/18/2017-10-18-plotsinfdp/">大型森林样地样方的命名与坐标转换</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>大型森林监测样地一般是指面积在16公顷以上的样地，在样地内部， 所有胸径大于1cm的木本植物及其分枝都要测量平面直角坐标，胸径等。在调查过程中，一般是先确定样地范围，然后用全站仪打点，确定样地的四角，以及每个20m样方顶点位置，为了方便计算，一般以西南点为原点， x轴指向正东，向东为正，单位为m；y轴指向正北，向北为正，单位为m。</p>
<p>为了调查方便，一般先将样地划分成20m的样方，每个样方按照在xy轴出现的顺序命名。名字一般为4位，例如0518，前两位表示从原点开始算，向东计第5个20m样方，后两位表示从原点开始计，向北计第18个样方。因此，大样地西南角的样方名总是0101。对于东西方向宽400m，南北方向长500m的大样地，东北角的样方名为2025，西北角的样方名为0125，东南角的样方名为2001。</p>
<p>要在20m样方内部测量每棵树的xy坐标仍然困难。所以实际调查中一般是将20m的样方再进一步划分成16个5m*5m的小样方，每个5m的小样方均以自己的西南点为原点，xy轴的方向与20m样方相同。这样在调查中就可以较方便的测量每棵树的坐标。每个20m样地内的16个小样方一般按照蛇形顺序调查，以减少调查人员在样地内的走动。5m小样方习惯上一般命名为1到16。</p>
<p>按照这种调查方法，从野外调查获得的每棵树坐标位置实际上为该个体在5m小样方内的坐标。在生态学数据分析中，要进行空间分析、点格局分析、变换空间尺度时，需要每棵树在样地尺度的平面直角xy坐标。这就需要将5m的坐标按照样方名称等，转换为样地尺度的xy坐标。这也是大样地数据标准化的重要一步。</p>
<p>本文以一个东西宽400m*南北长500m的样地为例，简要介绍如何将调查数据转换为样地尺度。先生成模拟数据，再基于模拟数据演示如何处理。</p>
<p>调查后输入Excel的数据，20m样方的名称通常为0105, 0203, 0505，不过excel常常将名称自动转换为105, 203, 505等只包含三位数字；而有些样方号并不以0开头，例如1820, 2022，这些样方在Excel自动转换后包含四位数字。由于这会带来处理上的不便，所以最好统一为4位，在R中可以用stringr程序包的str_pad 函数，在3位数字的字符串前面加0，转换为0105，0203，0505等。</p>
<p>下面我们生成一套模拟数据，假设我们的样地设定在河南省内乡县宝天曼自然保护区，缩写为BTM。所有胸径大于1cm的，都已经挂牌，并已经测量了在5m样方内的横纵坐标位置。</p>
<p>假设样地内共调查到88325个个体，没有考虑分枝。每个个体有如下的信息：</p>
<ol>
<li>tag：树的号牌，原则上讲，从号牌上需要能看出每棵树所在的20m样方号，然后在每个样方号内顺序增加。因为这里是模拟数据，就暂时不考虑了。这里按照以下方式命名 BTM000001 - BTM088325；</li>
<li>plot20_names：该个体对应的20m样方名；</li>
<li>g5x：该个体在5m样方内的x坐标，单位为m；</li>
<li>g5y：该个体在5m样方内的y坐标，单位为m；</li>
<li>subplot5：该个体所在的小样方名称，按照蛇形顺序命名，从1-16；</li>
<li>dbh：该个体的胸径，单位为cm</li>
</ol>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#### 以下代码先生成模拟的调查数据</span></span><br><span class="line">library(stringr)</span><br><span class="line"><span class="comment">#### 生成模拟数据，假设整个样地有88325个个体</span></span><br><span class="line">nindividual &lt;-<span class="number">88325</span></span><br><span class="line"><span class="comment">#### 生成树牌号</span></span><br><span class="line">tag &lt;-paste(<span class="string">&quot;BTM&quot;</span>, str_pad(<span class="number">1</span>:nindividual, <span class="number">6</span>, pad =<span class="string">&quot;0&quot;</span>), sep =<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="comment">#### 生成20m样地的名称</span></span><br><span class="line">plot20_x &lt;- str_pad(<span class="number">1</span>:<span class="number">20</span>, <span class="number">2</span>, pad =<span class="string">&quot;0&quot;</span>)</span><br><span class="line">plot20_y &lt;- str_pad(<span class="number">1</span>:<span class="number">25</span>, <span class="number">2</span>, pad =<span class="string">&quot;0&quot;</span>)</span><br><span class="line">names_temp &lt;- expand.grid(plot20_x, plot20_y)</span><br><span class="line">plot20_names &lt;-paste(names_temp[,<span class="number">1</span>],names_temp[,<span class="number">2</span>], sep =<span class="string">&quot;&quot;</span>)</span><br><span class="line">survey_plot20_names &lt;-sample(plot20_names,nindividual, replace=<span class="literal">TRUE</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#### 随机生成5m样地内，调查个体的坐标</span></span><br><span class="line">g5x &lt;-<span class="built_in">round</span>(runif(nindividual)*<span class="number">5</span>, <span class="number">2</span>)</span><br><span class="line">g5y &lt;-<span class="built_in">round</span>(runif(nindividual)*<span class="number">5</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment">#### 生成5m小样方的名称</span></span><br><span class="line">subplot5 &lt;-sample(<span class="number">1</span>:<span class="number">16</span>, nindividual, replace=<span class="literal">TRUE</span>)</span><br><span class="line"><span class="comment">#### 模拟生成每棵树的胸径dbh, 假设服从指数分布</span></span><br><span class="line">dbh &lt;-<span class="built_in">round</span>(rexp(nindividual,rate =<span class="number">2</span>)*<span class="number">50</span>+<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment">#### 所有生成的数据合并到一个dataframe中</span></span><br><span class="line">btmdat &lt;- data.frame(tag, survey_plot20_names, subplot5, g5x, g5y, dbh)</span><br><span class="line"><span class="comment">#### 做简单排序</span></span><br><span class="line">btmdat &lt;- btmdat[order(btmdat$survey_plot20_names, btmdat$subplot5),]</span><br><span class="line"></span><br><span class="line"><span class="comment">############## 以上生成模拟数据结束 ####################</span></span><br><span class="line"><span class="comment">#### 以下代码用于转换5m坐标到大样地尺度的平面直角坐标</span></span><br><span class="line"><span class="comment">#######################################################</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#### 生成定义5m样方在20m样方x位置的中间变量</span></span><br><span class="line">btmdat$location5x &lt;-<span class="built_in">rep</span>(<span class="literal">NA</span>, nrow(btmdat))</span><br><span class="line">btmdat$location5y &lt;-<span class="built_in">rep</span>(<span class="literal">NA</span>, nrow(btmdat))</span><br><span class="line"><span class="comment">#### 因为是蛇形调查顺序，所以5m的样方名要分别找出x轴和y轴的对应编号</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">1</span>]&lt;-<span class="number">1</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">2</span>]&lt;-<span class="number">2</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">3</span>]&lt;-<span class="number">3</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">4</span>]&lt;-<span class="number">4</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">5</span>]&lt;-<span class="number">4</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">6</span>]&lt;-<span class="number">3</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">7</span>]&lt;-<span class="number">2</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">8</span>]&lt;-<span class="number">1</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">9</span>]&lt;-<span class="number">1</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">10</span>]&lt;-<span class="number">2</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">11</span>]&lt;-<span class="number">3</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">12</span>]&lt;-<span class="number">4</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">13</span>]&lt;-<span class="number">4</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">14</span>]&lt;-<span class="number">3</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">15</span>]&lt;-<span class="number">2</span></span><br><span class="line">btmdat$location5x[btmdat$subplot5 ==<span class="number">16</span>]&lt;-<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#### 生成定义5m样方在20m样方y位置的中间变量</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">1</span>]&lt;-<span class="number">1</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">2</span>]&lt;-<span class="number">1</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">3</span>]&lt;-<span class="number">1</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">4</span>]&lt;-<span class="number">1</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">5</span>]&lt;-<span class="number">2</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">6</span>]&lt;-<span class="number">2</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">7</span>]&lt;-<span class="number">2</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">8</span>]&lt;-<span class="number">2</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">9</span>]&lt;-<span class="number">3</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">10</span>]&lt;-<span class="number">3</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">11</span>]&lt;-<span class="number">3</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">12</span>]&lt;-<span class="number">3</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">13</span>]&lt;-<span class="number">4</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">14</span>]&lt;-<span class="number">4</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">15</span>]&lt;-<span class="number">4</span></span><br><span class="line">btmdat$location5y[btmdat$subplot5 ==<span class="number">16</span>]&lt;-<span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#### 将20m样方的名称补充完整为4位</span></span><br><span class="line">btmdat$survey_plot20_names &lt;- <span class="built_in">as.character</span>(str_pad(btmdat$survey_plot20_names, <span class="number">4</span>, pad =<span class="string">&quot;0&quot;</span>))</span><br><span class="line"><span class="comment">#### 提取20m样方名的前两位，作为20m样方的x坐标</span></span><br><span class="line">x20 &lt;-substr(btmdat$survey_plot20_names,start=<span class="number">1</span>, stop=<span class="number">2</span>)</span><br><span class="line"><span class="comment">#### 提取20m样方名的后两位，作为20m样方的y坐标</span></span><br><span class="line">y20 &lt;-substr(btmdat$survey_plot20_names,start=<span class="number">3</span>, stop=<span class="number">4</span>)</span><br><span class="line"><span class="comment">#### 计算每个个体的以大样地原点为原点的坐标</span></span><br><span class="line"><span class="comment">#### 无论是x轴，还是y轴，注意这里要-1</span></span><br><span class="line">btmdat$gx &lt;- g5x +(btmdat$location5x -<span class="number">1</span>)*<span class="number">5</span>+(<span class="built_in">as.numeric</span>(x20)-<span class="number">1</span>)*<span class="number">20</span></span><br><span class="line">btmdat$gy &lt;- g5y +(btmdat$location5y -<span class="number">1</span>)*<span class="number">5</span>+(<span class="built_in">as.numeric</span>(y20)-<span class="number">1</span>)*<span class="number">20</span></span><br><span class="line"><span class="comment">#### 去掉不需要的中间变量</span></span><br><span class="line">final_btmdat &lt;-subset(btmdat, select =!colnames(btmdat)%in%<span class="built_in">c</span>(<span class="string">&quot;location5x&quot;</span>, <span class="string">&quot;location5y&quot;</span>))</span><br><span class="line">head(final_btmdat)</span><br><span class="line">summary(final_btmdat)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/10/18/2017-10-18-plotsinfdp/" data-id="ckmt6y7nt008umgya8fixgn54" data-title="大型森林样地样方的命名与坐标转换" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%94%9F%E6%80%81/" rel="tag">生态</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/8/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/25/">25</a><a class="extend next" rel="next" href="/page/10/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/R%E7%BC%96%E7%A8%8B/" rel="tag">R编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%BA%E7%89%A9/" rel="tag">人物</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%99%E4%BD%9C/" rel="tag">写作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" rel="tag">可视化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E4%B9%A6/" rel="tag">图书</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" rel="tag">图像处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9C%B0%E7%90%86/" rel="tag">地理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A3%B0%E6%98%8E/" rel="tag">声明</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A9%E6%96%87/" rel="tag">天文</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%B9%E8%AF%9D%E5%BD%95/" rel="tag">对话录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E5%BE%97/" rel="tag">心得</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%A5%E5%91%8A/" rel="tag">报告</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E7%89%88/" rel="tag">排版</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%85%E4%B9%A1/" rel="tag">故乡</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%87%E6%9C%AC%E9%A6%86/" rel="tag">标本馆</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A4%8D%E7%89%A9%E5%88%86%E7%B1%BB/" rel="tag">植物分类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A4%8D%E7%89%A9%E5%AD%A6%E5%90%8D/" rel="tag">植物学名</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B1%82%E8%81%8C/" rel="tag">求职</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" rel="tag">版本控制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%80%81/" rel="tag">生态</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%80%81%E8%B5%84%E8%AE%AF/" rel="tag">生态资讯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A0%94%E7%A9%B6%E8%B5%84%E8%AE%AF/" rel="tag">研究资讯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%B3%BB%E7%BB%9F%E5%8F%91%E8%82%B2/" rel="tag">系统发育</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%9F%E8%AE%A1/" rel="tag">统计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B/" rel="tag">编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%8C%E6%91%84%E5%8C%86%E5%8C%86/" rel="tag">行摄匆匆</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A7%81%E9%97%BB%E5%BD%95/" rel="tag">见闻录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%97%E6%AD%8C/" rel="tag">诗歌</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9B%E5%8C%96/" rel="tag">进化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E6%83%B3/" rel="tag">随想</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A9%B3%E8%AE%BA/" rel="tag">驳论</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/R%E7%BC%96%E7%A8%8B/" style="font-size: 18.75px;">R编程</a> <a href="/tags/%E4%BA%BA%E7%89%A9/" style="font-size: 11.88px;">人物</a> <a href="/tags/%E5%86%99%E4%BD%9C/" style="font-size: 13.13px;">写作</a> <a href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" style="font-size: 12.5px;">可视化</a> <a href="/tags/%E5%9B%BE%E4%B9%A6/" style="font-size: 10px;">图书</a> <a href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" style="font-size: 11.88px;">图像处理</a> <a href="/tags/%E5%9C%B0%E7%90%86/" style="font-size: 17.5px;">地理</a> <a href="/tags/%E5%A3%B0%E6%98%8E/" style="font-size: 10.63px;">声明</a> <a href="/tags/%E5%A4%A9%E6%96%87/" style="font-size: 16.25px;">天文</a> <a href="/tags/%E5%AF%B9%E8%AF%9D%E5%BD%95/" style="font-size: 10px;">对话录</a> <a href="/tags/%E5%BF%83%E5%BE%97/" style="font-size: 10px;">心得</a> <a href="/tags/%E6%8A%A5%E5%91%8A/" style="font-size: 12.5px;">报告</a> <a href="/tags/%E6%8E%92%E7%89%88/" style="font-size: 13.75px;">排版</a> <a href="/tags/%E6%95%85%E4%B9%A1/" style="font-size: 10.63px;">故乡</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10.63px;">数据库</a> <a href="/tags/%E6%A0%87%E6%9C%AC%E9%A6%86/" style="font-size: 14.38px;">标本馆</a> <a href="/tags/%E6%A4%8D%E7%89%A9%E5%88%86%E7%B1%BB/" style="font-size: 10px;">植物分类</a> <a href="/tags/%E6%A4%8D%E7%89%A9%E5%AD%A6%E5%90%8D/" style="font-size: 10px;">植物学名</a> <a href="/tags/%E6%B1%82%E8%81%8C/" style="font-size: 10px;">求职</a> <a href="/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" style="font-size: 11.25px;">版本控制</a> <a href="/tags/%E7%94%9F%E6%80%81/" style="font-size: 16.88px;">生态</a> <a href="/tags/%E7%94%9F%E6%80%81%E8%B5%84%E8%AE%AF/" style="font-size: 10px;">生态资讯</a> <a href="/tags/%E7%A0%94%E7%A9%B6%E8%B5%84%E8%AE%AF/" style="font-size: 10px;">研究资讯</a> <a href="/tags/%E7%B3%BB%E7%BB%9F%E5%8F%91%E8%82%B2/" style="font-size: 10px;">系统发育</a> <a href="/tags/%E7%BB%9F%E8%AE%A1/" style="font-size: 18.13px;">统计</a> <a href="/tags/%E7%BC%96%E7%A8%8B/" style="font-size: 10.63px;">编程</a> <a href="/tags/%E8%A1%8C%E6%91%84%E5%8C%86%E5%8C%86/" style="font-size: 15px;">行摄匆匆</a> <a href="/tags/%E8%A7%81%E9%97%BB%E5%BD%95/" style="font-size: 10px;">见闻录</a> <a href="/tags/%E8%AF%97%E6%AD%8C/" style="font-size: 15.63px;">诗歌</a> <a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 19.38px;">软件</a> <a href="/tags/%E8%BF%9B%E5%8C%96/" style="font-size: 10.63px;">进化</a> <a href="/tags/%E9%9A%8F%E6%83%B3/" style="font-size: 11.25px;">随想</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 20px;">随笔</a> <a href="/tags/%E9%A9%B3%E8%AE%BA/" style="font-size: 10px;">驳论</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">February 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">October 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10/">October 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">August 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/07/">July 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/06/">June 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/05/">May 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/04/">April 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/02/">February 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">January 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/12/">December 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">November 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/10/">October 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/08/">August 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/07/">July 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/05/">May 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">April 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/03/">March 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/02/">February 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/12/">December 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/11/">November 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/09/">September 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/08/">August 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/07/">July 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06/">June 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/05/">May 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/04/">April 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/03/">March 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/01/">January 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/08/">August 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/07/">July 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/06/">June 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/05/">May 2009</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/05/13/life/">生活的答案</a>
          </li>
        
          <li>
            <a href="/2021/05/07/new-distribution/">新种、新分布与植物爱好者的“发现权”</a>
          </li>
        
          <li>
            <a href="/2021/03/26/2021-3-26/">使用hexo生成和部署网站</a>
          </li>
        
          <li>
            <a href="/2021/03/25/2021-03-25/">用pkgdown为R程序包建立网站</a>
          </li>
        
          <li>
            <a href="/2021/03/18/2021-03-18/">为什么《xxxx在XX研究中取得进展》这类文章很少有人转发？</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 Jinlong Zhang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>
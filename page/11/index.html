<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Jinlong Zhang&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Jinlong Zhang&#39;s blog">
<meta property="og:url" content="https://helixcn.github.io/page/11/index.html">
<meta property="og:site_name" content="Jinlong Zhang&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jinlong Zhang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Jinlong Zhang's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jinlong Zhang&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://helixcn.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-2017-8-28-drum" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/08/27/2017-8-28-drum/" class="article-date">
  <time class="dt-published" datetime="2017-08-27T09:52:54.000Z" itemprop="datePublished">2017-08-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/08/27/2017-8-28-drum/">鼓--写给村里的侠客</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>广袤的华北平原的上，</p>
<p>处暑时节，</p>
<p>一盏灯熄灭了，</p>
<p>他的秋天也在这一天停止；</p>
<p>&nbsp;</p>
<p>川流不息的潮白河边，</p>
<p>在那个名不见经传的小村里，</p>
<p>扭秧歌的鼓声停了，</p>
<p>侠客的大鼓陷入了永久的沉默；</p>
<p>&nbsp;</p>
<p>他没有了秋天，也就没有了冬天和春天，</p>
<p>明年的大年初一，</p>
<p>人们就不用去吸他家里的烟气，</p>
<p>也不用再求他家墙上那被熏黄的菩萨保佑；</p>
<p>&nbsp;</p>
<p>大兴安岭、张家口、二连浩特，</p>
<p>在他的故事里总是年轻三十岁。</p>
<p>村里人都说他会武术，能飞檐走壁。</p>
<p>他说，“这辈子不知道应该坐多少次牢，从未失手……”；</p>
<p>&nbsp;</p>
<p>从明天开始，</p>
<p>世界上便没有人再记得他的“丰功伟绩”，</p>
<p>连村里人也不再认识他，</p>
<p>只低头看庄稼或者手机；</p>
<p>&nbsp;</p>
<p>侠客的鼓声停了，</p>
<p>侠客消失在河畔的夕阳里，</p>
<p>侠客再也不会回来，</p>
<p>就跟从未存在过一样。</p>
<p>&nbsp;</p>
<p>2017年8月25日于香港大埔</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/08/27/2017-8-28-drum/" data-id="cl1egp2g2009s5884cl7a556h" data-title="鼓--写给村里的侠客" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%97%E6%AD%8C/" rel="tag">诗歌</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2017-8-24-resize-image" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/08/24/2017-8-24-resize-image/" class="article-date">
  <time class="dt-published" datetime="2017-08-23T18:50:54.000Z" itemprop="datePublished">2017-08-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/08/24/2017-8-24-resize-image/">ImageMagick批量调整多个文件夹下照片的尺寸</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ol>
<li> Install ImageMagick <a target="_blank" rel="noopener" href="https://www.imagemagick.org/script/index.php">https://www.imagemagick.org/script/index.php</a></li>
</ol>
<p>安装 ImageMagick </p>
<ol start="2">
<li> Make sure the command mogrify could be called from CMD</li>
</ol>
<p>安装时选择添加路径，以便mogrify组建能够从CMD调用。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#### Run the following R code</span></span><br><span class="line"></span><br><span class="line">运行以下R代码。location为照片所保存的文件夹。 </span><br><span class="line"></span><br><span class="line">location =<span class="string">&quot;D:/photos&quot;</span></span><br><span class="line">setwd(location)</span><br><span class="line"></span><br><span class="line">dirs &lt;- list.dirs(path = location, full.names =<span class="literal">TRUE</span>, recursive =<span class="literal">TRUE</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">1</span>:<span class="built_in">length</span>(dirs))&#123;</span><br><span class="line">   temp &lt;- dirs[i]</span><br><span class="line">   setwd(temp)</span><br><span class="line">   system(<span class="string">&quot;mogrify -resize 2909x4000 -density 72 *.jpg&quot;</span>)</span><br><span class="line">   print(paste(<span class="string">&quot;Resizing&quot;</span>,temp))</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>更多选项参见 mogrify的帮助。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/08/24/2017-8-24-resize-image/" data-id="cl1egp2g0009m588434s7104u" data-title="ImageMagick批量调整多个文件夹下照片的尺寸" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" rel="tag">图像处理</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2017-8-5-partitionfinder" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/08/05/2017-8-5-partitionfinder/" class="article-date">
  <time class="dt-published" datetime="2017-08-04T19:14:54.000Z" itemprop="datePublished">2017-08-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/08/05/2017-8-5-partitionfinder/">用PartitionFinder2 筛选系统发育分析分隔模型</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>PartitionFinder2是用来在建立进化树时筛选最优进化模型以及分区（分隔）方案的软件，是用Python2语言编写的。</p>
<p>核苷酸序列在不同位点有不同的突变速率。核苷酸序列又分为编码基因和非编码基因。编码基因中，密码子第一、二位往往较为稳定，第三位往往变异速率较高。非编码基因因为受到的选择压力一般较小，所以往往可保留更多突变。不同基因以及不同位点的突变速率不同，可能对所推断进化树的稳定性有很大影响。所以在多基因建立进化树过程中，设置分隔模型就显得很重要。</p>
<p>但是分隔模型怎样设置才算合理呢？在PartitionFinder软件开发出来之前，研究人员一般通过将不同基因分开，例如gene1、gene2、gene3，再将每个基因的不同位点分开如gene1_1、gene1_2、gene1_3作为分隔模型，以提高进化树的稳健性。</p>
<p>RAxML、MrBayes、BEAST等常用系统发育软件都支持分隔模型，但并不能用于确定最优化的分隔模型设定方案。在建树过程中，如果设置的分隔模型过多，则拟合的参数会过多，造成结果不准确；如果设置的分隔模型过少，或者不设置分隔模型、设置的不合理，也会造成进化树不准确。很多学者已经意识到这个问题，但是一直苦于没有很好的应对方法。</p>
<p>赤池信息量AIC整合了模型的似然值（Likelihood）以及所要估计的参数数量。模型选择的简约理论认为，AIC或者BIC最小的模型是最优的模型。如果似然值已经足够高，进一步增加模型的参数已经不能再显著提高似然值的情况下，可以认为已经找到了最优模型。但是，对于分隔模型的筛选来说，碱基替换模型与分区方式的组合数量非常多，如果要对每一种分区方案对应的碱基模型筛选出最优组合，在很多情况下几乎是不可能的。这是因为：首先，从碱基比对矩阵计算Likelihood是十分耗费时间的。其次，分隔模型的各种组合的数量呈几何级数增长，如果通过几个基因建树，则可能的分隔模型的数量已经超出了大部分计算机的计算能力。此时就需要引入分隔模型的启发式搜索（Heuristic Search）。</p>
<p>PartitionFinder的作者从原理上解决了以上的问题，并通过Python语言实现了相应的算法（Lanfear et al., 2012）。作者证明，PartitionFinder所得的分隔模型比之前的简单处理更加合理。不仅如此，PartitionFinder在获得最优化分隔方案后，同时会给出每个分隔模块所对应的最优进化模型。因此，Modeltest、jModeltest以及ProtTest等软件都已经被PartitionFinder所超越。事实上，2012年Lanfear介绍PartitionFinder的论文发表后，在google scholar上已经被引用了3223次（截至2019年1月19日）。</p>
<p>本文简述PartitionFinder的安装和使用，供同行参考。</p>
<h1 id="1-下载和安装"><a href="#1-下载和安装" class="headerlink" title="1. 下载和安装"></a>1. 下载和安装</h1><h2 id="1-1-下载"><a href="#1-1-下载" class="headerlink" title="1.1 下载"></a>1.1 下载</h2><p>PartitionFinder的下载网址<a target="_blank" rel="noopener" href="http://www.robertlanfear.com/partitionfinder/%EF%BC%8C%E4%B8%8B%E8%BD%BD%E5%90%8E%E7%94%A8WinRAR%E6%88%96%E8%80%857zip%E8%A7%A3%E5%8E%8B%E7%BC%A9%E3%80%82">http://www.robertlanfear.com/partitionfinder/，下载后用WinRAR或者7zip解压缩。</a></p>
<p>图1 PartitionFinder的结构</p>
<p>其中:</p>
<ul>
<li> <code>docs</code>为说明文档</li>
<li> <code>Examples</code> 文件夹下为示例文件，包含DNA序列、形态以及氨基酸序列三个例子</li>
<li> <code>partfinder</code> 文件夹下为实现算法的 python脚本</li>
<li> <code>Programs</code> 文件夹下为PHYML可执行文件，用来计算likelihood</li>
<li> <code>Submodules</code> 文件夹下包含了raxml文件夹，但是该文件夹为空。作者并未交代这个文件夹的内容。</li>
<li> <code>tests</code> 文件夹下为开发时的测试文件</li>
<li> <code>PartitionFinder.py</code> 为筛选DNA序列最优分隔模型的Python脚本</li>
<li> <code>PartitionFinderMorphology.py</code> 为筛选形态数据最优分隔模型的Python脚本</li>
<li> <code>PartitionFinderProtein.py</code> 为筛选氨基酸序列最优分隔模型的Python脚本</li>
</ul>
<p>运行PartitionFinder时，要根据数据类型分别调用三个Python脚本，不能混淆。</p>
<h2 id="1-2-安装Anaconda"><a href="#1-2-安装Anaconda" class="headerlink" title="1.2. 安装Anaconda"></a>1.2. 安装Anaconda</h2><p>PartitionFinder是用Python2开发的，依赖于numpy、pandas、pytables、pyparsing、scipy、sklearn 等若干程序包。在Windows下，安装这些程序包往往较为麻烦。作者Lanfear推荐已经预装了这些程序包的Anaconda Python。</p>
<p>Anaconda Python的下载地址为：</p>
<p><a target="_blank" rel="noopener" href="https://www.anaconda.com/distribution/">https://www.anaconda.com/distribution/</a></p>
<p>PartitionFinder只能在Python2.7上运行，不能使用Python3。因此，这里只能下载Anaconda Python2.7。</p>
<p>双击开始安装。</p>
<p>选择将以下路径添加到系统路径:</p>
<p><code>C:\ProgramData\Anaconda2;C:\ProgramData\Anaconda2\Scripts; C:\ProgramData\Anaconda2\Library\bin;</code> 以便程序能从命令行CMD运行。</p>
<p>图2 下载Anaconda Python2.7</p>
<h1 id="2-所需文件"><a href="#2-所需文件" class="headerlink" title="2. 所需文件"></a>2. 所需文件</h1><p>运行PartitionFinder，用户需要提供：</p>
<ol>
<li> phylip文件：包含所要读取的序列</li>
<li> partition_finder.cfg文件：包含模型筛选时设定的参数</li>
</ol>
<h2 id="2-1-PHYLIP文件"><a href="#2-1-PHYLIP文件" class="headerlink" title="2.1 PHYLIP文件"></a>2.1 PHYLIP文件</h2><p>phylip文件可以通过MUSCLE、CLUSTAL、MAFFT等比对序列的软件生成。如果是多基因序列，一般对每个基因分别比对，手工调整之后，再通过Geneious或phylotools（<a target="_blank" rel="noopener" href="https://github.com/helixcn/phylotools%EF%BC%89%E7%AD%89%E8%BD%AF%E4%BB%B6%E7%94%9F%E6%88%90supermatrix%EF%BC%8C%E4%BB%A5phylip%E6%A0%BC%E5%BC%8F%E5%AF%BC%E5%87%BA%E5%8D%B3%E5%8F%AF">https://github.com/helixcn/phylotools</a><a target="_blank" rel="noopener" href="https://github.com/helixcn/phylotools%EF%BC%89%E7%AD%89%E8%BD%AF%E4%BB%B6%E7%94%9F%E6%88%90supermatrix%EF%BC%8C%E4%BB%A5phylip%E6%A0%BC%E5%BC%8F%E5%AF%BC%E5%87%BA%E5%8D%B3%E5%8F%AF">）等软件生成supermatrix，以phylip格式导出即可</a>。</p>
<p>PHYLIP格式的详细定义，参考</p>
<p><a target="_blank" rel="noopener" href="http://www.atgc-montpellier.fr/phyml/usersguide.php?type=phylip">http://www.atgc-montpellier.fr/phyml/usersguide.php?type=phylip</a>。</p>
<p>PartitionFinder可以接受relaxed phylip，文件中的物种名最长可以达100个字符。</p>
<p>图3 Phylip文件</p>
<h2 id="2-2-partition-finder-cfg-文件"><a href="#2-2-partition-finder-cfg-文件" class="headerlink" title="2.2 partition_finder.cfg 文件"></a>2.2 partition_finder.cfg 文件</h2><p>PartitionFinder可以处理三种类型的数据，分别为：</p>
<ol>
<li> 编码区DNA序列</li>
<li> 氨基酸序列或非编码区DNA序列</li>
<li> 形态数据</li>
</ol>
<p>根据数据类型的差别，partition_finder.cfg文件会各有不同。</p>
<ol>
<li> 编码区DNA序列的配置文件要提供每个片段的</li>
<li></li>
<li> 起始和终止位置;</li>
<li> 编码位置（1、2、3）</li>
<li> 氨基酸序列和非编码区DNA序列，只需提供每个基因片段的起始和终止位置。</li>
<li>形态数据，无需直接指定模块，在计算时采用k-means聚类等算法以划分成不同的组别。</li>
</ol>
<p>图4 partition_finder.cfg文件的内容</p>
<h1 id="3-运行"><a href="#3-运行" class="headerlink" title="3. 运行"></a>3. 运行</h1><p>对于DNA序列：</p>
<ol>
<li><p> 在partitionFinder文件夹下创建一个新文件夹，命名为test20190219</p>
</li>
<li><p> 将examples/nucleotide文件夹下的test.phy文件以及partition_finder.cfg配置文件拷贝到test20190219文件夹下</p>
</li>
<li><p> 在CMD中，将工作目录转换到partitionFinder下</p>
</li>
<li><p> 调用PartitionFinder.py，格式如下：</p>
</li>
</ol>
<p><code>python PartitionFinder.py test20190219</code></p>
<ol start="5">
<li><p> 生成的结果会自己保存在test20190219文件夹下，并生成若干新文件（如log.txt）以及文件夹analysis。</p>
</li>
<li><p> 模型筛选的结果就保存在analysis/best_scheme.txt文件中。</p>
</li>
</ol>
<p>图5 运行partitionFinder</p>
<p>图6 partitionFinder的运行结果</p>
<h1 id="4-cfg配置文件"><a href="#4-cfg配置文件" class="headerlink" title="4. cfg配置文件"></a>4. cfg配置文件</h1><p>数据类型不同的PHYLIP文件，需要在partition_finder.cfg文件中设置不同的参数。</p>
<h2 id="4-1-cfg文件的参数"><a href="#4-1-cfg文件的参数" class="headerlink" title="4.1 cfg文件的参数"></a>4.1 cfg文件的参数</h2><h3 id="4-1-1-alignment"><a href="#4-1-1-alignment" class="headerlink" title="4.1.1 alignment"></a>4.1.1 alignment</h3><p>指出phylip的文件名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alignment &#x3D; test.phy;</span><br></pre></td></tr></table></figure>

<h3 id="4-1-2-branchlengths"><a href="#4-1-2-branchlengths" class="headerlink" title="4.1.2 branchlengths"></a>4.1.2 branchlengths</h3><p>在优化进化树枝长用于Likelihood计算时，是否各枝长一起优化。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">branchlengths &#x3D; linked;</span><br></pre></td></tr></table></figure>

<h3 id="4-1-3-models"><a href="#4-1-3-models" class="headerlink" title="4.1.3 models"></a>4.1.3 models</h3><p>models指定模型筛选的范围</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">models &#x3D; all;</span><br></pre></td></tr></table></figure>

<h3 id="4-1-4-model-selection"><a href="#4-1-4-model-selection" class="headerlink" title="4.1.4 model_selection"></a>4.1.4 model_selection</h3><p>model_selection模型筛选的标准，一般用aicc</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model_selection &#x3D; aicc;</span><br></pre></td></tr></table></figure>

<p>4.1.5 data_blocks</p>
<p>datablocks 设定数据分区，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[data_blocks]</span><br><span class="line">Gene1_pos1 &#x3D; 1-789\3;</span><br><span class="line">Gene1_pos2 &#x3D; 2-789\3;</span><br><span class="line">Gene1_pos3 &#x3D; 3-789\3;</span><br></pre></td></tr></table></figure>

<h3 id="4-1-6-search"><a href="#4-1-6-search" class="headerlink" title="4.1.6 search"></a>4.1.6 search</h3><p>模型筛选的算法 <code>search = greedy;</code></p>
<h2 id="4-2-部分参数详解"><a href="#4-2-部分参数详解" class="headerlink" title="4.2 部分参数详解"></a>4.2 部分参数详解</h2><h3 id="4-2-1-branchlengths"><a href="#4-2-1-branchlengths" class="headerlink" title="4.2.1 branchlengths"></a>4.2.1 branchlengths</h3><p>枝长是否相互关联，即是否对每个分隔模式独立估计进化树的枝长（目前只有BEAST、MrBayes、RAxML支持独立估算枝长）</p>
<h4 id="4-2-2-不同数据类型模型筛选的范围"><a href="#4-2-2-不同数据类型模型筛选的范围" class="headerlink" title="4.2.2 不同数据类型模型筛选的范围"></a>4.2.2 不同数据类型模型筛选的范围</h4><p>默认情况下<code>models=all</code>；如果用户需要使用更多模型，可设定<code>models=allx</code>，但应尽量避免，这是因为对少数几个模型进行优化要耗费很多时间。</p>
<ol>
<li> 对于<strong>离散性状</strong>，例如01性状（BINARY）以及无序质量性状，模型为(MULTISTATE)BINARY+G、BINARY+G+A、MULTISTATE+G、MULTISTATE+G+A，相关详情可参考RAxML的说明书。注意：性状数据模型不能计算AIC。</li>
<li> 对于<strong>DNA****序列</strong>，<code>models=all</code>将比较内置的56种模型。即由14种基本模型为基础：JC、K80、TrNef、K81、TVMef、TIMef、SYM、F81、HKY、TrN、K81uf、TVM、TIM、GTR，同时参考是否用Gamma或者I来表征不同位点进化速率的差异。注意：在分析DNA数据时，如果添加了 <code>--raxml</code>选项，则只计算GTR、GTR+G、GTR+I+G三种模型的AIC的值。</li>
<li> 对于<strong>氨基酸序列</strong>，默认情况下（使用PHYML计算），要比较的基本模型为：LG、WAG、MTREV、DAYHOFF、DCMUT、JTT、VT、BLOSUM62、CPREV、RTREV、MTMAM、MTART、HIVB、HIVW，每种又分成8种情况：LG、LG+F、LG+G、LG+G+F、LG+I、LG+I+F、LG+I+G、LG+I+G+F ，其中F为是否使用经验氨基酸频率。如果开启了RAxML选项，则会比较LG、WAG、MTREV、DAYHOFF、DCMUT、JTT、VT、BLOSUM62、CPREV、RTREV、MTMAM、MTART、HIVB、HIVW、MTZOA、PMB、JTTDCMUT、FLU、STMTREV、DUMMY、DUMMY2等21种模型，每个模型考虑6种情况。</li>
</ol>
<p>所筛选模型范围，如果改为<code>models = allx</code>，将进一步扩大：</p>
<ol>
<li> 对于DNA序列，使用PHYML时，会比较84种模型；使用RAxML时，会比较6种模型；</li>
<li> 对于氨基酸序列，使用PHYML不能获得结果，所以只能使用RAxML，比较的模型数量为195个。此时，所有的碱基频率或者氨基酸频率都是用极大似然估计获得的。</li>
</ol>
<h4 id="若从指定的模型中筛选："><a href="#若从指定的模型中筛选：" class="headerlink" title="若从指定的模型中筛选："></a>若从指定的模型中筛选：</h4><ol>
<li> 如果后续用mrbayes或者beast做分析，则需要设定models为 <code>models = mrbayes;</code>或 <code>models = beast;</code>，以便只从这两个软件中有的模型中筛选。</li>
<li> 用户也可设定PartitionFinder只考虑有Gamma或Gamma+I的相关的模型</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">models &#x3D; gamma;</span><br><span class="line">models &#x3D; gammai;</span><br></pre></td></tr></table></figure>

<ol>
<li> 或直接指定DNA模型的筛选范围:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">models &#x3D; JC, JC+G, HKY, HKY+G, GTR, GTR+G;</span><br></pre></td></tr></table></figure>

<ol>
<li> 指定氨基酸模型的筛选范围</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">models &#x3D; LG, LG+G, LG+G+F, WAG, WAG+G, WAG+G+F;</span><br></pre></td></tr></table></figure>

<ol>
<li> 指定模型选择的标准，作者推荐使用corrected AIC, 即AICc</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># model_selection: AIC | AICc | BIC</span><br><span class="line">model_selection &#x3D; aic;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-3-设定分区"><a href="#4-2-3-设定分区" class="headerlink" title="4.2.3 设定分区"></a>4.2.3 设定分区</h3><p>分区模块需要用<code>[data_blocks]</code>标记。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[data_blocks]</span><br><span class="line">Gene1_codon1 &#x3D; 1-1000\3; </span><br><span class="line">Gene1_codon2 &#x3D; 2-1000\3;</span><br><span class="line">Gene1_codon3 &#x3D; 3-1000\3;</span><br><span class="line">intron &#x3D; 1001-2000;</span><br></pre></td></tr></table></figure>

<p><code>[data_blocks]</code> 后紧跟基因以及位点的名称。如上面代码所示： 数据包括Gene1以及intron两部分。对于编码基因Gene1，由于密码子的1、2、3位的进化速率可能不同，因此可将1-1000位点的1、2、3碱基分开，分别作为单独的分区。</p>
<p>上述命令中：</p>
<p><code>Gene1_codon1 = 1-1000\3;</code> 表示：在第1-1000位点，从第1个碱基开始，步长为3的所有碱基</p>
<p><code>Gene1_codon2 = 2-1000\3;</code> 表示：在第2-1000位点，从第2个碱基开始，步长为3的所有碱基</p>
<p><code>Gene1_codon3 = 3-1000\3;</code> 表示：在第3-1000位点，从第3个碱基开始，步长为3的所有碱基</p>
<p><code>intron = 1001-2000;</code> 表示：从第1001-2000位点。由于是内含子，没有编码功能，所以不用将1、2、3位碱基分开。</p>
<p>如果是为MrBayes筛选分区模型，可在每行前增加charset关键词。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">charset Gene1_codon1 &#x3D; 1-1000\3;</span><br><span class="line">charset Gene1_codon2 &#x3D; 2-1000\3;</span><br><span class="line">charset Gene1_codon3 &#x3D; 3-1000\3;</span><br><span class="line">charset intron &#x3D; 1001-2000;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-4-搜寻策略"><a href="#4-2-4-搜寻策略" class="headerlink" title="4.2.4 搜寻策略"></a>4.2.4 搜寻策略</h3><p>根据数据量以及要筛选的分区组合的数目，PartitionFinder的搜索策略，要通过修改<code>search</code>参数做相应调整。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search: all | greedy | rcluster | rclusterf | hcluster | kmeans | user</span><br></pre></td></tr></table></figure>

<p>其中:</p>
<ul>
<li> <code>search = all</code> 一般用于12个分区以下；</li>
<li> <code>search = greedy</code> 10-100个分区；</li>
<li> <code>search = rcluster</code> 100个以上的分区；</li>
<li> <code>search = rclusterf</code> 只适用于RAxML选项开启时，尤其适用于有若干分析需要数据很大，同时ML需要优化很长时间时，可减少等待的时间；</li>
<li> <code>search = hcluster</code> 在研究中不推荐使用，仅为了开发而保留；</li>
<li> <code>search = user</code> 如果用户要对上述定义的分区组合，按照指定的方式筛选， 则可在<code>search = user</code>命令之后，指定搜索的策略。同一对括号中的基因表示将作为一个整体进行分析（参见英文版说明书第21页）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">together&#x3D; (Gene1_codon1, Gene1_codon2, Gene1_codon3, intron); </span><br><span class="line">intron_123  &#x3D; (Gene1_codon1, Gene1_codon2, Gene1_codon3) (intron); </span><br><span class="line">intron_12_3 &#x3D; (Gene1_codon1, Gene1_codon2) (Gene1_codon3) (intron); </span><br><span class="line">separate&#x3D; (Gene1_codon1) (Gene1_codon2) (Gene1_codon3) (intron);</span><br></pre></td></tr></table></figure>

<h3 id="4-2-5-搜寻策略调整举例"><a href="#4-2-5-搜寻策略调整举例" class="headerlink" title="4.2.5 搜寻策略调整举例"></a>4.2.5 搜寻策略调整举例</h3><h4 id="4-2-5-1-少于12个分区"><a href="#4-2-5-1-少于12个分区" class="headerlink" title="4.2.5.1 少于12个分区"></a>4.2.5.1 少于12个分区</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">branchlengths &#x3D; linked;</span><br><span class="line">models &#x3D; all;</span><br><span class="line">model_selection &#x3D; aicc;</span><br><span class="line">search &#x3D; all;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-5-2-对10-100个分区进行筛选"><a href="#4-2-5-2-对10-100个分区进行筛选" class="headerlink" title="4.2.5.2 对10-100个分区进行筛选"></a>4.2.5.2 对10-100个分区进行筛选</h4><p>超过100个等位基因的序列，需要用贪婪算法，基本步骤如下：</p>
<ol>
<li> 设定每个基因的起始位点以及结束位点，编码位置（1，2，3）等</li>
<li> 设定.cfg文件</li>
<li> 用raxml计算Likelihood</li>
</ol>
<p>对于DNA为：</p>
<p><code>python PartitionFinder.py InputFoldername --raxml</code></p>
<p>对于氨基酸为：</p>
<p><code>python PartitionFinderProtein.py InputFoldername --raxml</code></p>
<h4 id="4-2-5-3-超大数据（1000个）的分区筛选"><a href="#4-2-5-3-超大数据（1000个）的分区筛选" class="headerlink" title="4.2.5.3 超大数据（1000个）的分区筛选"></a>4.2.5.3 超大数据（1000个）的分区筛选</h4><p>超大型数据的位点（1000个以上），贪婪算法仍然太慢，此时推荐使用其他算法，以筛选最优分隔模型设置方案（Lanfear et al 2014），基本步骤如下:</p>
<ol>
<li> 设定每个基因的起始位点以及结束位点，编码位置（1、2、3）等</li>
<li> 更改.cfg文件，设定 <code>search = rcluster</code></li>
<li> 在cmd中运行PartitionFinder:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python PartitionFinder.py InputFoldername --raxml</span><br></pre></td></tr></table></figure>

<p>如仍然过慢，则更改recluster-max 参数:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python PartitionFinder.py InputFoldername --raxml --rcluster-max 100</span><br></pre></td></tr></table></figure>

<h3 id="4-2-6-用户自定义进化树"><a href="#4-2-6-用户自定义进化树" class="headerlink" title="4.2.6 用户自定义进化树"></a>4.2.6 用户自定义进化树</h3><p>在模拟研究中，可能会假设已知进化树的结构，探讨能否筛选到最优分区模型。此时可指定一棵进化树，在后续的分析中，该进化树的拓扑结构将被保留，但是枝长会根据GTR+I+GAMMA模型重新估计。指定进化树的命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALIGNMENT FILE # </span><br><span class="line">alignment &#x3D; test.phy; </span><br><span class="line">user_tree_topology &#x3D; tree.phy</span><br></pre></td></tr></table></figure>

<h1 id="5-输出结果"><a href="#5-输出结果" class="headerlink" title="5.输出结果"></a>5.输出结果</h1><p>生成的结果位于同一文件夹下的analysis文件夹中，该文件夹包含以下文件：</p>
<ol>
<li> <code>best_schemes.txt</code>纯文本文件，包括所筛选到的最优化分隔模型划分方案以及每个区块对应的最优模型以及RAxML和Nexus的分隔模型。</li>
<li> <code>subsets</code>文件夹:每个分区所对应的AICc值以及相应的筛选过程</li>
<li> <code>schemes</code>文件夹:所分析的分隔模型划分方案，详细的分析过程</li>
</ol>
<h1 id="6-命令行选项"><a href="#6-命令行选项" class="headerlink" title="6.命令行选项"></a>6.命令行选项</h1><p>在运行PartitionFinder时，可在命令行设定一些参数，具体如下：</p>
<ul>
<li> <code>--all-states</code> 仅用于k-means选项开启的情况，用于限定状态的数量</li>
<li> <code>--force-restart</code> 删除之前的分析，完全重新开始</li>
<li> <code>--min-subset-size</code> 设定子集的大小。只用于k-means算法（这个选项在说明书中交代得不是很清楚）</li>
<li> <code>--no-ml-tree</code> 设定此选项后，PartitionFinder将从Neighbour Joining（PHYML）或者Parsimony树（RAxML）开始。</li>
<li> <code>--processors N, -p N</code> 多线程计算，使用多个CPU内核。默认情况下，PartitionFinder会使用多个核，如果要控制所用到的核数，则应做相应设定。</li>
<li> <code>--quick, -q</code> 让PartitionFinder停止写一些记录文件，如果处理的数据特别大，有可能会提升速度，常用于使用贪婪算法的情况下。</li>
<li> <code>--raxml</code> 使用RAxML帮忙寻找最优分隔模型。</li>
<li> <code>--rcluster-max N</code> 设定cluster的数量，默认值N为1000或者分区数乘以10中的较大者，一般已经可以保证搜寻到正确的分隔模型。</li>
<li> <code>--rcluster-percent N</code> 设定要搜寻的所有可能的分区组成的百分数，默认为10%。该参数配合<code>--rcluster-max N</code>，可减少重复计算。</li>
<li> <code>--save-phylofiles</code> 保存数据分析过程中生成的进化树，主要用来纠错。</li>
<li> <code>--weights &quot;W_rate , W_base , W_model , W_alpha&quot;</code> 只用于<code>--raxml</code>或<code>hcluster or rcluster</code>选项开启时，分别表示几个参数的权重（参考说明书第26页）:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. the overall rate for a subset</span><br><span class="line">2. the base&#x2F;amino acid frequencies</span><br><span class="line">3. the model parameters</span><br><span class="line">4. the alpha parameter (which describes  gamma distributed rates across sites)</span><br></pre></td></tr></table></figure>

<h1 id="进一步阅读"><a href="#进一步阅读" class="headerlink" title="进一步阅读"></a>进一步阅读</h1><ul>
<li> Lanfear, R., Calcott, B., Ho, S. Y., &amp; Guindon, S. (2012). PartitionFinder: combined selection of partitioning schemes and substitution models for phylogenetic analyses. Molecular biology and evolution, 29(6), 1695-1701.</li>
</ul>
<h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h2 id="DNA序列碱基替换模型的三大要素"><a href="#DNA序列碱基替换模型的三大要素" class="headerlink" title="DNA序列碱基替换模型的三大要素"></a>DNA序列碱基替换模型的三大要素</h2><h3 id="1-碱基频率的估算"><a href="#1-碱基频率的估算" class="headerlink" title="1. 碱基频率的估算"></a>1. 碱基频率的估算</h3><p>模型需要提供ATCG频率的估计方法，目前有四种方法:</p>
<ol>
<li> equal 直接假定ATCG的频率相同</li>
<li> model 是从其他数据读取不同氨基酸的频率（仅用于氨基酸序列）</li>
<li> empirical 是直接从数据计算ATCG的频率</li>
<li> ML是用极大似然法估计ATCG的频率</li>
</ol>
<p>注意：在模型后添加<code>+X</code>，即可开启ML方法估计ATCG频率，例如<code>F81+X</code>，不过一般用户都是用empirical的方法估计频率，而且结果与ML的结果相差无几。</p>
<h3 id="2-碱基替换速率矩阵"><a href="#2-碱基替换速率矩阵" class="headerlink" title="2. 碱基替换速率矩阵"></a>2. 碱基替换速率矩阵</h3><p>用来表征碱基之间的转换速率（Relative rates of substitution），其中GTR模型最为复杂，需要估计所有6个参数。</p>
<h3 id="3-不同位点进化速率的差异"><a href="#3-不同位点进化速率的差异" class="headerlink" title="3. 不同位点进化速率的差异"></a>3. 不同位点进化速率的差异</h3><p>分成以下几种情形：</p>
<ol>
<li> 各位点速率恒定；</li>
<li> 部分位点进化树进化树速率恒定不变 （I用来表示进化速率恒定位点的比例）：GTR + I；</li>
<li> 假设各位点的进化速率符合Gamma分布（因为Gamma分布要估计的参数少，同时曲线有足够的变化，能够较好地拟合多数情况，所以用Gamma分布）：GTR + GAMMA；</li>
<li> 同时考虑各位点的进化树速率的差异以及恒定位点的比例：GTR + GAMMA + I。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/08/05/2017-8-5-partitionfinder/" data-id="cl1egp2g800a45884a9x9029o" data-title="用PartitionFinder2 筛选系统发育分析分隔模型" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2017-6-25-hugo" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/06/25/2017-6-25-hugo/" class="article-date">
  <time class="dt-published" datetime="2017-06-25T06:48:54.000Z" itemprop="datePublished">2017-06-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/06/25/2017-6-25-hugo/">用HUGO生成静态网站</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>HUGO是一个静态网站生成软件，用GO语言写成。主要用于将Markdown文档转换成静态网页。静态网页一般只包括html， Javascript以及CSS等。由于完全不需要在服务器上运行数据库以及服务器端的脚本语言，所以静态网页便于维护，安全性也更高些。</p>
<p>HUGO适于生成个人博客，个人网站等小型网站。有多重风格的主题可以选择。类似的静态网站生成器还有 Jekyll, Hexo, Gitbook, Pelican等。</p>
<p>HUGO需要使用命令行，所以Windows用户在使用时，需要为软件添加系统路径，以便在cmd中直接可以调用。</p>
<p>HUGO下载: <a target="_blank" rel="noopener" href="https://gohugo.io/">https://gohugo.io/</a></p>
<p>苹果电脑下的安装: <code>brew update &amp;&amp; brew install hugo</code></p>
<p>查看帮助: <code>hugo help</code></p>
<p>查看版本: <code>hugo version</code></p>
<p>生成新网站模板，例如要建立一个名为 bookshelf的网站 <code>hugo new site bookshelf</code></p>
<p>添加新的markdown文件 <code>hugo new post/good-to-great.md</code></p>
<p>查看content里面的内容 <code>tree -a content</code></p>
<p>启动hugo的服务器， hugo的本地版服务器便于网页的浏览和调试。同时生成网页的速度极快，且保存后都可以直接刷新，不必再重新开启服务器。 <code>hugo server</code></p>
<p>打开网络浏览器，如FireFox， Chrome等，输入以下网址 <code>http://localhost:1313/</code></p>
<p>HUGO网站生成的模板并不提供主题。但是要成功生成网页，就必须要指定模板。查看模板的网页为: <a target="_blank" rel="noopener" href="https://themes.gohugo.io/">https://themes.gohugo.io/</a></p>
<p>要使用网站模板，需要先建立一个名为theme的文件夹，并将工作目录转移到该文件夹下。以便在生成网站时，按照一定的主题生成网站。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir themes &amp;&amp; cd themes</span><br></pre></td></tr></table></figure>

<p>用git下载不同网页风格主题 <code>git clone git@github.com:dim0627/hugo_theme_robust.git</code></p>
<p>按照指定主题生成整个网站，生成的网站在public文件夹下。 <code>hugo --theme=hugo_theme_robust</code></p>
<p>使用disqus留言板 (<a target="_blank" rel="noopener" href="https://disqus.com/)%EF%BC%8C%E9%9C%80%E8%A6%81%E5%9C%A8config.toml%E4%B8%AD%E8%AE%BE%E5%AE%9A%E3%80%82%E6%9B%B4%E6%94%B9%E5%8F%82%E6%95%B0%E4%B8%BA%EF%BC%9A">https://disqus.com/)，需要在config.toml中设定。更改参数为：</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Params]</span><br><span class="line"> Author &#x3D; &quot;XXXXX&quot;</span><br><span class="line"> disqusShortname &#x3D; &quot;xxxxx&quot;</span><br></pre></td></tr></table></figure>

<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="http://nanshu.wang/post/2015-01-31/">http://nanshu.wang/post/2015-01-31/</a></p>
<p><a target="_blank" rel="noopener" href="https://gohugo.io/overview/quickstart/">https://gohugo.io/overview/quickstart/</a></p>
<p>Markdown语法: <a target="_blank" rel="noopener" href="https://daringfireball.net/projects/markdown/syntax">https://daringfireball.net/projects/markdown/syntax</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/06/25/2017-6-25-hugo/" data-id="cl1egp2g0009k58841ce40zvg" data-title="用HUGO生成静态网站" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2017-05-15-search" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/05/15/2017-05-15-search/" class="article-date">
  <time class="dt-published" datetime="2017-05-15T01:29:54.000Z" itemprop="datePublished">2017-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/05/15/2017-05-15-search/">基于DataTables Javascript库建立本地版物种信息快速查询网页</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>小型标本馆可能并没有足够的经费开发自己的数据管理系统。然而建立自己的标本查询系统又是很多小型标本馆梦寐以求的。对于藏品只有几万份的标本馆来说，一般在开发服务器版本的网页之前， 可以考虑先建立一个基于局域网的本地小型查询系统。</p>
<p>html和Javascript是开发过程中绕不开的两种语言：html用来生成网页布局， 而javascript可用来实现本地版本的动态网页。</p>
<p>在网页中用表格展示数据表， 已经有若干JS脚本, DataTables （<a target="_blank" rel="noopener" href="https://datatables.net/%EF%BC%89">https://datatables.net/）</a> 就是其中之一。这里主要介绍将IUCN数据导入DataTables, 并通过html展示。标本记录数据与之类似。</p>
<h3 id="1-创建文件夹"><a href="#1-创建文件夹" class="headerlink" title="1. 创建文件夹"></a>1. 创建文件夹</h3><p>先创建文件夹， 改名为IUCN，例如位置在 <code>C:UsersjlzhangDesktopIUCN</code></p>
<h3 id="2-下载DataTables库"><a href="#2-下载DataTables库" class="headerlink" title="2. 下载DataTables库"></a>2. 下载DataTables库</h3><p>解压缩到IUCN文件夹下。 以版本DataTables-1.10.15为例， 所有内容解压缩到<code>C:Users/jlzhang/Desktop/IUCN/DataTables-1.10.15</code></p>
<h3 id="3-创建index-html文件"><a href="#3-创建index-html文件" class="headerlink" title="3. 创建index.html文件"></a>3. 创建index.html文件</h3><p>创建一个叫做index.html的纯文本文件。</p>
<p>代码的编码改为UTF-8。拷贝如下内容</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;<span class="name">meta</span>  <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span><span class="attr">content</span>=<span class="string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">link</span>  <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span><span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span><span class="attr">href</span>=<span class="string">&quot;./DataTables-1.10.15/media/css/jquery.dataTables.css&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;<span class="name">table</span>  <span class="attr">id</span>=<span class="string">&quot;example&quot;</span><span class="attr">class</span>=<span class="string">&quot;display&quot;</span><span class="attr">width</span>=<span class="string">&quot;100%&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span><span class="attr">charset</span>=<span class="string">&quot;utf8&quot;</span><span class="attr">src</span>=<span class="string">&quot;./DataTables-1.10.15/media/js/jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span><span class="attr">charset</span>=<span class="string">&quot;utf8&quot;</span><span class="attr">src</span>=<span class="string">&quot;./DataTables-1.10.15/media/js/jquery.dataTables.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span><span class="attr">charset</span>=<span class="string">&quot;utf8&quot;</span><span class="attr">src</span>=<span class="string">&quot;./dat.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"> $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">   $(<span class="string">&#x27;#example&#x27;</span>).DataTable(&#123;       <span class="attr">data</span>:dataSet,       <span class="attr">columns</span>:[</span></span><br><span class="line"><span class="javascript">           &#123; <span class="attr">title</span>:   <span class="string">&quot;科&quot;</span>     &#125;,<span class="comment">//barcode</span></span></span><br><span class="line"><span class="javascript">           &#123; <span class="attr">title</span>:   <span class="string">&quot;中文科名&quot;</span>  &#125;,<span class="comment">//locationof the storage</span></span></span><br><span class="line"><span class="javascript">           &#123; <span class="attr">title</span>:   <span class="string">&quot;学名&quot;</span>&#125;,</span></span><br><span class="line"><span class="javascript">           &#123; <span class="attr">title</span>:   <span class="string">&quot;中文名&quot;</span>   &#125;,</span></span><br><span class="line"><span class="javascript">           &#123; <span class="attr">title</span>:   <span class="string">&quot;濒危等级&quot;</span>     &#125;,</span></span><br><span class="line"><span class="javascript">           &#123; <span class="attr">title</span>:   <span class="string">&quot;是否特有&quot;</span>   &#125;</span></span><br><span class="line"><span class="javascript">           ],<span class="comment">//Link to the photo</span></span></span><br><span class="line">     &#125;);  </span><br><span class="line">    &#125;);      </span><br><span class="line"> <span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>其中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link  rel=<span class="string">&quot;stylesheet&quot;</span>type=<span class="string">&quot;text/css&quot;</span>href=<span class="string">&quot;./DataTables-1.10.15/media/css/jquery.dataTables.css&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<p>是引用dataTables所带的css样式表， 以调整网页的外观。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script  type=<span class="string">&quot;text/javascript&quot;</span>charset=<span class="string">&quot;utf8&quot;</span>src=<span class="string">&quot;./DataTables-1.10.15/media/js/jquery.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>是读取 JQuery函数库。因为dataTable是依赖于JQuery库的， 所以必须要先载入。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script  type=<span class="string">&quot;text/javascript&quot;</span>charset=<span class="string">&quot;utf8&quot;</span>src=<span class="string">&quot;./DataTables-1.10.15/media/js/jquery.dataTables.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>是读取 jquery.dataTables.js 里面的函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script  type=<span class="string">&quot;text/javascript&quot;</span>charset=<span class="string">&quot;utf8&quot;</span>src=<span class="string">&quot;./dat.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>是读取 dat.js中的数据。该数据以Json格式保存。</p>
<h3 id="4-将数据导入-dat-js文件"><a href="#4-将数据导入-dat-js文件" class="headerlink" title="4. 将数据导入 dat.js文件"></a>4. 将数据导入 dat.js文件</h3><p>IUCN_CN.xlsx 中保存的是IUCN红色名录数据。用以下R代码将Excel中的数据保存为Json数据。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#### Rscript for generatingjson data</span></span><br><span class="line">setwd(<span class="string">&quot;C:/Users/jlzhang/Desktop/IUCN&quot;</span>)</span><br><span class="line">library(openxlsx)</span><br><span class="line">library(jsonlite)</span><br><span class="line">dat &lt;- read.xlsx(<span class="string">&quot;IUCN_CN.xlsx&quot;</span>)<span class="comment">#### </span></span><br><span class="line">colnames(dat)</span><br><span class="line">rrrr &lt;- toJSON(dat, dataframe=<span class="string">&quot;values&quot;</span>)</span><br><span class="line">writeLines(<span class="built_in">c</span>(<span class="string">&quot;vardataSet = &quot;</span>, rrrr, <span class="string">&quot;;&quot;</span>),<span class="string">&quot;dat.js&quot;</span>,useBytes =<span class="literal">TRUE</span>)</span><br><span class="line"><span class="comment">###useBytes 保证存储的数据是UTF-8格式</span></span><br></pre></td></tr></table></figure>

<p>IUCN_CN.xlsx 数据表对应的各列名称为:</p>
<p>科, 中文科名, 学名, 中文种名,濒危等级, 是否中国特有</p>
<p>因此， 在html文件的Javascript脚本中创建表格对象时， 要设定DataTable对象要展示的各列。</p>
<p>对应的Javascript代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"> $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   $(<span class="string">&#x27;#example&#x27;</span>).DataTable(&#123;       </span><br><span class="line">   data:dataSet,       </span><br><span class="line">   columns:[</span><br><span class="line">           &#123; <span class="attr">title</span>:   <span class="string">&quot;科&quot;</span>     &#125;,<span class="comment">//barcode</span></span><br><span class="line">           &#123; <span class="attr">title</span>:   <span class="string">&quot;中文科名&quot;</span>  &#125;,<span class="comment">//locationof the storage</span></span><br><span class="line">           &#123; <span class="attr">title</span>:   <span class="string">&quot;学名&quot;</span>&#125;,</span><br><span class="line">           &#123; <span class="attr">title</span>:   <span class="string">&quot;中文名&quot;</span>   &#125;,</span><br><span class="line">           &#123; <span class="attr">title</span>:   <span class="string">&quot;濒危等级&quot;</span>     &#125;,</span><br><span class="line">           &#123; <span class="attr">title</span>:   <span class="string">&quot;是否特有&quot;</span>   &#125;</span><br><span class="line">           ],<span class="comment">//Link to the photo</span></span><br><span class="line">     &#125;);  </span><br><span class="line">    &#125;);      </span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="5-浏览-index-html-文件"><a href="#5-浏览-index-html-文件" class="headerlink" title="5. 浏览 index.html 文件"></a>5. 浏览 index.html 文件</h3><p>保存index.html 文件。 用Firefox或者Chrome打开， 即可浏览。DataTable将导入dat.js数据，并以表格的形式展示出来，并提供表格的查找， 排序等功能。如果已经标本已经数字化， 则可以在R中，生成文件的链接。</p>
<p>本文所述 源代码和数据下载  </p>
<p><a target="_blank" rel="noopener" href="http://blog.sciencenet.cn/home.php?mod=attachment&id=98213">IUCN.zip</a></p>
<p><a target="_blank" rel="noopener" href="http://image.sciencenet.cn/home/201705/15/172728lhiqly2nxwnzlbnq.jpg"><img src="http://blog.sciencenet.cn/static/js/grey.gif" alt="img"></a></p>
<p>图1. IUCN物种分布示例数据</p>
<p><a target="_blank" rel="noopener" href="http://image.sciencenet.cn/home/201705/15/1727453t8e6r1wddzrdj18.jpg"><img src="http://blog.sciencenet.cn/static/js/grey.gif" alt="img">
</a></p>
<p>图2 用DataTable生成的网页版可查询页面</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/05/15/2017-05-15-search/" data-id="cl1egp2fq008p58846jax0nnj" data-title="基于DataTables Javascript库建立本地版物种信息快速查询网页" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%87%E6%9C%AC%E9%A6%86/" rel="tag">标本馆</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2017-4-25-baotianman" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/04/24/2017-4-25-baotianman/" class="article-date">
  <time class="dt-published" datetime="2017-04-24T10:54:54.000Z" itemprop="datePublished">2017-04-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/04/24/2017-4-25-baotianman/">宝天曼随想</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>常常想起在宝天曼样地做调查的日子，想起那时一起调查的同学，还有工人师傅。那是在2009年的秋天。那时候虽然读书，但不像现在这样漂泊，工作也不像现在两点一线。在宝天曼的工作虽然艰苦，但是那时候日子足够简单，那是一种简单的幸福。</p>
<p>由于宝天曼25公顷样地的调查需要在入冬前完成，我们研究组十几位硕士博士研究生被派往河南宝天曼自然保护区协助调查。</p>
<p>宝天曼属伏牛山脉，位于河南西南部，南阳市内乡县境内。由于时间紧迫，我们十来个同学一起，第二天就要从北京乘飞机到南阳。飞抵南阳，飞机绕着机场最少飞了三圈，失重几次，还好安全落地了，我着实吓得不轻。匆匆忙下了飞机。不记得当时怎么坐上了去宝天曼的车，车先开往内乡县城，车外由平原逐渐变成丘陵，车子再沿着盘山公路一直开，开到天黑。不知道经过多少急弯，车最后开到华北最后一块没被完全破坏森林的核心地区。</p>
<p>路的尽头是一座三层楼的酒店，装修得清雅简约。杜老师就在这里组织调查。第二天就要上山了。每个人领取了迷彩服、绿胶鞋，戴了帽子，准备了干粮，就要开始一天的工作。群山高耸，远处的山顶上见到大块石壁，石壁之间生长出绿色。</p>
<p>从宾馆到样地要步行45分钟，先沿着公路走约十分钟，然后上山要半个多小时。小路曲曲弯弯，布满青苔。山上最多的是锐齿槲栎、漆树、暖木、马尾松、黄山松、玉玲花、千金榆，也有珍贵的望春玉兰、象白蜡、连香树等。连续走了将近五十分钟，终于到达样地边缘，红绳为界。大家早已累得气喘吁吁，一般都要停下来休息十分钟。</p>
<p>树上挂满了刻有红色数字的铝牌：每一棵树都要编号，由八位数字组成，前四位表示所在20m样方的横纵坐标，如0510表示从原点数从西向东第5个样方，从南向北数，第10个样方。后四位表示样方内的顺序号。原点就在整个样地的西南角，一个特别陡峭和偏僻的地方。记得附近有几棵铁杉，还有钻地枫一类的灌木。每个20m的样方又要分成16个5m见方的小方格，都已拉上尼龙绳。</p>
<p>我们要做的，就是给树挂上挂牌，辨认树种，按照刷好的油漆测量胸径超过1cm所有枝条的直径，并且测量每棵树在5m小方格里面的横纵坐标，以便最后归算到整个大样地所在的坐标系中。25公顷样地是边长500m的正方形，里面有625个20m样地，10000个5m小样方。我们到达时调查已经进行了一半左右，由于担心不能在今年完成，组里特地安排我们在入冬前带领学生还有当地的工人师傅做完调查。否则叶子落了，树种将无法鉴定，地面湿滑结冰，工作起来也会很危险。连续40天的工作就这样开始了。</p>
<p>上山基本上是风雨无阻。当然，如果真是下大雨，还是必须要下山的，秋雨特别凉，何况还是海拔900米的林区。</p>
<p>我们几个都是作为队长，每人带两个人。队里的工人师傅挂牌，队长负责测量并报告树种，另一个做记录。</p>
<p>宝天曼样地很陡，有些地方是长达五六十米的倾斜石壁，石缝间长着灌木，此时仍然要去到石壁中间测量，让人觉得十分危险。有些地段长着很多灰栒子，这是一种灌木，有时候分枝多达四五十条，全部需要测量，大家都怕调查这样的样方，栒子一旦出现，那其他灌木也都较多,如毛樱桃、丁香、绣线菊、六道木等。每个人都为遇到这样的样方发愁。</p>
<p>一般情况下，三个人组成的小分队一天能完成两到三个样方的调查。遇到灌木多的，可能只能完成半个。进展缓慢时，一般都灰心丧气。当然，最开心的是一天的调查工作顺利完成。有时候，看到样子神奇的猴头菇也是让人很开心，只可惜当时没有拍照。</p>
<p>日复一日。</p>
<p>最大的问题是吃不好。每天中午带两个馒头，两个煮鸡蛋, 一包榨菜，连续四十天，几乎天天如此。到最后我只吃鸡蛋。回到宾馆，伙食只记得有炒土豆和紫菜汤，或者炒白菜，不见一丁点儿肉食。周末会改善一次，厨房会把其他客人吃剩下的肉菜和土豆烩在一起，给我们吃：一星期见不到什么油水，终于见到一点儿，已经管不了那么多。饭菜很快一抢而光。最盼望就是有人能进城，捎一点儿花生米或者乡巴佬卤蛋过来，最好能带上一个鸡腿，以便好好享受一顿大餐。</p>
<p>天气越来越冷，我们也不得不加上了厚衣服。</p>
<p>除了调查，还要检查调查的准确性，也就是独立再多调查一次，如果天气不好，则要在室内整理并录入数据。数据都要求双盲录入，也就是同一批数据，由不同的人分别输入，比较两个版本的差别，以互相校正。时间一点儿也没有浪费。</p>
<p>空气清冽，溪水甘甜，树木相伴，鸟鸣婉转，这就是每天的工作的地方。</p>
<p>调查完成的那一天，正好冷空气袭来，吹走了连续几日的乌云，雨后清新无比，树叶已经泛黄，天空高得爽朗，金色与蓝色那么养眼，美得让人陶醉。</p>
<p>在宝天曼一起调查的同学，如今已分散在北京、广东、上海、江西、香港等不同的地方。8年过去了，那时跟我一起调查的大学生们，你们还好吗？帮我们挂牌的工人师傅们，还愿意跟我们一起上山吗？ 宝天曼的树木们，你们有长大吗？宝天曼的天，还是蓝得那么让人心醉吗？</p>
<p>2017年4月25日 金龙 于 香港大埔</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/04/24/2017-4-25-baotianman/" data-id="cl1egp2fz009i5884dphv5rvs" data-title="宝天曼随想" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2017-4-21-plantlist23" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/04/21/2017-4-21-plantlist23/" class="article-date">
  <time class="dt-published" datetime="2017-04-20T17:00:54.000Z" itemprop="datePublished">2017-04-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/04/21/2017-4-21-plantlist23/">用plantlist批量查找植物学名、分布保护等级的信息</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>完整文档请参考</p>
<p><a target="_blank" rel="noopener" href="http://blog.sciencenet.cn/blog-255662-846673.html">http://blog.sciencenet.cn/blog-255662-846673.html</a></p>
<p>plantlist程序包已经升级到0.3.0, 新增CTPL2函数， 用来通过中文名查询学名，科属， 分布区， 海拔， IUCN保护等级等信息。 欢迎试用并提出宝贵意见。 </p>
<p>源代码 参见 <a target="_blank" rel="noopener" href="https://www.github.com/helixcn/plantlist">https://www.github.com/helixcn/plantlist</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/04/21/2017-4-21-plantlist23/" data-id="cl1egp2fx009g58848rdu0laa" data-title="用plantlist批量查找植物学名、分布保护等级的信息" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2017-4-18-forest" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/04/18/2017-4-18-forest/" class="article-date">
  <time class="dt-published" datetime="2017-04-18T06:52:54.000Z" itemprop="datePublished">2017-04-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/04/18/2017-4-18-forest/">4月18日的森林</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>大帽山的春色， </p>
<p>随着阳光， </p>
<p>随着鸟鸣， </p>
<p>随着窗口的阵阵热风， </p>
<p>直扑脸颊</p>
<p>&nbsp;</p>
<p>寂寞终于被驱散， </p>
<p>三个人在这天下午， </p>
<p>行走林间： </p>
<p>不知道为什么开始， </p>
<p>不知道为什么结束， </p>
<p>不知道为什么叶子要跌落凡尘，</p>
<p>不知道为什么山上满是云朵， </p>
<p>更不知道为什么要经历那么多寒暑</p>
<p>&nbsp;</p>
<p>森林里辨不清方向： </p>
<p>树的尽头还是树， </p>
<p>山的尽头还是山。</p>
<p>&nbsp;</p>
<p>缘溪行，</p>
<p>忘路之远近，</p>
<p>却早已不见那渔人。</p>
<p>&nbsp;</p>
<p>此时此地，</p>
<p>森林就成了麦田：</p>
<p>穿行在森林，</p>
<p>就和小时候穿行在麦田一样</p>
<p>2017年4月18日</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/04/18/2017-4-18-forest/" data-id="cl1egp2fv009c5884fbandrb2" data-title="4月18日的森林" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%97%E6%AD%8C/" rel="tag">诗歌</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2017-4-12-exif" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/04/12/2017-4-12-exif/" class="article-date">
  <time class="dt-published" datetime="2017-04-11T22:33:54.000Z" itemprop="datePublished">2017-04-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/04/12/2017-4-12-exif/">用exiftool一次为多个文件夹下的照片添加经纬度</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Exiftool是用来读写照片exif信息的软件， 将GPS轨迹 gpx文件放在照片文件夹下，可以一次性为该文件夹下所有照片添加GPS经纬度信息。 添加过经纬度的照片在GeoSetter的软件， 或者其他智能手机中查看十分方便。为照片自动匹配经纬度信息已经成为当前生物多样性调查中的基本步骤之一。 如果积累了较多的照片在不同文件夹中，同时又要一次性更新该文件夹下的所有照片，就稍显麻烦。这里介绍如何用R驱动exiftool， 遍历所有的文件夹， 并更新每张照片的exif信息。</p>
<p>Exiftool （<a target="_blank" rel="noopener" href="http://blog.sciencenet.cn/www.sno.phy.queensu.ca/~phil/exiftool/">www.sno.phy.queensu.ca/~phil/exiftool/</a>）下载后解压缩， 将 exiftool(-k).exe 改名为exiftool.exe。 放在路径上没有中文的文件夹，如 <code>C:\Program Files\exiftools</code>， 并将该路径添加到系统路径中。</p>
<p>将exiftool添加到系统路径：我的电脑 &gt; 属性 &gt; 高级系统设置&gt; 环境变量。</p>
<p>在系统变量部分中，找到并选择 PATH环境变量。单击编辑。</p>
<p>新建系统变量窗口中，新建 PATH 环境变量的值，加上双引号里面的内容, “C:\Program  Files\exiftools” 单击确定。通过单击确定关闭所有剩余窗口。</p>
<p>运行以下R脚本：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">setwd(<span class="string">&quot;C:/Users/photos&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#### 航迹gpx文件名</span></span><br><span class="line">geotag &lt;- <span class="string">&quot;place.gpx&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#### 所有相册的根目录</span></span><br><span class="line">parent.folder &lt;- <span class="string">&quot;C:/Users/photos&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#### 列出所有子目录</span></span><br><span class="line">dirs &lt;- list.dirs(path = parent.folder, full.names =<span class="literal">TRUE</span>, recursive =<span class="literal">TRUE</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#### copy the gpx file toeach subfolder</span></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">2</span>:<span class="built_in">length</span>(dirs))&#123;</span><br><span class="line">  setwd(dirs[i])</span><br><span class="line">  <span class="comment">#### 将gpx文件拷贝到每一个子文件夹。如果每个文件夹已经有gpx文件， 则请忽略。</span></span><br><span class="line">  file.copy(from =<span class="string">&quot;C:/Users/photos/place.gpx&quot;</span>, to = geotag, overwrite =<span class="literal">TRUE</span>)</span><br><span class="line">  <span class="comment">#### 运行exiftool 命令行</span></span><br><span class="line">  system(paste(<span class="string">&quot;exiftool -geotag &quot;</span>, geotag, <span class="string">&quot;./&quot;</span>))</span><br><span class="line">  <span class="comment">#### unlink(geotag)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注： 本文是应华南农业大学曾思金博士的要求而编写的。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/04/12/2017-4-12-exif/" data-id="cl1egp2ft009258842ostfxtp" data-title="用exiftool一次为多个文件夹下的照片添加经纬度" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" rel="tag">图像处理</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2017-4-11-plantlist" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/04/10/2017-4-11-plantlist/" class="article-date">
  <time class="dt-published" datetime="2017-04-10T08:01:54.000Z" itemprop="datePublished">2017-04-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/04/10/2017-4-11-plantlist/">plantlist程序包已经恢复从Rforge下载或安装</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>完整文档请参考  <a target="_blank" rel="noopener" href="http://blog.sciencenet.cn/blog-255662-846673.html">http://blog.sciencenet.cn/blog-255662-846673.html</a></p>
<p>R程序包plantlist可以批量查询高等植物的APG科属、科编号以及学名在ThePlantList网站数据库中的接受状态及对应接受名等。速度快过taxize等同类程序包10倍左右，函数参数便于理解，简单易用。除了从github/helixcn安装外，现在已恢复从Rforge安装。plantlist是本人在2014年1月在中科院昆明植物研究所主讲R语言课程时编写的，主要用来辅助进行系统发育多样性研究以及方便标本馆管理。</p>
<p>随着R软件的不断升级， plantlist程序包旧版本中的一些编码问题逐渐暴露。 特别是内置接受名和异名数据库中，命名人中出现的非ASCII字符在转换过程中会出错， 这个错误甚至导致Rforge上 （<a target="_blank" rel="noopener" href="https://r-forge.r-project.org/R/?group_id=2052%EF%BC%89plantlist%E7%A8%8B%E5%BA%8F%E5%8C%85%E4%B8%8D%E8%83%BD%E6%88%90%E5%8A%9F%E7%BC%96%E8%AF%91%E4%B8%BAwindows%E7%89%88%E6%9C%AC%E3%80%82">https://r-forge.r-project.org/R/?group_id=2052）plantlist程序包不能成功编译为windows版本。</a></p>
<p>正巧北京大学池秀莲老师咨询如何安装plantlist的问题，于是决定解决这一问题。</p>
<p>非ASCII字符不能成功转换， 目前似乎只有两种方法：</p>
<ol>
<li>去掉非ASCII字符，或者用近似的字母代替原来的字母。 </li>
</ol>
<p>StackOverFlow上Wickham提出的一个解决方案， 举例如下： </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- <span class="built_in">c</span>(<span class="string">&quot;Ekstru00f8m&quot;</span>, <span class="string">&quot;Ju00f6reskog&quot;</span>, <span class="string">&quot;biu00dfchen Zu00fcrcher&quot;</span>)</span><br><span class="line">x</span><br><span class="line"><span class="comment">#&gt; [1] &quot;Ekstrøm&quot;         &quot;Jöreskog&quot;        &quot;bißchen Zürcher&quot;</span></span><br><span class="line"></span><br><span class="line">stringi::stri_trans_general(x, <span class="string">&quot;latin-ascii&quot;</span>)</span><br><span class="line"><span class="comment">#&gt; [1] &quot;Ekstrom&quot;          &quot;Joreskog&quot;         &quot;bisschen Zurcher&quot;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>用UTF编码的转义字符。<br>未能查到从GB2312或者GB18030转换为UTF8字符的算法。 但是有一种方式可以实现的。 那就是使用 openxlsx程序包先将字符以xlsx格式保存在Excel文件中， 保存后用read.xlsx读取， 生成了UTF8转义字符串。 经过转换后的字符串可以在R程序包中正常处理了。</li>
</ol>
<p><a target="_blank" rel="noopener" href="http://image.sciencenet.cn/home/201704/11/000446e1k4pzee3vk1sese.jpg"><img src="http://image.sciencenet.cn/home/201704/11/000446e1k4pzee3vk1sese.jpg" alt="img"></a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://helixcn.github.io/2017/04/10/2017-4-11-plantlist/" data-id="cl1egp2fu009658842qxhh1ej" data-title="plantlist程序包已经恢复从Rforge下载或安装" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/10/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/12/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/R%E7%BC%96%E7%A8%8B/" rel="tag">R编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%BA%E7%89%A9/" rel="tag">人物</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%99%E4%BD%9C/" rel="tag">写作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" rel="tag">可视化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E4%B9%A6/" rel="tag">图书</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" rel="tag">图像处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9C%B0%E7%90%86/" rel="tag">地理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A3%B0%E6%98%8E/" rel="tag">声明</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A9%E6%96%87/" rel="tag">天文</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90/" rel="tag">学习资源</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%B9%E8%AF%9D%E5%BD%95/" rel="tag">对话录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E5%BE%97/" rel="tag">心得</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%A5%E5%91%8A/" rel="tag">报告</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E7%89%88/" rel="tag">排版</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%85%E4%B9%A1/" rel="tag">故乡</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%87%E6%9C%AC%E9%A6%86/" rel="tag">标本馆</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A4%8D%E7%89%A9%E5%88%86%E7%B1%BB/" rel="tag">植物分类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A4%8D%E7%89%A9%E5%AD%A6%E5%90%8D/" rel="tag">植物学名</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B1%82%E8%81%8C/" rel="tag">求职</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" rel="tag">版本控制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%80%81/" rel="tag">生态</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%80%81%E8%B5%84%E8%AE%AF/" rel="tag">生态资讯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E7%82%B9%E6%BB%B4/" rel="tag">生活点滴</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A0%94%E7%A9%B6%E8%B5%84%E8%AE%AF/" rel="tag">研究资讯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%B3%BB%E7%BB%9F%E5%8F%91%E8%82%B2/" rel="tag">系统发育</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%9F%E8%AE%A1/" rel="tag">统计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B/" rel="tag">编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%8C%E6%91%84%E5%8C%86%E5%8C%86/" rel="tag">行摄匆匆</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A7%81%E9%97%BB%E5%BD%95/" rel="tag">见闻录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%97%E6%AD%8C/" rel="tag">诗歌</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9B%E5%8C%96/" rel="tag">进化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E6%83%B3/" rel="tag">随想</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A9%B3%E8%AE%BA/" rel="tag">驳论</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/R%E7%BC%96%E7%A8%8B/" style="font-size: 18.75px;">R编程</a> <a href="/tags/%E4%BA%BA%E7%89%A9/" style="font-size: 11.88px;">人物</a> <a href="/tags/%E5%86%99%E4%BD%9C/" style="font-size: 13.13px;">写作</a> <a href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" style="font-size: 12.5px;">可视化</a> <a href="/tags/%E5%9B%BE%E4%B9%A6/" style="font-size: 10px;">图书</a> <a href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" style="font-size: 11.88px;">图像处理</a> <a href="/tags/%E5%9C%B0%E7%90%86/" style="font-size: 17.5px;">地理</a> <a href="/tags/%E5%A3%B0%E6%98%8E/" style="font-size: 10.63px;">声明</a> <a href="/tags/%E5%A4%A9%E6%96%87/" style="font-size: 16.25px;">天文</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90/" style="font-size: 10px;">学习资源</a> <a href="/tags/%E5%AF%B9%E8%AF%9D%E5%BD%95/" style="font-size: 10px;">对话录</a> <a href="/tags/%E5%BF%83%E5%BE%97/" style="font-size: 10px;">心得</a> <a href="/tags/%E6%8A%A5%E5%91%8A/" style="font-size: 12.5px;">报告</a> <a href="/tags/%E6%8E%92%E7%89%88/" style="font-size: 13.75px;">排版</a> <a href="/tags/%E6%95%85%E4%B9%A1/" style="font-size: 10.63px;">故乡</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10.63px;">数据库</a> <a href="/tags/%E6%A0%87%E6%9C%AC%E9%A6%86/" style="font-size: 14.38px;">标本馆</a> <a href="/tags/%E6%A4%8D%E7%89%A9%E5%88%86%E7%B1%BB/" style="font-size: 10px;">植物分类</a> <a href="/tags/%E6%A4%8D%E7%89%A9%E5%AD%A6%E5%90%8D/" style="font-size: 10px;">植物学名</a> <a href="/tags/%E6%B1%82%E8%81%8C/" style="font-size: 10px;">求职</a> <a href="/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" style="font-size: 11.25px;">版本控制</a> <a href="/tags/%E7%94%9F%E6%80%81/" style="font-size: 16.88px;">生态</a> <a href="/tags/%E7%94%9F%E6%80%81%E8%B5%84%E8%AE%AF/" style="font-size: 10px;">生态资讯</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E7%82%B9%E6%BB%B4/" style="font-size: 10px;">生活点滴</a> <a href="/tags/%E7%A0%94%E7%A9%B6%E8%B5%84%E8%AE%AF/" style="font-size: 10px;">研究资讯</a> <a href="/tags/%E7%B3%BB%E7%BB%9F%E5%8F%91%E8%82%B2/" style="font-size: 10px;">系统发育</a> <a href="/tags/%E7%BB%9F%E8%AE%A1/" style="font-size: 18.13px;">统计</a> <a href="/tags/%E7%BC%96%E7%A8%8B/" style="font-size: 10.63px;">编程</a> <a href="/tags/%E8%A1%8C%E6%91%84%E5%8C%86%E5%8C%86/" style="font-size: 15px;">行摄匆匆</a> <a href="/tags/%E8%A7%81%E9%97%BB%E5%BD%95/" style="font-size: 10px;">见闻录</a> <a href="/tags/%E8%AF%97%E6%AD%8C/" style="font-size: 15.63px;">诗歌</a> <a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 19.38px;">软件</a> <a href="/tags/%E8%BF%9B%E5%8C%96/" style="font-size: 10.63px;">进化</a> <a href="/tags/%E9%9A%8F%E6%83%B3/" style="font-size: 11.25px;">随想</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 20px;">随笔</a> <a href="/tags/%E9%A9%B3%E8%AE%BA/" style="font-size: 10px;">驳论</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">February 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">October 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10/">October 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">August 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/07/">July 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/06/">June 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/05/">May 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/04/">April 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/02/">February 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">January 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/12/">December 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">November 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/10/">October 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/08/">August 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/07/">July 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/05/">May 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">April 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/03/">March 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/02/">February 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/12/">December 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/11/">November 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/09/">September 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/08/">August 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/07/">July 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06/">June 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/05/">May 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/04/">April 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/03/">March 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/01/">January 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/08/">August 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/07/">July 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/06/">June 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/05/">May 2009</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/03/31/2022-03-31run_phylomatic/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/01/15/2022-01-15dangxia/">当下</a>
          </li>
        
          <li>
            <a href="/2021/11/05/2021-11-05lamtsuenriver/">林村河</a>
          </li>
        
          <li>
            <a href="/2021/09/13/2021-10-19school/">最初的小学时光</a>
          </li>
        
          <li>
            <a href="/2021/07/25/2021-07-25beans/">种豆记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 Jinlong Zhang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>